/*! For license information please see main.js.LICENSE.txt */
(()=>{var t={1590:t=>{"use strict";var e,r="object"==typeof Reflect?Reflect:null,i=r&&"function"==typeof r.apply?r.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};e=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var n=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(t,e){return new Promise((function(r,i){function n(r){t.removeListener(e,s),i(r)}function s(){"function"==typeof t.removeListener&&t.removeListener("error",n),r([].slice.call(arguments))}g(t,e,s,{once:!0}),"error"!==e&&function(t,e,r){"function"==typeof t.on&&g(t,"error",e,r)}(t,n,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function o(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function h(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function u(t,e,r,i){var n,s,a,u;if(o(r),void 0===(s=t._events)?(s=t._events=Object.create(null),t._eventsCount=0):(void 0!==s.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),a=s[e]),void 0===a)a=s[e]=r,++t._eventsCount;else if("function"==typeof a?a=s[e]=i?[r,a]:[a,r]:i?a.unshift(r):a.push(r),(n=h(t))>0&&a.length>n&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=a.length,u=l,console&&console.warn&&console.warn(u)}return t}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(t,e,r){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},n=l.bind(i);return n.listener=r,i.wrapFn=n,n}function d(t,e,r){var i=t._events;if(void 0===i)return[];var n=i[e];return void 0===n?[]:"function"==typeof n?r?[n.listener||n]:[n]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(n):f(n,n.length)}function p(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function f(t,e){for(var r=new Array(e),i=0;i<e;++i)r[i]=t[i];return r}function g(t,e,r,i){if("function"==typeof t.on)i.once?t.once(e,r):t.on(e,r);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function n(s){i.once&&t.removeEventListener(e,n),r(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t||t<0||n(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");a=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||n(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return h(this)},s.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n="error"===t,s=this._events;if(void 0!==s)n=n&&void 0===s.error;else if(!n)return!1;if(n){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var h=s[t];if(void 0===h)return!1;if("function"==typeof h)i(h,this,e);else{var u=h.length,l=f(h,u);for(r=0;r<u;++r)i(l[r],this,e)}return!0},s.prototype.addListener=function(t,e){return u(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return u(this,t,e,!0)},s.prototype.once=function(t,e){return o(e),this.on(t,c(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return o(e),this.prependListener(t,c(this,t,e)),this},s.prototype.removeListener=function(t,e){var r,i,n,s,a;if(o(e),void 0===(i=this._events))return this;if(void 0===(r=i[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(n=-1,s=r.length-1;s>=0;s--)if(r[s]===e||r[s].listener===e){a=r[s].listener,n=s;break}if(n<0)return this;0===n?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,n),1===r.length&&(i[t]=r[0]),void 0!==i.removeListener&&this.emit("removeListener",t,a||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,r,i;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var n,s=Object.keys(r);for(i=0;i<s.length;++i)"removeListener"!==(n=s[i])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},s.prototype.listeners=function(t){return d(this,t,!0)},s.prototype.rawListeners=function(t){return d(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):p.call(t,e)},s.prototype.listenerCount=p,s.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},9940:(t,e,r)=>{var i=r(3203)(r(4362),"DataView");t.exports=i},1979:(t,e,r)=>{var i=r(9129),n=r(7644),s=r(3486),a=r(4786),o=r(6444);function h(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}h.prototype.clear=i,h.prototype.delete=n,h.prototype.get=s,h.prototype.has=a,h.prototype.set=o,t.exports=h},2768:(t,e,r)=>{var i=r(3708),n=r(6993),s=r(286),a=r(1678),o=r(9743);function h(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}h.prototype.clear=i,h.prototype.delete=n,h.prototype.get=s,h.prototype.has=a,h.prototype.set=o,t.exports=h},4804:(t,e,r)=>{var i=r(3203)(r(4362),"Map");t.exports=i},8423:(t,e,r)=>{var i=r(6977),n=r(7474),s=r(727),a=r(3653),o=r(6140);function h(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}h.prototype.clear=i,h.prototype.delete=n,h.prototype.get=s,h.prototype.has=a,h.prototype.set=o,t.exports=h},7114:(t,e,r)=>{var i=r(3203)(r(4362),"Promise");t.exports=i},689:(t,e,r)=>{var i=r(3203)(r(4362),"Set");t.exports=i},9832:(t,e,r)=>{var i=r(8423),n=r(9911),s=r(7447);function a(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new i;++e<r;)this.add(t[e])}a.prototype.add=a.prototype.push=n,a.prototype.has=s,t.exports=a},959:(t,e,r)=>{var i=r(2768),n=r(7553),s=r(6038),a=r(2397),o=r(2421),h=r(2936);function u(t){var e=this.__data__=new i(t);this.size=e.size}u.prototype.clear=n,u.prototype.delete=s,u.prototype.get=a,u.prototype.has=o,u.prototype.set=h,t.exports=u},2773:(t,e,r)=>{var i=r(4362).Symbol;t.exports=i},2496:(t,e,r)=>{var i=r(4362).Uint8Array;t.exports=i},5284:(t,e,r)=>{var i=r(3203)(r(4362),"WeakMap");t.exports=i},4111:t=>{t.exports=function(t,e){for(var r=-1,i=null==t?0:t.length;++r<i&&!1!==e(t[r],r,t););return t}},6523:t=>{t.exports=function(t,e){for(var r=-1,i=null==t?0:t.length,n=0,s=[];++r<i;){var a=t[r];e(a,r,t)&&(s[n++]=a)}return s}},8083:(t,e,r)=>{var i=r(5094),n=r(9246),s=r(3670),a=r(2343),o=r(4782),h=r(1589),u=Object.prototype.hasOwnProperty;t.exports=function(t,e){var r=s(t),l=!r&&n(t),c=!r&&!l&&a(t),d=!r&&!l&&!c&&h(t),p=r||l||c||d,f=p?i(t.length,String):[],g=f.length;for(var m in t)!e&&!u.call(t,m)||p&&("length"==m||c&&("offset"==m||"parent"==m)||d&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||o(m,g))||f.push(m);return f}},9258:t=>{t.exports=function(t,e){for(var r=-1,i=null==t?0:t.length,n=Array(i);++r<i;)n[r]=e(t[r],r,t);return n}},8421:t=>{t.exports=function(t,e){for(var r=-1,i=e.length,n=t.length;++r<i;)t[n+r]=e[r];return t}},4481:t=>{t.exports=function(t,e){for(var r=-1,i=null==t?0:t.length;++r<i;)if(e(t[r],r,t))return!0;return!1}},6213:(t,e,r)=>{var i=r(7950);t.exports=function(t,e){for(var r=t.length;r--;)if(i(t[r][0],e))return r;return-1}},5806:(t,e,r)=>{var i=r(5645),n=r(3978)(i);t.exports=n},7079:(t,e,r)=>{var i=r(7924)();t.exports=i},5645:(t,e,r)=>{var i=r(7079),n=r(3225);t.exports=function(t,e){return t&&i(t,e,n)}},5974:(t,e,r)=>{var i=r(6883),n=r(7102);t.exports=function(t,e){for(var r=0,s=(e=i(e,t)).length;null!=t&&r<s;)t=t[n(e[r++])];return r&&r==s?t:void 0}},891:(t,e,r)=>{var i=r(8421),n=r(3670);t.exports=function(t,e,r){var s=e(t);return n(t)?s:i(s,r(t))}},1185:(t,e,r)=>{var i=r(2773),n=r(3888),s=r(2299),a=i?i.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?n(t):s(t)}},5529:t=>{t.exports=function(t,e){return null!=t&&e in Object(t)}},1075:(t,e,r)=>{var i=r(1185),n=r(4939);t.exports=function(t){return n(t)&&"[object Arguments]"==i(t)}},9856:(t,e,r)=>{var i=r(1829),n=r(4939);t.exports=function t(e,r,s,a,o){return e===r||(null==e||null==r||!n(e)&&!n(r)?e!=e&&r!=r:i(e,r,s,a,t,o))}},1829:(t,e,r)=>{var i=r(959),n=r(3426),s=r(1402),a=r(4572),o=r(2417),h=r(3670),u=r(2343),l=r(1589),c="[object Arguments]",d="[object Array]",p="[object Object]",f=Object.prototype.hasOwnProperty;t.exports=function(t,e,r,g,m,v){var x=h(t),y=h(e),b=x?d:o(t),w=y?d:o(e),E=(b=b==c?p:b)==p,_=(w=w==c?p:w)==p,M=b==w;if(M&&u(t)){if(!u(e))return!1;x=!0,E=!1}if(M&&!E)return v||(v=new i),x||l(t)?n(t,e,r,g,m,v):s(t,e,b,r,g,m,v);if(!(1&r)){var A=E&&f.call(t,"__wrapped__"),T=_&&f.call(e,"__wrapped__");if(A||T){var S=A?t.value():t,O=T?e.value():e;return v||(v=new i),m(S,O,r,g,v)}}return!!M&&(v||(v=new i),a(t,e,r,g,m,v))}},4656:(t,e,r)=>{var i=r(959),n=r(9856);t.exports=function(t,e,r,s){var a=r.length,o=a,h=!s;if(null==t)return!o;for(t=Object(t);a--;){var u=r[a];if(h&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++a<o;){var l=(u=r[a])[0],c=t[l],d=u[1];if(h&&u[2]){if(void 0===c&&!(l in t))return!1}else{var p=new i;if(s)var f=s(c,d,l,t,e,p);if(!(void 0===f?n(d,c,3,s,p):f))return!1}}return!0}},4106:(t,e,r)=>{var i=r(3626),n=r(9249),s=r(71),a=r(1214),o=/^\[object .+?Constructor\]$/,h=Function.prototype,u=Object.prototype,l=h.toString,c=u.hasOwnProperty,d=RegExp("^"+l.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!s(t)||n(t))&&(i(t)?d:o).test(a(t))}},3638:(t,e,r)=>{var i=r(1185),n=r(7100),s=r(4939),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return s(t)&&n(t.length)&&!!a[i(t)]}},9047:(t,e,r)=>{var i=r(8334),n=r(5941),s=r(1559),a=r(3670),o=r(8886);t.exports=function(t){return"function"==typeof t?t:null==t?s:"object"==typeof t?a(t)?n(t[0],t[1]):i(t):o(t)}},7521:(t,e,r)=>{var i=r(2803),n=r(3865),s=Object.prototype.hasOwnProperty;t.exports=function(t){if(!i(t))return n(t);var e=[];for(var r in Object(t))s.call(t,r)&&"constructor"!=r&&e.push(r);return e}},5901:(t,e,r)=>{var i=r(5806),n=r(6175);t.exports=function(t,e){var r=-1,s=n(t)?Array(t.length):[];return i(t,(function(t,i,n){s[++r]=e(t,i,n)})),s}},8334:(t,e,r)=>{var i=r(4656),n=r(2811),s=r(4248);t.exports=function(t){var e=n(t);return 1==e.length&&e[0][2]?s(e[0][0],e[0][1]):function(r){return r===t||i(r,t,e)}}},5941:(t,e,r)=>{var i=r(9856),n=r(643),s=r(9059),a=r(837),o=r(3631),h=r(4248),u=r(7102);t.exports=function(t,e){return a(t)&&o(e)?h(u(t),e):function(r){var a=n(r,t);return void 0===a&&a===e?s(r,t):i(e,a,3)}}},3184:t=>{t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},886:(t,e,r)=>{var i=r(5974);t.exports=function(t){return function(e){return i(e,t)}}},5094:t=>{t.exports=function(t,e){for(var r=-1,i=Array(t);++r<t;)i[r]=e(r);return i}},8257:(t,e,r)=>{var i=r(2773),n=r(9258),s=r(3670),a=r(4655),o=i?i.prototype:void 0,h=o?o.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(s(e))return n(e,t)+"";if(a(e))return h?h.call(e):"";var r=e+"";return"0"==r&&1/e==-Infinity?"-0":r}},9081:t=>{t.exports=function(t){return function(e){return t(e)}}},3159:t=>{t.exports=function(t,e){return t.has(e)}},3183:(t,e,r)=>{var i=r(1559);t.exports=function(t){return"function"==typeof t?t:i}},6883:(t,e,r)=>{var i=r(3670),n=r(837),s=r(376),a=r(2049);t.exports=function(t,e){return i(t)?t:n(t,e)?[t]:s(a(t))}},1741:(t,e,r)=>{var i=r(4362)["__core-js_shared__"];t.exports=i},3978:(t,e,r)=>{var i=r(6175);t.exports=function(t,e){return function(r,n){if(null==r)return r;if(!i(r))return t(r,n);for(var s=r.length,a=e?s:-1,o=Object(r);(e?a--:++a<s)&&!1!==n(o[a],a,o););return r}}},7924:t=>{t.exports=function(t){return function(e,r,i){for(var n=-1,s=Object(e),a=i(e),o=a.length;o--;){var h=a[t?o:++n];if(!1===r(s[h],h,s))break}return e}}},3426:(t,e,r)=>{var i=r(9832),n=r(4481),s=r(3159);t.exports=function(t,e,r,a,o,h){var u=1&r,l=t.length,c=e.length;if(l!=c&&!(u&&c>l))return!1;var d=h.get(t),p=h.get(e);if(d&&p)return d==e&&p==t;var f=-1,g=!0,m=2&r?new i:void 0;for(h.set(t,e),h.set(e,t);++f<l;){var v=t[f],x=e[f];if(a)var y=u?a(x,v,f,e,t,h):a(v,x,f,t,e,h);if(void 0!==y){if(y)continue;g=!1;break}if(m){if(!n(e,(function(t,e){if(!s(m,e)&&(v===t||o(v,t,r,a,h)))return m.push(e)}))){g=!1;break}}else if(v!==x&&!o(v,x,r,a,h)){g=!1;break}}return h.delete(t),h.delete(e),g}},1402:(t,e,r)=>{var i=r(2773),n=r(2496),s=r(7950),a=r(3426),o=r(8961),h=r(6983),u=i?i.prototype:void 0,l=u?u.valueOf:void 0;t.exports=function(t,e,r,i,u,c,d){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!c(new n(t),new n(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return s(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var p=o;case"[object Set]":var f=1&i;if(p||(p=h),t.size!=e.size&&!f)return!1;var g=d.get(t);if(g)return g==e;i|=2,d.set(t,e);var m=a(p(t),p(e),i,u,c,d);return d.delete(t),m;case"[object Symbol]":if(l)return l.call(t)==l.call(e)}return!1}},4572:(t,e,r)=>{var i=r(5788),n=Object.prototype.hasOwnProperty;t.exports=function(t,e,r,s,a,o){var h=1&r,u=i(t),l=u.length;if(l!=i(e).length&&!h)return!1;for(var c=l;c--;){var d=u[c];if(!(h?d in e:n.call(e,d)))return!1}var p=o.get(t),f=o.get(e);if(p&&f)return p==e&&f==t;var g=!0;o.set(t,e),o.set(e,t);for(var m=h;++c<l;){var v=t[d=u[c]],x=e[d];if(s)var y=h?s(x,v,d,e,t,o):s(v,x,d,t,e,o);if(!(void 0===y?v===x||a(v,x,r,s,o):y)){g=!1;break}m||(m="constructor"==d)}if(g&&!m){var b=t.constructor,w=e.constructor;b==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(g=!1)}return o.delete(t),o.delete(e),g}},8556:(t,e,r)=>{var i="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;t.exports=i},5788:(t,e,r)=>{var i=r(891),n=r(6918),s=r(3225);t.exports=function(t){return i(t,s,n)}},404:(t,e,r)=>{var i=r(9008);t.exports=function(t,e){var r=t.__data__;return i(e)?r["string"==typeof e?"string":"hash"]:r.map}},2811:(t,e,r)=>{var i=r(3631),n=r(3225);t.exports=function(t){for(var e=n(t),r=e.length;r--;){var s=e[r],a=t[s];e[r]=[s,a,i(a)]}return e}},3203:(t,e,r)=>{var i=r(4106),n=r(7338);t.exports=function(t,e){var r=n(t,e);return i(r)?r:void 0}},3888:(t,e,r)=>{var i=r(2773),n=Object.prototype,s=n.hasOwnProperty,a=n.toString,o=i?i.toStringTag:void 0;t.exports=function(t){var e=s.call(t,o),r=t[o];try{t[o]=void 0;var i=!0}catch(t){}var n=a.call(t);return i&&(e?t[o]=r:delete t[o]),n}},6918:(t,e,r)=>{var i=r(6523),n=r(4043),s=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,o=a?function(t){return null==t?[]:(t=Object(t),i(a(t),(function(e){return s.call(t,e)})))}:n;t.exports=o},2417:(t,e,r)=>{var i=r(9940),n=r(4804),s=r(7114),a=r(689),o=r(5284),h=r(1185),u=r(1214),l="[object Map]",c="[object Promise]",d="[object Set]",p="[object WeakMap]",f="[object DataView]",g=u(i),m=u(n),v=u(s),x=u(a),y=u(o),b=h;(i&&b(new i(new ArrayBuffer(1)))!=f||n&&b(new n)!=l||s&&b(s.resolve())!=c||a&&b(new a)!=d||o&&b(new o)!=p)&&(b=function(t){var e=h(t),r="[object Object]"==e?t.constructor:void 0,i=r?u(r):"";if(i)switch(i){case g:return f;case m:return l;case v:return c;case x:return d;case y:return p}return e}),t.exports=b},7338:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},4727:(t,e,r)=>{var i=r(6883),n=r(9246),s=r(3670),a=r(4782),o=r(7100),h=r(7102);t.exports=function(t,e,r){for(var u=-1,l=(e=i(e,t)).length,c=!1;++u<l;){var d=h(e[u]);if(!(c=null!=t&&r(t,d)))break;t=t[d]}return c||++u!=l?c:!!(l=null==t?0:t.length)&&o(l)&&a(d,l)&&(s(t)||n(t))}},9129:(t,e,r)=>{var i=r(6326);t.exports=function(){this.__data__=i?i(null):{},this.size=0}},7644:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},3486:(t,e,r)=>{var i=r(6326),n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(i){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return n.call(e,t)?e[t]:void 0}},4786:(t,e,r)=>{var i=r(6326),n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return i?void 0!==e[t]:n.call(e,t)}},6444:(t,e,r)=>{var i=r(6326);t.exports=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=i&&void 0===e?"__lodash_hash_undefined__":e,this}},4782:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,r){var i=typeof t;return!!(r=null==r?9007199254740991:r)&&("number"==i||"symbol"!=i&&e.test(t))&&t>-1&&t%1==0&&t<r}},837:(t,e,r)=>{var i=r(3670),n=r(4655),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(i(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!n(t))||(a.test(t)||!s.test(t)||null!=e&&t in Object(e))}},9008:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},9249:(t,e,r)=>{var i,n=r(1741),s=(i=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"";t.exports=function(t){return!!s&&s in t}},2803:t=>{var e=Object.prototype;t.exports=function(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||e)}},3631:(t,e,r)=>{var i=r(71);t.exports=function(t){return t==t&&!i(t)}},3708:t=>{t.exports=function(){this.__data__=[],this.size=0}},6993:(t,e,r)=>{var i=r(6213),n=Array.prototype.splice;t.exports=function(t){var e=this.__data__,r=i(e,t);return!(r<0)&&(r==e.length-1?e.pop():n.call(e,r,1),--this.size,!0)}},286:(t,e,r)=>{var i=r(6213);t.exports=function(t){var e=this.__data__,r=i(e,t);return r<0?void 0:e[r][1]}},1678:(t,e,r)=>{var i=r(6213);t.exports=function(t){return i(this.__data__,t)>-1}},9743:(t,e,r)=>{var i=r(6213);t.exports=function(t,e){var r=this.__data__,n=i(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}},6977:(t,e,r)=>{var i=r(1979),n=r(2768),s=r(4804);t.exports=function(){this.size=0,this.__data__={hash:new i,map:new(s||n),string:new i}}},7474:(t,e,r)=>{var i=r(404);t.exports=function(t){var e=i(this,t).delete(t);return this.size-=e?1:0,e}},727:(t,e,r)=>{var i=r(404);t.exports=function(t){return i(this,t).get(t)}},3653:(t,e,r)=>{var i=r(404);t.exports=function(t){return i(this,t).has(t)}},6140:(t,e,r)=>{var i=r(404);t.exports=function(t,e){var r=i(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}},8961:t=>{t.exports=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t,i){r[++e]=[i,t]})),r}},4248:t=>{t.exports=function(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}}},5933:(t,e,r)=>{var i=r(104);t.exports=function(t){var e=i(t,(function(t){return 500===r.size&&r.clear(),t})),r=e.cache;return e}},6326:(t,e,r)=>{var i=r(3203)(Object,"create");t.exports=i},3865:(t,e,r)=>{var i=r(5290)(Object.keys,Object);t.exports=i},1985:(t,e,r)=>{t=r.nmd(t);var i=r(8556),n=e&&!e.nodeType&&e,s=n&&t&&!t.nodeType&&t,a=s&&s.exports===n&&i.process,o=function(){try{var t=s&&s.require&&s.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=o},2299:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},5290:t=>{t.exports=function(t,e){return function(r){return t(e(r))}}},4362:(t,e,r)=>{var i=r(8556),n="object"==typeof self&&self&&self.Object===Object&&self,s=i||n||Function("return this")();t.exports=s},9911:t=>{t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},7447:t=>{t.exports=function(t){return this.__data__.has(t)}},6983:t=>{t.exports=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}},7553:(t,e,r)=>{var i=r(2768);t.exports=function(){this.__data__=new i,this.size=0}},6038:t=>{t.exports=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}},2397:t=>{t.exports=function(t){return this.__data__.get(t)}},2421:t=>{t.exports=function(t){return this.__data__.has(t)}},2936:(t,e,r)=>{var i=r(2768),n=r(4804),s=r(8423);t.exports=function(t,e){var r=this.__data__;if(r instanceof i){var a=r.__data__;if(!n||a.length<199)return a.push([t,e]),this.size=++r.size,this;r=this.__data__=new s(a)}return r.set(t,e),this.size=r.size,this}},376:(t,e,r)=>{var i=r(5933),n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,a=i((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(n,(function(t,r,i,n){e.push(i?n.replace(s,"$1"):r||t)})),e}));t.exports=a},7102:(t,e,r)=>{var i=r(4655);t.exports=function(t){if("string"==typeof t||i(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}},1214:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},6270:(t,e,r)=>{t.exports=r(9982)},7950:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},9982:(t,e,r)=>{var i=r(4111),n=r(5806),s=r(3183),a=r(3670);t.exports=function(t,e){return(a(t)?i:n)(t,s(e))}},643:(t,e,r)=>{var i=r(5974);t.exports=function(t,e,r){var n=null==t?void 0:i(t,e);return void 0===n?r:n}},9059:(t,e,r)=>{var i=r(5529),n=r(4727);t.exports=function(t,e){return null!=t&&n(t,e,i)}},1559:t=>{t.exports=function(t){return t}},9246:(t,e,r)=>{var i=r(1075),n=r(4939),s=Object.prototype,a=s.hasOwnProperty,o=s.propertyIsEnumerable,h=i(function(){return arguments}())?i:function(t){return n(t)&&a.call(t,"callee")&&!o.call(t,"callee")};t.exports=h},3670:t=>{var e=Array.isArray;t.exports=e},6175:(t,e,r)=>{var i=r(3626),n=r(7100);t.exports=function(t){return null!=t&&n(t.length)&&!i(t)}},2343:(t,e,r)=>{t=r.nmd(t);var i=r(4362),n=r(3444),s=e&&!e.nodeType&&e,a=s&&t&&!t.nodeType&&t,o=a&&a.exports===s?i.Buffer:void 0,h=(o?o.isBuffer:void 0)||n;t.exports=h},3626:(t,e,r)=>{var i=r(1185),n=r(71);t.exports=function(t){if(!n(t))return!1;var e=i(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},7100:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},71:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},4939:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},4655:(t,e,r)=>{var i=r(1185),n=r(4939);t.exports=function(t){return"symbol"==typeof t||n(t)&&"[object Symbol]"==i(t)}},1589:(t,e,r)=>{var i=r(3638),n=r(9081),s=r(1985),a=s&&s.isTypedArray,o=a?n(a):i;t.exports=o},3225:(t,e,r)=>{var i=r(8083),n=r(7521),s=r(6175);t.exports=function(t){return s(t)?i(t):n(t)}},7976:(t,e,r)=>{var i=r(9258),n=r(9047),s=r(5901),a=r(3670);t.exports=function(t,e){return(a(t)?i:s)(t,n(e,3))}},104:(t,e,r)=>{var i=r(8423);function n(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var i=arguments,n=e?e.apply(this,i):i[0],s=r.cache;if(s.has(n))return s.get(n);var a=t.apply(this,i);return r.cache=s.set(n,a)||s,a};return r.cache=new(n.Cache||i),r}n.Cache=i,t.exports=n},8886:(t,e,r)=>{var i=r(3184),n=r(886),s=r(837),a=r(7102);t.exports=function(t){return s(t)?i(a(t)):n(t)}},4043:t=>{t.exports=function(){return[]}},3444:t=>{t.exports=function(){return!1}},2049:(t,e,r)=>{var i=r(8257);t.exports=function(t){return null==t?"":i(t)}},7320:(t,e,r)=>{t.exports=r(1045)},7230:t=>{"use strict";var e=!("undefined"==typeof window||!window.document||!window.document.createElement),r={canUseDOM:e,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:e&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:e&&!!window.screen,isInWorker:!e};t.exports=r},2907:t=>{var e,r,i,n,s,a,o,h,u,l,c,d,p,f,g,m=!1;function v(){if(!m){m=!0;var t=navigator.userAgent,v=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),x=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(d=/\b(iPhone|iP[ao]d)/.exec(t),p=/\b(iP[ao]d)/.exec(t),l=/Android/i.exec(t),f=/FBAN\/\w+;/i.exec(t),g=/Mobile/i.exec(t),c=!!/Win64/.exec(t),v){(e=v[1]?parseFloat(v[1]):v[5]?parseFloat(v[5]):NaN)&&document&&document.documentMode&&(e=document.documentMode);var y=/(?:Trident\/(\d+.\d+))/.exec(t);a=y?parseFloat(y[1])+4:e,r=v[2]?parseFloat(v[2]):NaN,i=v[3]?parseFloat(v[3]):NaN,(n=v[4]?parseFloat(v[4]):NaN)?(v=/(?:Chrome\/(\d+\.\d+))/.exec(t),s=v&&v[1]?parseFloat(v[1]):NaN):s=NaN}else e=r=i=s=n=NaN;if(x){if(x[1]){var b=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);o=!b||parseFloat(b[1].replace("_","."))}else o=!1;h=!!x[2],u=!!x[3]}else o=h=u=!1}}var x={ie:function(){return v()||e},ieCompatibilityMode:function(){return v()||a>e},ie64:function(){return x.ie()&&c},firefox:function(){return v()||r},opera:function(){return v()||i},webkit:function(){return v()||n},safari:function(){return x.webkit()},chrome:function(){return v()||s},windows:function(){return v()||h},osx:function(){return v()||o},linux:function(){return v()||u},iphone:function(){return v()||d},mobile:function(){return v()||d||p||l||g},nativeApp:function(){return v()||f},android:function(){return v()||l},ipad:function(){return v()||p}};t.exports=x},4480:(t,e,r)=>{"use strict";var i,n=r(7230);n.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),t.exports=function(t,e){if(!n.canUseDOM||e&&!("addEventListener"in document))return!1;var r="on"+t,s=r in document;if(!s){var a=document.createElement("div");a.setAttribute(r,"return;"),s="function"==typeof a[r]}return!s&&i&&"wheel"===t&&(s=document.implementation.hasFeature("Events.wheel","3.0")),s}},1045:(t,e,r)=>{"use strict";var i=r(2907),n=r(4480);function s(t){var e=0,r=0,i=0,n=0;return"detail"in t&&(r=t.detail),"wheelDelta"in t&&(r=-t.wheelDelta/120),"wheelDeltaY"in t&&(r=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=r,r=0),i=10*e,n=10*r,"deltaY"in t&&(n=t.deltaY),"deltaX"in t&&(i=t.deltaX),(i||n)&&t.deltaMode&&(1==t.deltaMode?(i*=40,n*=40):(i*=800,n*=800)),i&&!e&&(e=i<1?-1:1),n&&!r&&(r=n<1?-1:1),{spinX:e,spinY:r,pixelX:i,pixelY:n}}s.getEventType=function(){return i.firefox()?"DOMMouseScroll":n("wheel")?"wheel":"mousewheel"},t.exports=s}},e={};function r(i){var n=e[i];if(void 0!==n)return n.exports;var s=e[i]={id:i,loaded:!1,exports:{}};return t[i](s,s.exports,r),s.loaded=!0,s.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var i in e)r.o(e,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";var t=r(7320),e=r.n(t),i=r(6270),n=r.n(i);const s=new class{isMobile(){return/Mobi|Andrdoid|Tablet|iPad|iPhone/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1}};function a(t){let e=t[0],r=t[1],i=t[2];return Math.sqrt(e*e+r*r+i*i)}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function h(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function u(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function l(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function c(t){let e=t[0],r=t[1],i=t[2];return e*e+r*r+i*i}function d(t,e){let r=e[0],i=e[1],n=e[2],s=r*r+i*i+n*n;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function p(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function f(t,e,r){let i=e[0],n=e[1],s=e[2],a=r[0],o=r[1],h=r[2];return t[0]=n*h-s*o,t[1]=s*a-i*h,t[2]=i*o-n*a,t}const g=function(){const t=[0,0,0],e=[0,0,0];return function(r,i){o(t,r),o(e,i),d(t,t),d(e,e);let n=p(t,e);return n>1?0:n<-1?Math.PI:Math.acos(n)}}();class m extends Array{constructor(t=0,e=t,r=t){return super(t,e,r),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(t){this[0]=t}set y(t){this[1]=t}set z(t){this[2]=t}set(t,e=t,r=t){return t.length?this.copy(t):(function(t,e,r,i){t[0]=e,t[1]=r,t[2]=i}(this,t,e,r),this)}copy(t){return o(this,t),this}add(t,e){return e?h(this,t,e):h(this,this,t),this}sub(t,e){return e?u(this,t,e):u(this,this,t),this}multiply(t){var e,r,i;return t.length?(r=this,i=t,(e=this)[0]=r[0]*i[0],e[1]=r[1]*i[1],e[2]=r[2]*i[2]):l(this,this,t),this}divide(t){var e,r,i;return t.length?(r=this,i=t,(e=this)[0]=r[0]/i[0],e[1]=r[1]/i[1],e[2]=r[2]/i[2]):l(this,this,1/t),this}inverse(t=this){var e,r;return r=t,(e=this)[0]=1/r[0],e[1]=1/r[1],e[2]=1/r[2],this}len(){return a(this)}distance(t){return t?function(t,e){let r=e[0]-t[0],i=e[1]-t[1],n=e[2]-t[2];return Math.sqrt(r*r+i*i+n*n)}(this,t):a(this)}squaredLen(){return c(this)}squaredDistance(t){return t?function(t,e){let r=e[0]-t[0],i=e[1]-t[1],n=e[2]-t[2];return r*r+i*i+n*n}(this,t):c(this)}negate(t=this){var e,r;return r=t,(e=this)[0]=-r[0],e[1]=-r[1],e[2]=-r[2],this}cross(t,e){return e?f(this,t,e):f(this,this,t),this}scale(t){return l(this,this,t),this}normalize(){return d(this,this),this}dot(t){return p(this,t)}equals(t){return r=t,(e=this)[0]===r[0]&&e[1]===r[1]&&e[2]===r[2];var e,r}applyMatrix3(t){return function(t,e,r){let i=e[0],n=e[1],s=e[2];t[0]=i*r[0]+n*r[3]+s*r[6],t[1]=i*r[1]+n*r[4]+s*r[7],t[2]=i*r[2]+n*r[5]+s*r[8]}(this,this,t),this}applyMatrix4(t){return function(t,e,r){let i=e[0],n=e[1],s=e[2],a=r[3]*i+r[7]*n+r[11]*s+r[15];a=a||1,t[0]=(r[0]*i+r[4]*n+r[8]*s+r[12])/a,t[1]=(r[1]*i+r[5]*n+r[9]*s+r[13])/a,t[2]=(r[2]*i+r[6]*n+r[10]*s+r[14])/a}(this,this,t),this}scaleRotateMatrix4(t){return function(t,e,r){let i=e[0],n=e[1],s=e[2],a=r[3]*i+r[7]*n+r[11]*s+r[15];a=a||1,t[0]=(r[0]*i+r[4]*n+r[8]*s)/a,t[1]=(r[1]*i+r[5]*n+r[9]*s)/a,t[2]=(r[2]*i+r[6]*n+r[10]*s)/a}(this,this,t),this}applyQuaternion(t){return function(t,e,r){let i=e[0],n=e[1],s=e[2],a=r[0],o=r[1],h=r[2],u=o*s-h*n,l=h*i-a*s,c=a*n-o*i,d=o*c-h*l,p=h*u-a*c,f=a*l-o*u,g=2*r[3];u*=g,l*=g,c*=g,d*=2,p*=2,f*=2,t[0]=i+u+d,t[1]=n+l+p,t[2]=s+c+f}(this,this,t),this}angle(t){return g(this,t)}lerp(t,e){return function(t,e,r,i){let n=e[0],s=e[1],a=e[2];t[0]=n+i*(r[0]-n),t[1]=s+i*(r[1]-s),t[2]=a+i*(r[2]-a)}(this,this,t,e),this}clone(){return new m(this[0],this[1],this[2])}fromArray(t,e=0){return this[0]=t[e],this[1]=t[e+1],this[2]=t[e+2],this}toArray(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t}transformDirection(t){const e=this[0],r=this[1],i=this[2];return this[0]=t[0]*e+t[4]*r+t[8]*i,this[1]=t[1]*e+t[5]*r+t[9]*i,this[2]=t[2]*e+t[6]*r+t[10]*i,this.normalize()}}const v=new m;let x=1;class y{constructor({canvas:t=document.createElement("canvas"),width:e=300,height:r=150,dpr:i=1,alpha:n=!1,depth:s=!0,stencil:a=!1,antialias:o=!1,premultipliedAlpha:h=!1,preserveDrawingBuffer:u=!1,powerPreference:l="default",autoClear:c=!0,webgl:d=2}={}){const p={alpha:n,depth:s,stencil:a,antialias:o,premultipliedAlpha:h,preserveDrawingBuffer:u,powerPreference:l};this.dpr=i,this.alpha=n,this.color=!0,this.depth=s,this.stencil=a,this.premultipliedAlpha=h,this.autoClear=c,this.id=x++,2===d&&(this.gl=t.getContext("webgl2",p)),this.isWebgl2=!!this.gl,this.gl||(this.gl=t.getContext("webgl",p)),this.gl||console.error("unable to create webgl context"),this.gl.renderer=this,this.setSize(e,r),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=null,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LESS,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={x:0,y:0,width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.state.currentProgram=null,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.getExtension("WEBGL_compressed_texture_astc"),this.getExtension("EXT_texture_compression_bptc"),this.getExtension("WEBGL_compressed_texture_s3tc"),this.getExtension("WEBGL_compressed_texture_etc1"),this.getExtension("WEBGL_compressed_texture_pvrtc"),this.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}setSize(t,e){this.width=t,this.height=e,this.gl.canvas.width=t*this.dpr,this.gl.canvas.height=e*this.dpr,Object.assign(this.gl.canvas.style,{width:t+"px",height:e+"px"})}setViewport(t,e,r=0,i=0){this.state.viewport.width===t&&this.state.viewport.height===e||(this.state.viewport.width=t,this.state.viewport.height=e,this.state.viewport.x=r,this.state.viewport.y=i,this.gl.viewport(r,i,t,e))}setScissor(t,e,r=0,i=0){this.gl.scissor(r,i,t,e)}enable(t){!0!==this.state[t]&&(this.gl.enable(t),this.state[t]=!0)}disable(t){!1!==this.state[t]&&(this.gl.disable(t),this.state[t]=!1)}setBlendFunc(t,e,r,i){this.state.blendFunc.src===t&&this.state.blendFunc.dst===e&&this.state.blendFunc.srcAlpha===r&&this.state.blendFunc.dstAlpha===i||(this.state.blendFunc.src=t,this.state.blendFunc.dst=e,this.state.blendFunc.srcAlpha=r,this.state.blendFunc.dstAlpha=i,void 0!==r?this.gl.blendFuncSeparate(t,e,r,i):this.gl.blendFunc(t,e))}setBlendEquation(t,e){t=t||this.gl.FUNC_ADD,this.state.blendEquation.modeRGB===t&&this.state.blendEquation.modeAlpha===e||(this.state.blendEquation.modeRGB=t,this.state.blendEquation.modeAlpha=e,void 0!==e?this.gl.blendEquationSeparate(t,e):this.gl.blendEquation(t))}setCullFace(t){this.state.cullFace!==t&&(this.state.cullFace=t,this.gl.cullFace(t))}setFrontFace(t){this.state.frontFace!==t&&(this.state.frontFace=t,this.gl.frontFace(t))}setDepthMask(t){this.state.depthMask!==t&&(this.state.depthMask=t,this.gl.depthMask(t))}setDepthFunc(t){this.state.depthFunc!==t&&(this.state.depthFunc=t,this.gl.depthFunc(t))}activeTexture(t){this.state.activeTextureUnit!==t&&(this.state.activeTextureUnit=t,this.gl.activeTexture(this.gl.TEXTURE0+t))}bindFramebuffer({target:t=this.gl.FRAMEBUFFER,buffer:e=null}={}){this.state.framebuffer!==e&&(this.state.framebuffer=e,this.gl.bindFramebuffer(t,e))}getExtension(t,e,r){return e&&this.gl[e]?this.gl[e].bind(this.gl):(this.extensions[t]||(this.extensions[t]=this.gl.getExtension(t)),e?this.extensions[t]?this.extensions[t][r].bind(this.extensions[t]):null:this.extensions[t])}sortOpaque(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program.id!==e.program.id?t.program.id-e.program.id:t.zDepth!==e.zDepth?t.zDepth-e.zDepth:e.id-t.id}sortTransparent(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.zDepth!==e.zDepth?e.zDepth-t.zDepth:e.id-t.id}sortUI(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program.id!==e.program.id?t.program.id-e.program.id:e.id-t.id}getRenderList({scene:t,camera:e,frustumCull:r,sort:i}){let n=[];if(e&&r&&e.updateFrustum(),t.traverse((t=>{if(!t.visible)return!0;t.draw&&(r&&t.frustumCulled&&e&&!e.frustumIntersectsMesh(t)||n.push(t))})),i){const t=[],r=[],i=[];n.forEach((n=>{n.program.transparent?n.program.depthTest?r.push(n):i.push(n):t.push(n),n.zDepth=0,0===n.renderOrder&&n.program.depthTest&&e&&(n.worldMatrix.getTranslation(v),v.applyMatrix4(e.projectionViewMatrix),n.zDepth=v.z)})),t.sort(this.sortOpaque),r.sort(this.sortTransparent),i.sort(this.sortUI),n=t.concat(r,i)}return n}render({scene:t,camera:e,target:r=null,update:i=!0,sort:n=!0,frustumCull:s=!0,clear:a}){null===r?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(r),this.setViewport(r.width,r.height)),(a||this.autoClear&&!1!==a)&&(!this.depth||r&&!r.depth||(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),i&&t.updateMatrixWorld(),e&&e.updateMatrixWorld();this.getRenderList({scene:t,camera:e,frustumCull:s,sort:n}).forEach((t=>{t.draw({camera:e})}))}}function b(t,e,r){let i=e[0],n=e[1],s=e[2],a=e[3],o=r[0],h=r[1],u=r[2],l=r[3];return t[0]=i*l+a*o+n*u-s*h,t[1]=n*l+a*h+s*o-i*u,t[2]=s*l+a*u+i*h-n*o,t[3]=a*l-i*o-n*h-s*u,t}const w=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},E=function(t,e,r,i,n){return t[0]=e,t[1]=r,t[2]=i,t[3]=n,t},_=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},M=function(t,e){let r=e[0],i=e[1],n=e[2],s=e[3],a=r*r+i*i+n*n+s*s;return a>0&&(a=1/Math.sqrt(a)),t[0]=r*a,t[1]=i*a,t[2]=n*a,t[3]=s*a,t};class A extends Array{constructor(t=0,e=0,r=0,i=1){return super(t,e,r,i),this.onChange=()=>{},this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(t){this[0]=t,this.onChange()}set y(t){this[1]=t,this.onChange()}set z(t){this[2]=t,this.onChange()}set w(t){this[3]=t,this.onChange()}identity(){var t;return(t=this)[0]=0,t[1]=0,t[2]=0,t[3]=1,this.onChange(),this}set(t,e,r,i){return t.length?this.copy(t):(E(this,t,e,r,i),this.onChange(),this)}rotateX(t){return function(t,e,r){r*=.5;let i=e[0],n=e[1],s=e[2],a=e[3],o=Math.sin(r),h=Math.cos(r);t[0]=i*h+a*o,t[1]=n*h+s*o,t[2]=s*h-n*o,t[3]=a*h-i*o}(this,this,t),this.onChange(),this}rotateY(t){return function(t,e,r){r*=.5;let i=e[0],n=e[1],s=e[2],a=e[3],o=Math.sin(r),h=Math.cos(r);t[0]=i*h-s*o,t[1]=n*h+a*o,t[2]=s*h+i*o,t[3]=a*h-n*o}(this,this,t),this.onChange(),this}rotateZ(t){return function(t,e,r){r*=.5;let i=e[0],n=e[1],s=e[2],a=e[3],o=Math.sin(r),h=Math.cos(r);t[0]=i*h+n*o,t[1]=n*h-i*o,t[2]=s*h+a*o,t[3]=a*h-s*o}(this,this,t),this.onChange(),this}inverse(t=this){return function(t,e){let r=e[0],i=e[1],n=e[2],s=e[3],a=r*r+i*i+n*n+s*s,o=a?1/a:0;t[0]=-r*o,t[1]=-i*o,t[2]=-n*o,t[3]=s*o}(this,t),this.onChange(),this}conjugate(t=this){var e,r;return r=t,(e=this)[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e[3]=r[3],this.onChange(),this}copy(t){return w(this,t),this.onChange(),this}normalize(t=this){return M(this,t),this.onChange(),this}multiply(t,e){return e?b(this,t,e):b(this,this,t),this.onChange(),this}dot(t){return _(this,t)}fromMatrix3(t){return function(t,e){let r,i=e[0]+e[4]+e[8];if(i>0)r=Math.sqrt(i+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{let i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);let n=(i+1)%3,s=(i+2)%3;r=Math.sqrt(e[3*i+i]-e[3*n+n]-e[3*s+s]+1),t[i]=.5*r,r=.5/r,t[3]=(e[3*n+s]-e[3*s+n])*r,t[n]=(e[3*n+i]+e[3*i+n])*r,t[s]=(e[3*s+i]+e[3*i+s])*r}}(this,t),this.onChange(),this}fromEuler(t){return function(t,e,r="YXZ"){let i=Math.sin(.5*e[0]),n=Math.cos(.5*e[0]),s=Math.sin(.5*e[1]),a=Math.cos(.5*e[1]),o=Math.sin(.5*e[2]),h=Math.cos(.5*e[2]);"XYZ"===r?(t[0]=i*a*h+n*s*o,t[1]=n*s*h-i*a*o,t[2]=n*a*o+i*s*h,t[3]=n*a*h-i*s*o):"YXZ"===r?(t[0]=i*a*h+n*s*o,t[1]=n*s*h-i*a*o,t[2]=n*a*o-i*s*h,t[3]=n*a*h+i*s*o):"ZXY"===r?(t[0]=i*a*h-n*s*o,t[1]=n*s*h+i*a*o,t[2]=n*a*o+i*s*h,t[3]=n*a*h-i*s*o):"ZYX"===r?(t[0]=i*a*h-n*s*o,t[1]=n*s*h+i*a*o,t[2]=n*a*o-i*s*h,t[3]=n*a*h+i*s*o):"YZX"===r?(t[0]=i*a*h+n*s*o,t[1]=n*s*h+i*a*o,t[2]=n*a*o-i*s*h,t[3]=n*a*h-i*s*o):"XZY"===r&&(t[0]=i*a*h-n*s*o,t[1]=n*s*h-i*a*o,t[2]=n*a*o+i*s*h,t[3]=n*a*h+i*s*o)}(this,t,t.order),this}fromAxisAngle(t,e){return function(t,e,r){r*=.5;let i=Math.sin(r);t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(r)}(this,t,e),this.onChange(),this}slerp(t,e){return function(t,e,r,i){let n,s,a,o,h,u=e[0],l=e[1],c=e[2],d=e[3],p=r[0],f=r[1],g=r[2],m=r[3];s=u*p+l*f+c*g+d*m,s<0&&(s=-s,p=-p,f=-f,g=-g,m=-m),1-s>1e-6?(n=Math.acos(s),a=Math.sin(n),o=Math.sin((1-i)*n)/a,h=Math.sin(i*n)/a):(o=1-i,h=i),t[0]=o*u+h*p,t[1]=o*l+h*f,t[2]=o*c+h*g,t[3]=o*d+h*m}(this,this,t,e),this.onChange(),this}fromArray(t,e=0){return this[0]=t[e],this[1]=t[e+1],this[2]=t[e+2],this[3]=t[e+3],this.onChange(),this}toArray(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t[e+3]=this[3],t}}function T(t,e,r){let i=e[0],n=e[1],s=e[2],a=e[3],o=e[4],h=e[5],u=e[6],l=e[7],c=e[8],d=e[9],p=e[10],f=e[11],g=e[12],m=e[13],v=e[14],x=e[15],y=r[0],b=r[1],w=r[2],E=r[3];return t[0]=y*i+b*o+w*c+E*g,t[1]=y*n+b*h+w*d+E*m,t[2]=y*s+b*u+w*p+E*v,t[3]=y*a+b*l+w*f+E*x,y=r[4],b=r[5],w=r[6],E=r[7],t[4]=y*i+b*o+w*c+E*g,t[5]=y*n+b*h+w*d+E*m,t[6]=y*s+b*u+w*p+E*v,t[7]=y*a+b*l+w*f+E*x,y=r[8],b=r[9],w=r[10],E=r[11],t[8]=y*i+b*o+w*c+E*g,t[9]=y*n+b*h+w*d+E*m,t[10]=y*s+b*u+w*p+E*v,t[11]=y*a+b*l+w*f+E*x,y=r[12],b=r[13],w=r[14],E=r[15],t[12]=y*i+b*o+w*c+E*g,t[13]=y*n+b*h+w*d+E*m,t[14]=y*s+b*u+w*p+E*v,t[15]=y*a+b*l+w*f+E*x,t}function S(t,e){let r=e[0],i=e[1],n=e[2],s=e[4],a=e[5],o=e[6],h=e[8],u=e[9],l=e[10];return t[0]=Math.hypot(r,i,n),t[1]=Math.hypot(s,a,o),t[2]=Math.hypot(h,u,l),t}const O=function(){const t=[0,0,0];return function(e,r){let i=t;S(i,r);let n=1/i[0],s=1/i[1],a=1/i[2],o=r[0]*n,h=r[1]*s,u=r[2]*a,l=r[4]*n,c=r[5]*s,d=r[6]*a,p=r[8]*n,f=r[9]*s,g=r[10]*a,m=o+c+g,v=0;return m>0?(v=2*Math.sqrt(m+1),e[3]=.25*v,e[0]=(d-f)/v,e[1]=(p-u)/v,e[2]=(h-l)/v):o>c&&o>g?(v=2*Math.sqrt(1+o-c-g),e[3]=(d-f)/v,e[0]=.25*v,e[1]=(h+l)/v,e[2]=(p+u)/v):c>g?(v=2*Math.sqrt(1+c-o-g),e[3]=(p-u)/v,e[0]=(h+l)/v,e[1]=.25*v,e[2]=(d+f)/v):(v=2*Math.sqrt(1+g-o-c),e[3]=(h-l)/v,e[0]=(p+u)/v,e[1]=(d+f)/v,e[2]=.25*v),e}}();class F extends Array{constructor(t=1,e=0,r=0,i=0,n=0,s=1,a=0,o=0,h=0,u=0,l=1,c=0,d=0,p=0,f=0,g=1){return super(t,e,r,i,n,s,a,o,h,u,l,c,d,p,f,g),this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(t){this[12]=t}set y(t){this[13]=t}set z(t){this[14]=t}set w(t){this[15]=t}set(t,e,r,i,n,s,a,o,h,u,l,c,d,p,f,g){return t.length?this.copy(t):(function(t,e,r,i,n,s,a,o,h,u,l,c,d,p,f,g,m){t[0]=e,t[1]=r,t[2]=i,t[3]=n,t[4]=s,t[5]=a,t[6]=o,t[7]=h,t[8]=u,t[9]=l,t[10]=c,t[11]=d,t[12]=p,t[13]=f,t[14]=g,t[15]=m}(this,t,e,r,i,n,s,a,o,h,u,l,c,d,p,f,g),this)}translate(t,e=this){return function(t,e,r){let i,n,s,a,o,h,u,l,c,d,p,f,g=r[0],m=r[1],v=r[2];e===t?(t[12]=e[0]*g+e[4]*m+e[8]*v+e[12],t[13]=e[1]*g+e[5]*m+e[9]*v+e[13],t[14]=e[2]*g+e[6]*m+e[10]*v+e[14],t[15]=e[3]*g+e[7]*m+e[11]*v+e[15]):(i=e[0],n=e[1],s=e[2],a=e[3],o=e[4],h=e[5],u=e[6],l=e[7],c=e[8],d=e[9],p=e[10],f=e[11],t[0]=i,t[1]=n,t[2]=s,t[3]=a,t[4]=o,t[5]=h,t[6]=u,t[7]=l,t[8]=c,t[9]=d,t[10]=p,t[11]=f,t[12]=i*g+o*m+c*v+e[12],t[13]=n*g+h*m+d*v+e[13],t[14]=s*g+u*m+p*v+e[14],t[15]=a*g+l*m+f*v+e[15])}(this,e,t),this}rotate(t,e,r=this){return function(t,e,r,i){let n,s,a,o,h,u,l,c,d,p,f,g,m,v,x,y,b,w,E,_,M,A,T,S,O=i[0],F=i[1],R=i[2],L=Math.hypot(O,F,R);Math.abs(L)<1e-6||(L=1/L,O*=L,F*=L,R*=L,n=Math.sin(r),s=Math.cos(r),a=1-s,o=e[0],h=e[1],u=e[2],l=e[3],c=e[4],d=e[5],p=e[6],f=e[7],g=e[8],m=e[9],v=e[10],x=e[11],y=O*O*a+s,b=F*O*a+R*n,w=R*O*a-F*n,E=O*F*a-R*n,_=F*F*a+s,M=R*F*a+O*n,A=O*R*a+F*n,T=F*R*a-O*n,S=R*R*a+s,t[0]=o*y+c*b+g*w,t[1]=h*y+d*b+m*w,t[2]=u*y+p*b+v*w,t[3]=l*y+f*b+x*w,t[4]=o*E+c*_+g*M,t[5]=h*E+d*_+m*M,t[6]=u*E+p*_+v*M,t[7]=l*E+f*_+x*M,t[8]=o*A+c*T+g*S,t[9]=h*A+d*T+m*S,t[10]=u*A+p*T+v*S,t[11]=l*A+f*T+x*S,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(this,r,t,e),this}scale(t,e=this){return function(t,e,r){let i=r[0],n=r[1],s=r[2];t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]}(this,e,"number"==typeof t?[t,t,t]:t),this}multiply(t,e){return e?T(this,t,e):T(this,this,t),this}identity(){var t;return(t=this)[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}copy(t){var e,r;return r=t,(e=this)[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],this}fromPerspective({fov:t,aspect:e,near:r,far:i}={}){return function(t,e,r,i,n){let s=1/Math.tan(e/2),a=1/(i-n);t[0]=s/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+i)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*i*a,t[15]=0}(this,t,e,r,i),this}fromOrthogonal({left:t,right:e,bottom:r,top:i,near:n,far:s}){return function(t,e,r,i,n,s,a){let o=1/(e-r),h=1/(i-n),u=1/(s-a);t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+r)*o,t[13]=(n+i)*h,t[14]=(a+s)*u,t[15]=1}(this,t,e,r,i,n,s),this}fromQuaternion(t){return function(t,e){let r=e[0],i=e[1],n=e[2],s=e[3],a=r+r,o=i+i,h=n+n,u=r*a,l=i*a,c=i*o,d=n*a,p=n*o,f=n*h,g=s*a,m=s*o,v=s*h;t[0]=1-c-f,t[1]=l+v,t[2]=d-m,t[3]=0,t[4]=l-v,t[5]=1-u-f,t[6]=p+g,t[7]=0,t[8]=d+m,t[9]=p-g,t[10]=1-u-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(this,t),this}setPosition(t){return this.x=t[0],this.y=t[1],this.z=t[2],this}inverse(t=this){return function(t,e){let r=e[0],i=e[1],n=e[2],s=e[3],a=e[4],o=e[5],h=e[6],u=e[7],l=e[8],c=e[9],d=e[10],p=e[11],f=e[12],g=e[13],m=e[14],v=e[15],x=r*o-i*a,y=r*h-n*a,b=r*u-s*a,w=i*h-n*o,E=i*u-s*o,_=n*u-s*h,M=l*g-c*f,A=l*m-d*f,T=l*v-p*f,S=c*m-d*g,O=c*v-p*g,F=d*v-p*m,R=x*F-y*O+b*S+w*T-E*A+_*M;R&&(R=1/R,t[0]=(o*F-h*O+u*S)*R,t[1]=(n*O-i*F-s*S)*R,t[2]=(g*_-m*E+v*w)*R,t[3]=(d*E-c*_-p*w)*R,t[4]=(h*T-a*F-u*A)*R,t[5]=(r*F-n*T+s*A)*R,t[6]=(m*b-f*_-v*y)*R,t[7]=(l*_-d*b+p*y)*R,t[8]=(a*O-o*T+u*M)*R,t[9]=(i*T-r*O-s*M)*R,t[10]=(f*E-g*b+v*x)*R,t[11]=(c*b-l*E-p*x)*R,t[12]=(o*A-a*S-h*M)*R,t[13]=(r*S-i*A+n*M)*R,t[14]=(g*y-f*w-m*x)*R,t[15]=(l*w-c*y+d*x)*R)}(this,t),this}compose(t,e,r){return function(t,e,r,i){let n=e[0],s=e[1],a=e[2],o=e[3],h=n+n,u=s+s,l=a+a,c=n*h,d=n*u,p=n*l,f=s*u,g=s*l,m=a*l,v=o*h,x=o*u,y=o*l,b=i[0],w=i[1],E=i[2];t[0]=(1-(f+m))*b,t[1]=(d+y)*b,t[2]=(p-x)*b,t[3]=0,t[4]=(d-y)*w,t[5]=(1-(c+m))*w,t[6]=(g+v)*w,t[7]=0,t[8]=(p+x)*E,t[9]=(g-v)*E,t[10]=(1-(c+f))*E,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1}(this,t,e,r),this}getRotation(t){return O(t,this),this}getTranslation(t){var e,r;return r=this,(e=t)[0]=r[12],e[1]=r[13],e[2]=r[14],this}getScaling(t){return S(t,this),this}getMaxScaleOnAxis(){return function(t){let e=t[0],r=t[1],i=t[2],n=t[4],s=t[5],a=t[6],o=t[8],h=t[9],u=t[10];const l=e*e+r*r+i*i,c=n*n+s*s+a*a,d=o*o+h*h+u*u;return Math.sqrt(Math.max(l,c,d))}(this)}lookAt(t,e,r){return function(t,e,r,i){let n=e[0],s=e[1],a=e[2],o=i[0],h=i[1],u=i[2],l=n-r[0],c=s-r[1],d=a-r[2],p=l*l+c*c+d*d;0===p?d=1:(p=1/Math.sqrt(p),l*=p,c*=p,d*=p);let f=h*d-u*c,g=u*l-o*d,m=o*c-h*l;p=f*f+g*g+m*m,0===p&&(u?o+=1e-6:h?u+=1e-6:h+=1e-6,f=h*d-u*c,g=u*l-o*d,m=o*c-h*l,p=f*f+g*g+m*m),p=1/Math.sqrt(p),f*=p,g*=p,m*=p,t[0]=f,t[1]=g,t[2]=m,t[3]=0,t[4]=c*m-d*g,t[5]=d*f-l*m,t[6]=l*g-c*f,t[7]=0,t[8]=l,t[9]=c,t[10]=d,t[11]=0,t[12]=n,t[13]=s,t[14]=a,t[15]=1}(this,t,e,r),this}determinant(){return function(t){let e=t[0],r=t[1],i=t[2],n=t[3],s=t[4],a=t[5],o=t[6],h=t[7],u=t[8],l=t[9],c=t[10],d=t[11],p=t[12],f=t[13],g=t[14],m=t[15];return(e*a-r*s)*(c*m-d*g)-(e*o-i*s)*(l*m-d*f)+(e*h-n*s)*(l*g-c*f)+(r*o-i*a)*(u*m-d*p)-(r*h-n*a)*(u*g-c*p)+(i*h-n*o)*(u*f-l*p)}(this)}fromArray(t,e=0){return this[0]=t[e],this[1]=t[e+1],this[2]=t[e+2],this[3]=t[e+3],this[4]=t[e+4],this[5]=t[e+5],this[6]=t[e+6],this[7]=t[e+7],this[8]=t[e+8],this[9]=t[e+9],this[10]=t[e+10],this[11]=t[e+11],this[12]=t[e+12],this[13]=t[e+13],this[14]=t[e+14],this[15]=t[e+15],this}toArray(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t[e+3]=this[3],t[e+4]=this[4],t[e+5]=this[5],t[e+6]=this[6],t[e+7]=this[7],t[e+8]=this[8],t[e+9]=this[9],t[e+10]=this[10],t[e+11]=this[11],t[e+12]=this[12],t[e+13]=this[13],t[e+14]=this[14],t[e+15]=this[15],t}}const R=new F;class L extends Array{constructor(t=0,e=t,r=t,i="YXZ"){return super(t,e,r),this.order=i,this.onChange=()=>{},this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(t){this[0]=t,this.onChange()}set y(t){this[1]=t,this.onChange()}set z(t){this[2]=t,this.onChange()}set(t,e=t,r=t){return t.length?this.copy(t):(this[0]=t,this[1]=e,this[2]=r,this.onChange(),this)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.onChange(),this}reorder(t){return this.order=t,this.onChange(),this}fromRotationMatrix(t,e=this.order){return function(t,e,r="YXZ"){"XYZ"===r?(t[1]=Math.asin(Math.min(Math.max(e[8],-1),1)),Math.abs(e[8])<.99999?(t[0]=Math.atan2(-e[9],e[10]),t[2]=Math.atan2(-e[4],e[0])):(t[0]=Math.atan2(e[6],e[5]),t[2]=0)):"YXZ"===r?(t[0]=Math.asin(-Math.min(Math.max(e[9],-1),1)),Math.abs(e[9])<.99999?(t[1]=Math.atan2(e[8],e[10]),t[2]=Math.atan2(e[1],e[5])):(t[1]=Math.atan2(-e[2],e[0]),t[2]=0)):"ZXY"===r?(t[0]=Math.asin(Math.min(Math.max(e[6],-1),1)),Math.abs(e[6])<.99999?(t[1]=Math.atan2(-e[2],e[10]),t[2]=Math.atan2(-e[4],e[5])):(t[1]=0,t[2]=Math.atan2(e[1],e[0]))):"ZYX"===r?(t[1]=Math.asin(-Math.min(Math.max(e[2],-1),1)),Math.abs(e[2])<.99999?(t[0]=Math.atan2(e[6],e[10]),t[2]=Math.atan2(e[1],e[0])):(t[0]=0,t[2]=Math.atan2(-e[4],e[5]))):"YZX"===r?(t[2]=Math.asin(Math.min(Math.max(e[1],-1),1)),Math.abs(e[1])<.99999?(t[0]=Math.atan2(-e[9],e[5]),t[1]=Math.atan2(-e[2],e[0])):(t[0]=0,t[1]=Math.atan2(e[8],e[10]))):"XZY"===r&&(t[2]=Math.asin(-Math.min(Math.max(e[4],-1),1)),Math.abs(e[4])<.99999?(t[0]=Math.atan2(e[6],e[5]),t[1]=Math.atan2(e[8],e[0])):(t[0]=Math.atan2(-e[9],e[10]),t[1]=0))}(this,t,e),this.onChange(),this}fromQuaternion(t,e=this.order){return R.fromQuaternion(t),this.fromRotationMatrix(R,e)}toArray(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t}}class C{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new F,this.worldMatrix=new F,this.matrixAutoUpdate=!0,this.position=new m,this.quaternion=new A,this.scale=new m(1),this.rotation=new L,this.up=new m(0,1,0),this.rotation.onChange=()=>this.quaternion.fromEuler(this.rotation),this.quaternion.onChange=()=>this.rotation.fromQuaternion(this.quaternion)}setParent(t,e=!0){this.parent&&t!==this.parent&&this.parent.removeChild(this,!1),this.parent=t,e&&t&&t.addChild(this,!1)}addChild(t,e=!0){~this.children.indexOf(t)||this.children.push(t),e&&t.setParent(this,!1)}removeChild(t,e=!0){~this.children.indexOf(t)&&this.children.splice(this.children.indexOf(t),1),e&&t.setParent(null,!1)}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||t)&&(null===this.parent?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,t=!0);for(let e=0,r=this.children.length;e<r;e++)this.children[e].updateMatrixWorld(t)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(t){if(!t(this))for(let e=0,r=this.children.length;e<r;e++)this.children[e].traverse(t)}decompose(){this.matrix.getTranslation(this.position),this.matrix.getRotation(this.quaternion),this.matrix.getScaling(this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(t,e=!1){e?this.matrix.lookAt(this.position,t,this.up):this.matrix.lookAt(t,this.position,this.up),this.matrix.getRotation(this.quaternion),this.rotation.fromQuaternion(this.quaternion)}}const P=new F,D=new m,N=new m;class B extends C{constructor(t,{near:e=.1,far:r=100,fov:i=45,aspect:n=1,left:s,right:a,bottom:o,top:h,zoom:u=1}={}){super(),Object.assign(this,{near:e,far:r,fov:i,aspect:n,left:s,right:a,bottom:o,top:h,zoom:u}),this.projectionMatrix=new F,this.viewMatrix=new F,this.projectionViewMatrix=new F,this.worldPosition=new m,this.type=s||a?"orthographic":"perspective","orthographic"===this.type?this.orthographic():this.perspective()}perspective({near:t=this.near,far:e=this.far,fov:r=this.fov,aspect:i=this.aspect}={}){return Object.assign(this,{near:t,far:e,fov:r,aspect:i}),this.projectionMatrix.fromPerspective({fov:r*(Math.PI/180),aspect:i,near:t,far:e}),this.type="perspective",this}orthographic({near:t=this.near,far:e=this.far,left:r=this.left,right:i=this.right,bottom:n=this.bottom,top:s=this.top,zoom:a=this.zoom}={}){return Object.assign(this,{near:t,far:e,left:r,right:i,bottom:n,top:s,zoom:a}),r/=a,i/=a,n/=a,s/=a,this.projectionMatrix.fromOrthogonal({left:r,right:i,bottom:n,top:s,near:t,far:e}),this.type="orthographic",this}updateMatrixWorld(){return super.updateMatrixWorld(),this.viewMatrix.inverse(this.worldMatrix),this.worldMatrix.getTranslation(this.worldPosition),this.projectionViewMatrix.multiply(this.projectionMatrix,this.viewMatrix),this}lookAt(t){return super.lookAt(t,!0),this}project(t){return t.applyMatrix4(this.viewMatrix),t.applyMatrix4(this.projectionMatrix),this}unproject(t){return t.applyMatrix4(P.inverse(this.projectionMatrix)),t.applyMatrix4(this.worldMatrix),this}updateFrustum(){this.frustum||(this.frustum=[new m,new m,new m,new m,new m,new m]);const t=this.projectionViewMatrix;this.frustum[0].set(t[3]-t[0],t[7]-t[4],t[11]-t[8]).constant=t[15]-t[12],this.frustum[1].set(t[3]+t[0],t[7]+t[4],t[11]+t[8]).constant=t[15]+t[12],this.frustum[2].set(t[3]+t[1],t[7]+t[5],t[11]+t[9]).constant=t[15]+t[13],this.frustum[3].set(t[3]-t[1],t[7]-t[5],t[11]-t[9]).constant=t[15]-t[13],this.frustum[4].set(t[3]-t[2],t[7]-t[6],t[11]-t[10]).constant=t[15]-t[14],this.frustum[5].set(t[3]+t[2],t[7]+t[6],t[11]+t[10]).constant=t[15]+t[14];for(let t=0;t<6;t++){const e=1/this.frustum[t].distance();this.frustum[t].multiply(e),this.frustum[t].constant*=e}}frustumIntersectsMesh(t,e=t.worldMatrix){if(!t.geometry.attributes.position)return!0;if(t.geometry.bounds&&t.geometry.bounds.radius!==1/0||t.geometry.computeBoundingSphere(),!t.geometry.bounds)return!0;const r=D;r.copy(t.geometry.bounds.center),r.applyMatrix4(e);const i=t.geometry.bounds.radius*e.getMaxScaleOnAxis();return this.frustumIntersectsSphere(r,i)}frustumIntersectsSphere(t,e){const r=N;for(let i=0;i<6;i++){const n=this.frustum[i];if(r.copy(n).dot(t)+n.constant<-e)return!1}return!0}}const z=new m;let j=1,I=1,U=!1;class k{constructor(t,e={}){t.canvas||console.error("gl not passed as first argument to Geometry"),this.gl=t,this.attributes=e,this.id=j++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let t in e)this.addAttribute(t,e[t])}addAttribute(t,e){if(this.attributes[t]=e,e.id=I++,e.size=e.size||1,e.type=e.type||(e.data.constructor===Float32Array?this.gl.FLOAT:e.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),e.target="index"===t?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,e.normalized=e.normalized||!1,e.stride=e.stride||0,e.offset=e.offset||0,e.count=e.count||(e.stride?e.data.byteLength/e.stride:e.data.length/e.size),e.divisor=e.instanced||0,e.needsUpdate=!1,e.usage=e.usage||this.gl.STATIC_DRAW,e.buffer||this.updateAttribute(e),e.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==e.count*e.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,e.count*e.divisor);this.instancedCount=e.count*e.divisor}else"index"===t?this.drawRange.count=e.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,e.count))}updateAttribute(t){const e=!t.buffer;e&&(t.buffer=this.gl.createBuffer()),this.glState.boundBuffer!==t.buffer&&(this.gl.bindBuffer(t.target,t.buffer),this.glState.boundBuffer=t.buffer),e?this.gl.bufferData(t.target,t.data,t.usage):this.gl.bufferSubData(t.target,0,t.data),t.needsUpdate=!1}setIndex(t){this.addAttribute("index",t)}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}setInstancedCount(t){this.instancedCount=t}createVAO(t){this.VAOs[t.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[t.attributeOrder]),this.bindAttributes(t)}bindAttributes(t){t.attributeLocations.forEach(((t,{name:e,type:r})=>{if(!this.attributes[e])return void console.warn(`active attribute ${e} not being supplied`);const i=this.attributes[e];this.gl.bindBuffer(i.target,i.buffer),this.glState.boundBuffer=i.buffer;let n=1;35674===r&&(n=2),35675===r&&(n=3),35676===r&&(n=4);const s=i.size/n,a=1===n?0:n*n*n,o=1===n?0:n*n;for(let e=0;e<n;e++)this.gl.vertexAttribPointer(t+e,s,i.type,i.normalized,i.stride+a,i.offset+e*o),this.gl.enableVertexAttribArray(t+e),this.gl.renderer.vertexAttribDivisor(t+e,i.divisor)})),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:t,mode:e=this.gl.TRIANGLES}){this.gl.renderer.currentGeometry!==`${this.id}_${t.attributeOrder}`&&(this.VAOs[t.attributeOrder]||this.createVAO(t),this.gl.renderer.bindVertexArray(this.VAOs[t.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${t.attributeOrder}`),t.attributeLocations.forEach(((t,{name:e})=>{const r=this.attributes[e];r.needsUpdate&&this.updateAttribute(r)})),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(e,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+2*this.drawRange.start,this.instancedCount):this.gl.renderer.drawArraysInstanced(e,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(e,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+2*this.drawRange.start):this.gl.drawArrays(e,this.drawRange.start,this.drawRange.count)}getPosition(){const t=this.attributes.position;return t.data?t:U?void 0:(console.warn("No position buffer data found to compute bounds"),U=!0)}computeBoundingBox(t){t||(t=this.getPosition());const e=t.data,r=t.stride?t.stride/e.BYTES_PER_ELEMENT:t.size;this.bounds||(this.bounds={min:new m,max:new m,center:new m,scale:new m,radius:1/0});const i=this.bounds.min,n=this.bounds.max,s=this.bounds.center,a=this.bounds.scale;i.set(1/0),n.set(-1/0);for(let t=0,s=e.length;t<s;t+=r){const r=e[t],s=e[t+1],a=e[t+2];i.x=Math.min(r,i.x),i.y=Math.min(s,i.y),i.z=Math.min(a,i.z),n.x=Math.max(r,n.x),n.y=Math.max(s,n.y),n.z=Math.max(a,n.z)}a.sub(n,i),s.add(i,n).divide(2)}computeBoundingSphere(t){t||(t=this.getPosition());const e=t.data,r=t.stride?t.stride/e.BYTES_PER_ELEMENT:t.size;this.bounds||this.computeBoundingBox(t);let i=0;for(let t=0,n=e.length;t<n;t+=r)z.fromArray(e,t),i=Math.max(i,this.bounds.center.squaredDistance(z));this.bounds.radius=Math.sqrt(i)}remove(){for(let t in this.VAOs)this.gl.renderer.deleteVertexArray(this.VAOs[t]),delete this.VAOs[t];for(let t in this.attributes)this.gl.deleteBuffer(this.attributes[t].buffer),delete this.attributes[t]}}class q extends k{constructor(t,{width:e=1,height:r=1,widthSegments:i=1,heightSegments:n=1,attributes:s={}}={}){const a=i,o=n,h=(a+1)*(o+1),u=a*o*6,l=new Float32Array(3*h),c=new Float32Array(3*h),d=new Float32Array(2*h),p=u>65536?new Uint32Array(u):new Uint16Array(u);q.buildPlane(l,c,d,p,e,r,0,a,o),Object.assign(s,{position:{size:3,data:l},normal:{size:3,data:c},uv:{size:2,data:d},index:{data:p}}),super(t,s)}static buildPlane(t,e,r,i,n,s,a,o,h,u=0,l=1,c=2,d=1,p=-1,f=0,g=0){const m=f,v=n/o,x=s/h;for(let y=0;y<=h;y++){let b=y*x-s/2;for(let s=0;s<=o;s++,f++){let x=s*v-n/2;if(t[3*f+u]=x*d,t[3*f+l]=b*p,t[3*f+c]=a/2,e[3*f+u]=0,e[3*f+l]=0,e[3*f+c]=a>=0?1:-1,r[2*f]=s/o,r[2*f+1]=1-y/h,y===h||s===o)continue;let w=m+s+y*(o+1),E=m+s+(y+1)*(o+1),_=m+s+(y+1)*(o+1)+1,M=m+s+y*(o+1)+1;i[6*g]=w,i[6*g+1]=E,i[6*g+2]=M,i[6*g+3]=E,i[6*g+4]=_,i[6*g+5]=M,g++}}}}var Y=r(7976),X=r.n(Y);let W=1;const G={};class H{constructor(t,{vertex:e,fragment:r,uniforms:i={},transparent:n=!1,cullFace:s=t.BACK,frontFace:a=t.CCW,depthTest:o=!0,depthWrite:h=!0,depthFunc:u=t.LESS}={}){t.canvas||console.error("gl not passed as first argument to Program"),this.gl=t,this.uniforms=i,this.id=W++,e||console.warn("vertex shader not supplied"),r||console.warn("fragment shader not supplied"),this.transparent=n,this.cullFace=s,this.frontFace=a,this.depthTest=o,this.depthWrite=h,this.depthFunc=u,this.blendFunc={},this.blendEquation={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA));const l=t.createShader(t.VERTEX_SHADER);t.shaderSource(l,e),t.compileShader(l),""!==t.getShaderInfoLog(l)&&console.warn(`${t.getShaderInfoLog(l)}\nVertex Shader\n${$(e)}`);const c=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(c,r),t.compileShader(c),""!==t.getShaderInfoLog(c)&&console.warn(`${t.getShaderInfoLog(c)}\nFragment Shader\n${$(r)}`),this.program=t.createProgram(),t.attachShader(this.program,l),t.attachShader(this.program,c),t.linkProgram(this.program),!t.getProgramParameter(this.program,t.LINK_STATUS))return console.warn(t.getProgramInfoLog(this.program));t.deleteShader(l),t.deleteShader(c),this.uniformLocations=new Map;let d=t.getProgramParameter(this.program,t.ACTIVE_UNIFORMS);for(let e=0;e<d;e++){let r=t.getActiveUniform(this.program,e);this.uniformLocations.set(r,t.getUniformLocation(this.program,r.name));const i=r.name.match(/(\w+)/g);r.uniformName=i[0],3===i.length?(r.isStructArray=!0,r.structIndex=Number(i[1]),r.structProperty=i[2]):2===i.length&&isNaN(Number(i[1]))&&(r.isStruct=!0,r.structProperty=i[1])}this.attributeLocations=new Map;const p=[],f=t.getProgramParameter(this.program,t.ACTIVE_ATTRIBUTES);for(let e=0;e<f;e++){const r=t.getActiveAttrib(this.program,e),i=t.getAttribLocation(this.program,r.name);-1!==i&&(p[i]=r.name,this.attributeLocations.set(r,i))}this.attributeOrder=p.join("")}setBlendFunc(t,e,r,i){this.blendFunc.src=t,this.blendFunc.dst=e,this.blendFunc.srcAlpha=r,this.blendFunc.dstAlpha=i,t&&(this.transparent=!0)}setBlendEquation(t,e){this.blendEquation.modeRGB=t,this.blendEquation.modeAlpha=e}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha)}use({flipFaces:t=!1}={}){let e=-1;this.gl.renderer.state.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.state.currentProgram=this.id),this.uniformLocations.forEach(((t,r)=>{let i=r.uniformName,n=this.uniforms[i];if(r.isStruct&&(n=n[r.structProperty],i+=`.${r.structProperty}`),r.isStructArray&&(n=n[r.structIndex][r.structProperty],i+=`[${r.structIndex}].${r.structProperty}`),!n)return Z(`Active uniform ${i} has not been supplied`);if(n&&void 0===n.value)return Z(`${i} uniform is missing a value parameter`);if(n.value.texture)return e+=1,n.value.update(e),V(this.gl,r.type,t,e);if(n.value.length&&n.value[0].texture){const i=[];return n.value.forEach((t=>{e+=1,t.update(e),i.push(e)})),V(this.gl,r.type,t,i)}V(this.gl,r.type,t,n.value)})),this.applyState(),t&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function V(t,e,r,i){i=i.length?function(t){const e=t.length,r=t[0].length;if(void 0===r)return t;const i=e*r;let n=G[i];n||(G[i]=n=new Float32Array(i));for(let i=0;i<e;i++)n.set(t[i],i*r);return n}(i):i;const n=t.renderer.state.uniformLocations.get(r);if(i.length)if(void 0===n||n.length!==i.length)t.renderer.state.uniformLocations.set(r,i.slice(0));else{if(function(t,e){if(t.length!==e.length)return!1;for(let r=0,i=t.length;r<i;r++)if(t[r]!==e[r])return!1;return!0}(n,i))return;n.set?n.set(i):function(t,e){for(let r=0,i=t.length;r<i;r++)t[r]=e[r]}(n,i),t.renderer.state.uniformLocations.set(r,n)}else{if(n===i)return;t.renderer.state.uniformLocations.set(r,i)}switch(e){case 5126:return i.length?t.uniform1fv(r,i):t.uniform1f(r,i);case 35664:return t.uniform2fv(r,i);case 35665:return t.uniform3fv(r,i);case 35666:return t.uniform4fv(r,i);case 35670:case 5124:case 35678:case 35680:return i.length?t.uniform1iv(r,i):t.uniform1i(r,i);case 35671:case 35667:return t.uniform2iv(r,i);case 35672:case 35668:return t.uniform3iv(r,i);case 35673:case 35669:return t.uniform4iv(r,i);case 35674:return t.uniformMatrix2fv(r,!1,i);case 35675:return t.uniformMatrix3fv(r,!1,i);case 35676:return t.uniformMatrix4fv(r,!1,i)}}function $(t){let e=t.split("\n");for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")}let Q=0;function Z(t){Q>100||(console.warn(t),Q++,Q>100&&console.warn("More than 100 program warnings - stopping logs."))}function K(t,e,r){let i=e[0],n=e[1],s=e[2],a=e[3],o=e[4],h=e[5],u=e[6],l=e[7],c=e[8],d=r[0],p=r[1],f=r[2],g=r[3],m=r[4],v=r[5],x=r[6],y=r[7],b=r[8];return t[0]=d*i+p*a+f*u,t[1]=d*n+p*o+f*l,t[2]=d*s+p*h+f*c,t[3]=g*i+m*a+v*u,t[4]=g*n+m*o+v*l,t[5]=g*s+m*h+v*c,t[6]=x*i+y*a+b*u,t[7]=x*n+y*o+b*l,t[8]=x*s+y*h+b*c,t}class J extends Array{constructor(t=1,e=0,r=0,i=0,n=1,s=0,a=0,o=0,h=1){return super(t,e,r,i,n,s,a,o,h),this}set(t,e,r,i,n,s,a,o,h){return t.length?this.copy(t):(function(t,e,r,i,n,s,a,o,h,u){t[0]=e,t[1]=r,t[2]=i,t[3]=n,t[4]=s,t[5]=a,t[6]=o,t[7]=h,t[8]=u}(this,t,e,r,i,n,s,a,o,h),this)}translate(t,e=this){return function(t,e,r){let i=e[0],n=e[1],s=e[2],a=e[3],o=e[4],h=e[5],u=e[6],l=e[7],c=e[8],d=r[0],p=r[1];t[0]=i,t[1]=n,t[2]=s,t[3]=a,t[4]=o,t[5]=h,t[6]=d*i+p*a+u,t[7]=d*n+p*o+l,t[8]=d*s+p*h+c}(this,e,t),this}rotate(t,e=this){return function(t,e,r){let i=e[0],n=e[1],s=e[2],a=e[3],o=e[4],h=e[5],u=e[6],l=e[7],c=e[8],d=Math.sin(r),p=Math.cos(r);t[0]=p*i+d*a,t[1]=p*n+d*o,t[2]=p*s+d*h,t[3]=p*a-d*i,t[4]=p*o-d*n,t[5]=p*h-d*s,t[6]=u,t[7]=l,t[8]=c}(this,e,t),this}scale(t,e=this){return function(t,e,r){let i=r[0],n=r[1];t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8]}(this,e,t),this}multiply(t,e){return e?K(this,t,e):K(this,this,t),this}identity(){var t;return(t=this)[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this}copy(t){var e,r;return r=t,(e=this)[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],this}fromMatrix4(t){var e,r;return r=t,(e=this)[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[4],e[4]=r[5],e[5]=r[6],e[6]=r[8],e[7]=r[9],e[8]=r[10],this}fromQuaternion(t){return function(t,e){let r=e[0],i=e[1],n=e[2],s=e[3],a=r+r,o=i+i,h=n+n,u=r*a,l=i*a,c=i*o,d=n*a,p=n*o,f=n*h,g=s*a,m=s*o,v=s*h;t[0]=1-c-f,t[3]=l-v,t[6]=d+m,t[1]=l+v,t[4]=1-u-f,t[7]=p-g,t[2]=d-m,t[5]=p+g,t[8]=1-u-c}(this,t),this}fromBasis(t,e,r){return this.set(t[0],t[1],t[2],e[0],e[1],e[2],r[0],r[1],r[2]),this}inverse(t=this){return function(t,e){let r=e[0],i=e[1],n=e[2],s=e[3],a=e[4],o=e[5],h=e[6],u=e[7],l=e[8],c=l*a-o*u,d=-l*s+o*h,p=u*s-a*h,f=r*c+i*d+n*p;f&&(f=1/f,t[0]=c*f,t[1]=(-l*i+n*u)*f,t[2]=(o*i-n*a)*f,t[3]=d*f,t[4]=(l*r-n*h)*f,t[5]=(-o*r+n*s)*f,t[6]=p*f,t[7]=(-u*r+i*h)*f,t[8]=(a*r-i*s)*f)}(this,t),this}getNormalMatrix(t){return function(t,e){let r=e[0],i=e[1],n=e[2],s=e[3],a=e[4],o=e[5],h=e[6],u=e[7],l=e[8],c=e[9],d=e[10],p=e[11],f=e[12],g=e[13],m=e[14],v=e[15],x=r*o-i*a,y=r*h-n*a,b=r*u-s*a,w=i*h-n*o,E=i*u-s*o,_=n*u-s*h,M=l*g-c*f,A=l*m-d*f,T=l*v-p*f,S=c*m-d*g,O=c*v-p*g,F=d*v-p*m,R=x*F-y*O+b*S+w*T-E*A+_*M;R&&(R=1/R,t[0]=(o*F-h*O+u*S)*R,t[1]=(h*T-a*F-u*A)*R,t[2]=(a*O-o*T+u*M)*R,t[3]=(n*O-i*F-s*S)*R,t[4]=(r*F-n*T+s*A)*R,t[5]=(i*T-r*O-s*M)*R,t[6]=(g*_-m*E+v*w)*R,t[7]=(m*b-f*_-v*y)*R,t[8]=(f*E-g*b+v*x)*R)}(this,t),this}}let tt=0;class et extends C{constructor(t,{geometry:e,program:r,mode:i=t.TRIANGLES,frustumCulled:n=!0,renderOrder:s=0}={}){super(),t.canvas||console.error("gl not passed as first argument to Mesh"),this.gl=t,this.id=tt++,this.geometry=e,this.program=r,this.mode=i,this.frustumCulled=n,this.renderOrder=s,this.modelViewMatrix=new F,this.normalMatrix=new J,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(t){return this.beforeRenderCallbacks.push(t),this}onAfterRender(t){return this.afterRenderCallbacks.push(t),this}draw({camera:t}={}){this.beforeRenderCallbacks.forEach((e=>e&&e({mesh:this,camera:t}))),t&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=t.projectionMatrix,this.program.uniforms.cameraPosition.value=t.worldPosition,this.program.uniforms.viewMatrix.value=t.viewMatrix,this.modelViewMatrix.multiply(t.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix);let e=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:e}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach((e=>e&&e({mesh:this,camera:t})))}}var rt={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},it={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},nt=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],st={CSS:{},springs:{}};function at(t,e,r){return Math.min(Math.max(t,e),r)}function ot(t,e){return t.indexOf(e)>-1}function ht(t,e){return t.apply(null,e)}var ut={arr:function(t){return Array.isArray(t)},obj:function(t){return ot(Object.prototype.toString.call(t),"Object")},pth:function(t){return ut.obj(t)&&t.hasOwnProperty("totalLength")},svg:function(t){return t instanceof SVGElement},inp:function(t){return t instanceof HTMLInputElement},dom:function(t){return t.nodeType||ut.svg(t)},str:function(t){return"string"==typeof t},fnc:function(t){return"function"==typeof t},und:function(t){return void 0===t},nil:function(t){return ut.und(t)||null===t},hex:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)},rgb:function(t){return/^rgb/.test(t)},hsl:function(t){return/^hsl/.test(t)},col:function(t){return ut.hex(t)||ut.rgb(t)||ut.hsl(t)},key:function(t){return!rt.hasOwnProperty(t)&&!it.hasOwnProperty(t)&&"targets"!==t&&"keyframes"!==t}};function lt(t){var e=/\(([^)]+)\)/.exec(t);return e?e[1].split(",").map((function(t){return parseFloat(t)})):[]}function ct(t,e){var r=lt(t),i=at(ut.und(r[0])?1:r[0],.1,100),n=at(ut.und(r[1])?100:r[1],.1,100),s=at(ut.und(r[2])?10:r[2],.1,100),a=at(ut.und(r[3])?0:r[3],.1,100),o=Math.sqrt(n/i),h=s/(2*Math.sqrt(n*i)),u=h<1?o*Math.sqrt(1-h*h):0,l=1,c=h<1?(h*o-a)/u:-a+o;function d(t){var r=e?e*t/1e3:t;return r=h<1?Math.exp(-r*h*o)*(l*Math.cos(u*r)+c*Math.sin(u*r)):(l+c*r)*Math.exp(-r*o),0===t||1===t?t:1-r}return e?d:function(){var e=st.springs[t];if(e)return e;for(var r=1/6,i=0,n=0;;)if(1===d(i+=r)){if(++n>=16)break}else n=0;var s=i*r*1e3;return st.springs[t]=s,s}}function dt(t){return void 0===t&&(t=10),function(e){return Math.ceil(at(e,1e-6,1)*t)*(1/t)}}var pt,ft,gt=function(){var t=.1;function e(t,e){return 1-3*e+3*t}function r(t,e){return 3*e-6*t}function i(t){return 3*t}function n(t,n,s){return((e(n,s)*t+r(n,s))*t+i(n))*t}function s(t,n,s){return 3*e(n,s)*t*t+2*r(n,s)*t+i(n)}return function(e,r,i,a){if(0<=e&&e<=1&&0<=i&&i<=1){var o=new Float32Array(11);if(e!==r||i!==a)for(var h=0;h<11;++h)o[h]=n(h*t,e,i);return function(t){return e===r&&i===a||0===t||1===t?t:n(u(t),r,a)}}function u(r){for(var a=0,h=1;10!==h&&o[h]<=r;++h)a+=t;--h;var u=a+(r-o[h])/(o[h+1]-o[h])*t,l=s(u,e,i);return l>=.001?function(t,e,r,i){for(var a=0;a<4;++a){var o=s(e,r,i);if(0===o)return e;e-=(n(e,r,i)-t)/o}return e}(r,u,e,i):0===l?u:function(t,e,r,i,s){var a,o,h=0;do{(a=n(o=e+(r-e)/2,i,s)-t)>0?r=o:e=o}while(Math.abs(a)>1e-7&&++h<10);return o}(r,a,a+t,e,i)}}}(),mt=(pt={linear:function(){return function(t){return t}}},ft={Sine:function(){return function(t){return 1-Math.cos(t*Math.PI/2)}},Circ:function(){return function(t){return 1-Math.sqrt(1-t*t)}},Back:function(){return function(t){return t*t*(3*t-2)}},Bounce:function(){return function(t){for(var e,r=4;t<((e=Math.pow(2,--r))-1)/11;);return 1/Math.pow(4,3-r)-7.5625*Math.pow((3*e-2)/22-t,2)}},Elastic:function(t,e){void 0===t&&(t=1),void 0===e&&(e=.5);var r=at(t,1,10),i=at(e,.1,2);return function(t){return 0===t||1===t?t:-r*Math.pow(2,10*(t-1))*Math.sin((t-1-i/(2*Math.PI)*Math.asin(1/r))*(2*Math.PI)/i)}}},["Quad","Cubic","Quart","Quint","Expo"].forEach((function(t,e){ft[t]=function(){return function(t){return Math.pow(t,e+2)}}})),Object.keys(ft).forEach((function(t){var e=ft[t];pt["easeIn"+t]=e,pt["easeOut"+t]=function(t,r){return function(i){return 1-e(t,r)(1-i)}},pt["easeInOut"+t]=function(t,r){return function(i){return i<.5?e(t,r)(2*i)/2:1-e(t,r)(-2*i+2)/2}},pt["easeOutIn"+t]=function(t,r){return function(i){return i<.5?(1-e(t,r)(1-2*i))/2:(e(t,r)(2*i-1)+1)/2}}})),pt);function vt(t,e){if(ut.fnc(t))return t;var r=t.split("(")[0],i=mt[r],n=lt(t);switch(r){case"spring":return ct(t,e);case"cubicBezier":return ht(gt,n);case"steps":return ht(dt,n);default:return ht(i,n)}}function xt(t){try{return document.querySelectorAll(t)}catch(t){return}}function yt(t,e){for(var r=t.length,i=arguments.length>=2?arguments[1]:void 0,n=[],s=0;s<r;s++)if(s in t){var a=t[s];e.call(i,a,s,t)&&n.push(a)}return n}function bt(t){return t.reduce((function(t,e){return t.concat(ut.arr(e)?bt(e):e)}),[])}function wt(t){return ut.arr(t)?t:(ut.str(t)&&(t=xt(t)||t),t instanceof NodeList||t instanceof HTMLCollection?[].slice.call(t):[t])}function Et(t,e){return t.some((function(t){return t===e}))}function _t(t){var e={};for(var r in t)e[r]=t[r];return e}function Mt(t,e){var r=_t(t);for(var i in t)r[i]=e.hasOwnProperty(i)?e[i]:t[i];return r}function At(t,e){var r=_t(t);for(var i in e)r[i]=ut.und(t[i])?e[i]:t[i];return r}function Tt(t){return ut.rgb(t)?(r=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e=t))?"rgba("+r[1]+",1)":e:ut.hex(t)?function(t){var e=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,r,i){return e+e+r+r+i+i})),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return"rgba("+parseInt(r[1],16)+","+parseInt(r[2],16)+","+parseInt(r[3],16)+",1)"}(t):ut.hsl(t)?function(t){var e,r,i,n=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(t),s=parseInt(n[1],10)/360,a=parseInt(n[2],10)/100,o=parseInt(n[3],10)/100,h=n[4]||1;function u(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}if(0==a)e=r=i=o;else{var l=o<.5?o*(1+a):o+a-o*a,c=2*o-l;e=u(c,l,s+1/3),r=u(c,l,s),i=u(c,l,s-1/3)}return"rgba("+255*e+","+255*r+","+255*i+","+h+")"}(t):void 0;var e,r}function St(t){var e=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(t);if(e)return e[1]}function Ot(t,e){return ut.fnc(t)?t(e.target,e.id,e.total):t}function Ft(t,e){return t.getAttribute(e)}function Rt(t,e,r){if(Et([r,"deg","rad","turn"],St(e)))return e;var i=st.CSS[e+r];if(!ut.und(i))return i;var n=document.createElement(t.tagName),s=t.parentNode&&t.parentNode!==document?t.parentNode:document.body;s.appendChild(n),n.style.position="absolute",n.style.width=100+r;var a=100/n.offsetWidth;s.removeChild(n);var o=a*parseFloat(e);return st.CSS[e+r]=o,o}function Lt(t,e,r){if(e in t.style){var i=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),n=t.style[e]||getComputedStyle(t).getPropertyValue(i)||"0";return r?Rt(t,n,r):n}}function Ct(t,e){return ut.dom(t)&&!ut.inp(t)&&(!ut.nil(Ft(t,e))||ut.svg(t)&&t[e])?"attribute":ut.dom(t)&&Et(nt,e)?"transform":ut.dom(t)&&"transform"!==e&&Lt(t,e)?"css":null!=t[e]?"object":void 0}function Pt(t){if(ut.dom(t)){for(var e,r=t.style.transform||"",i=/(\w+)\(([^)]*)\)/g,n=new Map;e=i.exec(r);)n.set(e[1],e[2]);return n}}function Dt(t,e,r,i){var n=ot(e,"scale")?1:0+function(t){return ot(t,"translate")||"perspective"===t?"px":ot(t,"rotate")||ot(t,"skew")?"deg":void 0}(e),s=Pt(t).get(e)||n;return r&&(r.transforms.list.set(e,s),r.transforms.last=e),i?Rt(t,s,i):s}function Nt(t,e,r,i){switch(Ct(t,e)){case"transform":return Dt(t,e,i,r);case"css":return Lt(t,e,r);case"attribute":return Ft(t,e);default:return t[e]||0}}function Bt(t,e){var r=/^(\*=|\+=|-=)/.exec(t);if(!r)return t;var i=St(t)||0,n=parseFloat(e),s=parseFloat(t.replace(r[0],""));switch(r[0][0]){case"+":return n+s+i;case"-":return n-s+i;case"*":return n*s+i}}function zt(t,e){if(ut.col(t))return Tt(t);if(/\s/g.test(t))return t;var r=St(t),i=r?t.substr(0,t.length-r.length):t;return e?i+e:i}function jt(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function It(t){for(var e,r=t.points,i=0,n=0;n<r.numberOfItems;n++){var s=r.getItem(n);n>0&&(i+=jt(e,s)),e=s}return i}function Ut(t){if(t.getTotalLength)return t.getTotalLength();switch(t.tagName.toLowerCase()){case"circle":return function(t){return 2*Math.PI*Ft(t,"r")}(t);case"rect":return function(t){return 2*Ft(t,"width")+2*Ft(t,"height")}(t);case"line":return function(t){return jt({x:Ft(t,"x1"),y:Ft(t,"y1")},{x:Ft(t,"x2"),y:Ft(t,"y2")})}(t);case"polyline":return It(t);case"polygon":return function(t){var e=t.points;return It(t)+jt(e.getItem(e.numberOfItems-1),e.getItem(0))}(t)}}function kt(t,e){var r=e||{},i=r.el||function(t){for(var e=t.parentNode;ut.svg(e)&&ut.svg(e.parentNode);)e=e.parentNode;return e}(t),n=i.getBoundingClientRect(),s=Ft(i,"viewBox"),a=n.width,o=n.height,h=r.viewBox||(s?s.split(" "):[0,0,a,o]);return{el:i,viewBox:h,x:h[0]/1,y:h[1]/1,w:a,h:o,vW:h[2],vH:h[3]}}function qt(t,e,r){function i(r){void 0===r&&(r=0);var i=e+r>=1?e+r:0;return t.el.getPointAtLength(i)}var n=kt(t.el,t.svg),s=i(),a=i(-1),o=i(1),h=r?1:n.w/n.vW,u=r?1:n.h/n.vH;switch(t.property){case"x":return(s.x-n.x)*h;case"y":return(s.y-n.y)*u;case"angle":return 180*Math.atan2(o.y-a.y,o.x-a.x)/Math.PI}}function Yt(t,e){var r=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,i=zt(ut.pth(t)?t.totalLength:t,e)+"";return{original:i,numbers:i.match(r)?i.match(r).map(Number):[0],strings:ut.str(t)||e?i.split(r):[]}}function Xt(t){return yt(t?bt(ut.arr(t)?t.map(wt):wt(t)):[],(function(t,e,r){return r.indexOf(t)===e}))}function Wt(t){var e=Xt(t);return e.map((function(t,r){return{target:t,id:r,total:e.length,transforms:{list:Pt(t)}}}))}function Gt(t,e){var r=_t(e);if(/^spring/.test(r.easing)&&(r.duration=ct(r.easing)),ut.arr(t)){var i=t.length;2===i&&!ut.obj(t[0])?t={value:t}:ut.fnc(e.duration)||(r.duration=e.duration/i)}var n=ut.arr(t)?t:[t];return n.map((function(t,r){var i=ut.obj(t)&&!ut.pth(t)?t:{value:t};return ut.und(i.delay)&&(i.delay=r?0:e.delay),ut.und(i.endDelay)&&(i.endDelay=r===n.length-1?e.endDelay:0),i})).map((function(t){return At(t,r)}))}function Ht(t,e){var r=[],i=e.keyframes;for(var n in i&&(e=At(function(t){for(var e=yt(bt(t.map((function(t){return Object.keys(t)}))),(function(t){return ut.key(t)})).reduce((function(t,e){return t.indexOf(e)<0&&t.push(e),t}),[]),r={},i=function(i){var n=e[i];r[n]=t.map((function(t){var e={};for(var r in t)ut.key(r)?r==n&&(e.value=t[r]):e[r]=t[r];return e}))},n=0;n<e.length;n++)i(n);return r}(i),e)),e)ut.key(n)&&r.push({name:n,tweens:Gt(e[n],t)});return r}function Vt(t,e){var r;return t.tweens.map((function(i){var n=function(t,e){var r={};for(var i in t){var n=Ot(t[i],e);ut.arr(n)&&1===(n=n.map((function(t){return Ot(t,e)}))).length&&(n=n[0]),r[i]=n}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}(i,e),s=n.value,a=ut.arr(s)?s[1]:s,o=St(a),h=Nt(e.target,t.name,o,e),u=r?r.to.original:h,l=ut.arr(s)?s[0]:u,c=St(l)||St(h),d=o||c;return ut.und(a)&&(a=u),n.from=Yt(l,d),n.to=Yt(Bt(a,l),d),n.start=r?r.end:0,n.end=n.start+n.delay+n.duration+n.endDelay,n.easing=vt(n.easing,n.duration),n.isPath=ut.pth(s),n.isPathTargetInsideSVG=n.isPath&&ut.svg(e.target),n.isColor=ut.col(n.from.original),n.isColor&&(n.round=1),r=n,n}))}var $t={css:function(t,e,r){return t.style[e]=r},attribute:function(t,e,r){return t.setAttribute(e,r)},object:function(t,e,r){return t[e]=r},transform:function(t,e,r,i,n){if(i.list.set(e,r),e===i.last||n){var s="";i.list.forEach((function(t,e){s+=e+"("+t+") "})),t.style.transform=s}}};function Qt(t,e){Wt(t).forEach((function(t){for(var r in e){var i=Ot(e[r],t),n=t.target,s=St(i),a=Nt(n,r,s,t),o=Bt(zt(i,s||St(a)),a),h=Ct(n,r);$t[h](n,r,o,t.transforms,!0)}}))}function Zt(t,e){return yt(bt(t.map((function(t){return e.map((function(e){return function(t,e){var r=Ct(t.target,e.name);if(r){var i=Vt(e,t),n=i[i.length-1];return{type:r,property:e.name,animatable:t,tweens:i,duration:n.end,delay:i[0].delay,endDelay:n.endDelay}}}(t,e)}))}))),(function(t){return!ut.und(t)}))}function Kt(t,e){var r=t.length,i=function(t){return t.timelineOffset?t.timelineOffset:0},n={};return n.duration=r?Math.max.apply(Math,t.map((function(t){return i(t)+t.duration}))):e.duration,n.delay=r?Math.min.apply(Math,t.map((function(t){return i(t)+t.delay}))):e.delay,n.endDelay=r?n.duration-Math.max.apply(Math,t.map((function(t){return i(t)+t.duration-t.endDelay}))):e.endDelay,n}var Jt=0;var te=[],ee=function(){var t;function e(r){for(var i=te.length,n=0;n<i;){var s=te[n];s.paused?(te.splice(n,1),i--):(s.tick(r),n++)}t=n>0?requestAnimationFrame(e):void 0}return"undefined"!=typeof document&&document.addEventListener("visibilitychange",(function(){ie.suspendWhenDocumentHidden&&(re()?t=cancelAnimationFrame(t):(te.forEach((function(t){return t._onDocumentVisibility()})),ee()))})),function(){t||re()&&ie.suspendWhenDocumentHidden||!(te.length>0)||(t=requestAnimationFrame(e))}}();function re(){return!!document&&document.hidden}function ie(t){void 0===t&&(t={});var e,r=0,i=0,n=0,s=0,a=null;function o(t){var e=window.Promise&&new Promise((function(t){return a=t}));return t.finished=e,e}var h=function(t){var e=Mt(rt,t),r=Mt(it,t),i=Ht(r,t),n=Wt(t.targets),s=Zt(n,i),a=Kt(s,r),o=Jt;return Jt++,At(e,{id:o,children:[],animatables:n,animations:s,duration:a.duration,delay:a.delay,endDelay:a.endDelay})}(t);o(h);function u(){var t=h.direction;"alternate"!==t&&(h.direction="normal"!==t?"normal":"reverse"),h.reversed=!h.reversed,e.forEach((function(t){return t.reversed=h.reversed}))}function l(t){return h.reversed?h.duration-t:t}function c(){r=0,i=l(h.currentTime)*(1/ie.speed)}function d(t,e){e&&e.seek(t-e.timelineOffset)}function p(t){for(var e=0,r=h.animations,i=r.length;e<i;){var n=r[e],s=n.animatable,a=n.tweens,o=a.length-1,u=a[o];o&&(u=yt(a,(function(e){return t<e.end}))[0]||u);for(var l=at(t-u.start-u.delay,0,u.duration)/u.duration,c=isNaN(l)?1:u.easing(l),d=u.to.strings,p=u.round,f=[],g=u.to.numbers.length,m=void 0,v=0;v<g;v++){var x=void 0,y=u.to.numbers[v],b=u.from.numbers[v]||0;x=u.isPath?qt(u.value,c*y,u.isPathTargetInsideSVG):b+c*(y-b),p&&(u.isColor&&v>2||(x=Math.round(x*p)/p)),f.push(x)}var w=d.length;if(w){m=d[0];for(var E=0;E<w;E++){d[E];var _=d[E+1],M=f[E];isNaN(M)||(m+=_?M+_:M+" ")}}else m=f[0];$t[n.type](s.target,n.property,m,s.transforms),n.currentValue=m,e++}}function f(t){h[t]&&!h.passThrough&&h[t](h)}function g(t){var c=h.duration,g=h.delay,m=c-h.endDelay,v=l(t);h.progress=at(v/c*100,0,100),h.reversePlayback=v<h.currentTime,e&&function(t){if(h.reversePlayback)for(var r=s;r--;)d(t,e[r]);else for(var i=0;i<s;i++)d(t,e[i])}(v),!h.began&&h.currentTime>0&&(h.began=!0,f("begin")),!h.loopBegan&&h.currentTime>0&&(h.loopBegan=!0,f("loopBegin")),v<=g&&0!==h.currentTime&&p(0),(v>=m&&h.currentTime!==c||!c)&&p(c),v>g&&v<m?(h.changeBegan||(h.changeBegan=!0,h.changeCompleted=!1,f("changeBegin")),f("change"),p(v)):h.changeBegan&&(h.changeCompleted=!0,h.changeBegan=!1,f("changeComplete")),h.currentTime=at(v,0,c),h.began&&f("update"),t>=c&&(i=0,h.remaining&&!0!==h.remaining&&h.remaining--,h.remaining?(r=n,f("loopComplete"),h.loopBegan=!1,"alternate"===h.direction&&u()):(h.paused=!0,h.completed||(h.completed=!0,f("loopComplete"),f("complete"),!h.passThrough&&"Promise"in window&&(a(),o(h)))))}return h.reset=function(){var t=h.direction;h.passThrough=!1,h.currentTime=0,h.progress=0,h.paused=!0,h.began=!1,h.loopBegan=!1,h.changeBegan=!1,h.completed=!1,h.changeCompleted=!1,h.reversePlayback=!1,h.reversed="reverse"===t,h.remaining=h.loop,e=h.children;for(var r=s=e.length;r--;)h.children[r].reset();(h.reversed&&!0!==h.loop||"alternate"===t&&1===h.loop)&&h.remaining++,p(h.reversed?h.duration:0)},h._onDocumentVisibility=c,h.set=function(t,e){return Qt(t,e),h},h.tick=function(t){n=t,r||(r=n),g((n+(i-r))*ie.speed)},h.seek=function(t){g(l(t))},h.pause=function(){h.paused=!0,c()},h.play=function(){h.paused&&(h.completed&&h.reset(),h.paused=!1,te.push(h),c(),ee())},h.reverse=function(){u(),h.completed=!h.reversed,c()},h.restart=function(){h.reset(),h.play()},h.remove=function(t){se(Xt(t),h)},h.reset(),h.autoplay&&h.play(),h}function ne(t,e){for(var r=e.length;r--;)Et(t,e[r].animatable.target)&&e.splice(r,1)}function se(t,e){var r=e.animations,i=e.children;ne(t,r);for(var n=i.length;n--;){var s=i[n],a=s.animations;ne(t,a),a.length||s.children.length||i.splice(n,1)}r.length||i.length||e.pause()}ie.version="3.2.1",ie.speed=1,ie.suspendWhenDocumentHidden=!0,ie.running=te,ie.remove=function(t){for(var e=Xt(t),r=te.length;r--;){se(e,te[r])}},ie.get=Nt,ie.set=Qt,ie.convertPx=Rt,ie.path=function(t,e){var r=ut.str(t)?xt(t)[0]:t,i=e||100;return function(t){return{property:t,el:r,svg:kt(r),totalLength:Ut(r)*(i/100)}}},ie.setDashoffset=function(t){var e=Ut(t);return t.setAttribute("stroke-dasharray",e),e},ie.stagger=function(t,e){void 0===e&&(e={});var r=e.direction||"normal",i=e.easing?vt(e.easing):null,n=e.grid,s=e.axis,a=e.from||0,o="first"===a,h="center"===a,u="last"===a,l=ut.arr(t),c=l?parseFloat(t[0]):parseFloat(t),d=l?parseFloat(t[1]):0,p=St(l?t[1]:t)||0,f=e.start||0+(l?c:0),g=[],m=0;return function(t,e,v){if(o&&(a=0),h&&(a=(v-1)/2),u&&(a=v-1),!g.length){for(var x=0;x<v;x++){if(n){var y=h?(n[0]-1)/2:a%n[0],b=h?(n[1]-1)/2:Math.floor(a/n[0]),w=y-x%n[0],E=b-Math.floor(x/n[0]),_=Math.sqrt(w*w+E*E);"x"===s&&(_=-w),"y"===s&&(_=-E),g.push(_)}else g.push(Math.abs(a-x));m=Math.max.apply(Math,g)}i&&(g=g.map((function(t){return i(t/m)*m}))),"reverse"===r&&(g=g.map((function(t){return s?t<0?-1*t:-t:Math.abs(m-t)})))}return f+(l?(d-c)/m:c)*(Math.round(100*g[e])/100)+p}},ie.timeline=function(t){void 0===t&&(t={});var e=ie(t);return e.duration=0,e.add=function(r,i){var n=te.indexOf(e),s=e.children;function a(t){t.passThrough=!0}n>-1&&te.splice(n,1);for(var o=0;o<s.length;o++)a(s[o]);var h=At(r,Mt(it,t));h.targets=h.targets||t.targets;var u=e.duration;h.autoplay=!1,h.direction=e.direction,h.timelineOffset=ut.und(i)?u:Bt(i,u),a(e),e.seek(h.timelineOffset);var l=ie(h);a(l),s.push(l);var c=Kt(s,t);return e.delay=c.delay,e.endDelay=c.endDelay,e.duration=c.duration,e.seek(0),e.reset(),e.autoplay&&e.play(),e},e},ie.easing=vt,ie.penner=mt,ie.random=function(t,e){return Math.floor(Math.random()*(e-t+1))+t};const ae=ie,oe="#define GLSLIFY 1\nattribute vec3 position;\nattribute vec2 uv;\n\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n}";class he{constructor({element:t,geometry:e,gl:r,index:i,scene:n,sizes:s}){this.element=t,this.gl=r,this.geometry=e,this.scene=n,this.index=i,this.sizes=s,this.extra={x:0,y:0},this.createTexture(),this.createProgram(),this.createMesh(),this.createBounds({sizes:this.sizes})}createTexture(){const t=this.element.querySelector(".detail__media__image");this.texture=window.TEXTURES[t.getAttribute("data-src")]}createProgram(){this.program=new H(this.gl,{fragment:"precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D tMap;\nuniform float threshold;\n\nvarying vec2 vUv;\n\nvoid main() {\n    vec4 texture = texture2D(tMap, vUv);\n    float alpha = step(vUv.x, threshold);\n    gl_FragColor = vec4(texture.rgb, alpha * texture.a);\n}",vertex:oe,uniforms:{threshold:{value:-.1},tMap:{value:this.texture}}})}createMesh(){this.mesh=new et(this.gl,{geometry:this.geometry,program:this.program}),this.mesh.setParent(this.scene)}createBounds({sizes:t}){this.sizes=t,this.bounds=this.element.getBoundingClientRect(),this.updateScale(),this.updateX(),this.updateY()}Animations;show(){ae({targets:this.program.uniforms.threshold,value:1,duration:1100,easing:"easeOutQuint"})}hide(){ae({targets:this.program.uniforms.threshold,value:-.1,easing:"easeOutQuint",duration:800})}onResize(t,e){this.extra={x:0,y:0},this.createBounds(t),this.updateX(e&&e.x),this.updateY(e&&e.y)}onPointerIn(){}onPointerOut(){}updateScale(){this.height=this.bounds.height/window.innerHeight,this.width=this.bounds.width/window.innerWidth,this.mesh.scale.x=this.sizes.width*this.width,this.mesh.scale.y=this.sizes.height*this.height}updateX(t=0){this.x=(this.bounds.left-t)/window.innerWidth,this.mesh.position.x=-this.sizes.width/2+this.mesh.scale.x/2+this.x*this.sizes.width+this.extra.x}updateY(t=0){this.y=(this.bounds.top-t)/window.innerHeight,this.mesh.position.y=this.sizes.height/2-this.mesh.scale.y/2-this.y*this.sizes.height+this.extra.y}flagEffect(){this.mesh.program.uniforms.uTime.value+=.001}update(t){this.updateScale(),this.updateX(),this.updateY(t)}}function ue(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function le(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function ce(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function de(t){var e=t[0],r=t[1];return Math.sqrt(e*e+r*r)}function pe(t,e){return t[0]*e[1]-t[1]*e[0]}class fe extends Array{constructor(t=0,e=t){return super(t,e),this}get x(){return this[0]}get y(){return this[1]}set x(t){this[0]=t}set y(t){this[1]=t}set(t,e=t){return t.length?this.copy(t):(function(t,e,r){t[0]=e,t[1]=r}(this,t,e),this)}copy(t){var e,r;return r=t,(e=this)[0]=r[0],e[1]=r[1],this}add(t,e){return e?ue(this,t,e):ue(this,this,t),this}sub(t,e){return e?le(this,t,e):le(this,this,t),this}multiply(t){var e,r,i;return t.length?(r=this,i=t,(e=this)[0]=r[0]*i[0],e[1]=r[1]*i[1]):ce(this,this,t),this}divide(t){var e,r,i;return t.length?(r=this,i=t,(e=this)[0]=r[0]/i[0],e[1]=r[1]/i[1]):ce(this,this,1/t),this}inverse(t=this){var e,r;return r=t,(e=this)[0]=1/r[0],e[1]=1/r[1],this}len(){return de(this)}distance(t){return t?(e=this,i=(r=t)[0]-e[0],n=r[1]-e[1],Math.sqrt(i*i+n*n)):de(this);var e,r,i,n}squaredLen(){return this.squaredDistance()}squaredDistance(t){return t?(e=this,i=(r=t)[0]-e[0],n=r[1]-e[1],i*i+n*n):function(t){var e=t[0],r=t[1];return e*e+r*r}(this);var e,r,i,n}negate(t=this){var e,r;return r=t,(e=this)[0]=-r[0],e[1]=-r[1],this}cross(t,e){return e?pe(t,e):pe(this,t)}scale(t){return ce(this,this,t),this}normalize(){var t,e,r,i,n;return t=this,r=(e=this)[0],i=e[1],(n=r*r+i*i)>0&&(n=1/Math.sqrt(n)),t[0]=e[0]*n,t[1]=e[1]*n,this}dot(t){return r=t,(e=this)[0]*r[0]+e[1]*r[1];var e,r}equals(t){return r=t,(e=this)[0]===r[0]&&e[1]===r[1];var e,r}applyMatrix3(t){var e,r,i,n,s;return e=this,i=t,n=(r=this)[0],s=r[1],e[0]=i[0]*n+i[3]*s+i[6],e[1]=i[1]*n+i[4]*s+i[7],this}applyMatrix4(t){return function(t,e,r){let i=e[0],n=e[1];t[0]=r[0]*i+r[4]*n+r[12],t[1]=r[1]*i+r[5]*n+r[13]}(this,this,t),this}lerp(t,e){return function(t,e,r,i){var n=e[0],s=e[1];t[0]=n+i*(r[0]-n),t[1]=s+i*(r[1]-s)}(this,this,t,e),this}clone(){return new fe(this[0],this[1])}fromArray(t,e=0){return this[0]=t[e],this[1]=t[e+1],this}toArray(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t}}const ge=new Uint8Array(4);function me(t){return 0==(t&t-1)}let ve=1;class xe{constructor(t,{image:e,target:r=t.TEXTURE_2D,type:i=t.UNSIGNED_BYTE,format:n=t.RGBA,internalFormat:s=n,wrapS:a=t.CLAMP_TO_EDGE,wrapT:o=t.CLAMP_TO_EDGE,generateMipmaps:h=!0,minFilter:u=(h?t.NEAREST_MIPMAP_LINEAR:t.LINEAR),magFilter:l=t.LINEAR,premultiplyAlpha:c=!1,unpackAlignment:d=4,flipY:p=r==t.TEXTURE_2D,anisotropy:f=0,level:g=0,width:m,height:v=m}={}){this.gl=t,this.id=ve++,this.image=e,this.target=r,this.type=i,this.format=n,this.internalFormat=s,this.minFilter=u,this.magFilter=l,this.wrapS=a,this.wrapT=o,this.generateMipmaps=h,this.premultiplyAlpha=c,this.unpackAlignment=d,this.flipY=p,this.anisotropy=Math.min(f,this.gl.renderer.parameters.maxAnisotropy),this.level=g,this.width=m,this.height=v,this.texture=this.gl.createTexture(),this.store={image:null},this.glState=this.gl.renderer.state,this.state={},this.state.minFilter=this.gl.NEAREST_MIPMAP_LINEAR,this.state.magFilter=this.gl.LINEAR,this.state.wrapS=this.gl.REPEAT,this.state.wrapT=this.gl.REPEAT,this.state.anisotropy=0}bind(){this.glState.textureUnits[this.glState.activeTextureUnit]!==this.id&&(this.gl.bindTexture(this.target,this.texture),this.glState.textureUnits[this.glState.activeTextureUnit]=this.id)}update(t=0){const e=!(this.image===this.store.image&&!this.needsUpdate);if((e||this.glState.textureUnits[t]!==this.id)&&(this.gl.renderer.activeTexture(t),this.bind()),e){if(this.needsUpdate=!1,this.flipY!==this.glState.flipY&&(this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,this.flipY),this.glState.flipY=this.flipY),this.premultiplyAlpha!==this.glState.premultiplyAlpha&&(this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),this.glState.premultiplyAlpha=this.premultiplyAlpha),this.unpackAlignment!==this.glState.unpackAlignment&&(this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,this.unpackAlignment),this.glState.unpackAlignment=this.unpackAlignment),this.minFilter!==this.state.minFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MIN_FILTER,this.minFilter),this.state.minFilter=this.minFilter),this.magFilter!==this.state.magFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MAG_FILTER,this.magFilter),this.state.magFilter=this.magFilter),this.wrapS!==this.state.wrapS&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_S,this.wrapS),this.state.wrapS=this.wrapS),this.wrapT!==this.state.wrapT&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_T,this.wrapT),this.state.wrapT=this.wrapT),this.anisotropy&&this.anisotropy!==this.state.anisotropy&&(this.gl.texParameterf(this.target,this.gl.renderer.getExtension("EXT_texture_filter_anisotropic").TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropy),this.state.anisotropy=this.anisotropy),this.image){if(this.image.width&&(this.width=this.image.width,this.height=this.image.height),this.target===this.gl.TEXTURE_CUBE_MAP)for(let t=0;t<6;t++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+t,this.level,this.internalFormat,this.format,this.type,this.image[t]);else if(ArrayBuffer.isView(this.image))this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,this.image);else if(this.image.isCompressedTexture)for(let t=0;t<this.image.length;t++)this.gl.compressedTexImage2D(this.target,t,this.internalFormat,this.image[t].width,this.image[t].height,0,this.image[t].data);else this.gl.texImage2D(this.target,this.level,this.internalFormat,this.format,this.type,this.image);this.generateMipmaps&&(this.gl.renderer.isWebgl2||me(this.image.width)&&me(this.image.height)?this.gl.generateMipmap(this.target):(this.generateMipmaps=!1,this.wrapS=this.wrapT=this.gl.CLAMP_TO_EDGE,this.minFilter=this.gl.LINEAR)),this.onUpdate&&this.onUpdate()}else if(this.target===this.gl.TEXTURE_CUBE_MAP)for(let t=0;t<6;t++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,ge);else this.width?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,null):this.gl.texImage2D(this.target,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,ge);this.store.image=this.image}}}class ye{constructor(t,{width:e=t.canvas.width,height:r=t.canvas.height,target:i=t.FRAMEBUFFER,color:n=1,depth:s=!0,stencil:a=!1,depthTexture:o=!1,wrapS:h=t.CLAMP_TO_EDGE,wrapT:u=t.CLAMP_TO_EDGE,minFilter:l=t.LINEAR,magFilter:c=l,type:d=t.UNSIGNED_BYTE,format:p=t.RGBA,internalFormat:f=p,unpackAlignment:g,premultiplyAlpha:m}={}){this.gl=t,this.width=e,this.height=r,this.depth=s,this.buffer=this.gl.createFramebuffer(),this.target=i,this.gl.renderer.bindFramebuffer(this),this.textures=[];const v=[];for(let i=0;i<n;i++)this.textures.push(new xe(t,{width:e,height:r,wrapS:h,wrapT:u,minFilter:l,magFilter:c,type:d,format:p,internalFormat:f,unpackAlignment:g,premultiplyAlpha:m,flipY:!1,generateMipmaps:!1})),this.textures[i].update(),this.gl.framebufferTexture2D(this.target,this.gl.COLOR_ATTACHMENT0+i,this.gl.TEXTURE_2D,this.textures[i].texture,0),v.push(this.gl.COLOR_ATTACHMENT0+i);v.length>1&&this.gl.renderer.drawBuffers(v),this.texture=this.textures[0],o&&(this.gl.renderer.isWebgl2||this.gl.renderer.getExtension("WEBGL_depth_texture"))?(this.depthTexture=new xe(t,{width:e,height:r,minFilter:this.gl.NEAREST,magFilter:this.gl.NEAREST,format:this.gl.DEPTH_COMPONENT,internalFormat:t.renderer.isWebgl2?this.gl.DEPTH_COMPONENT16:this.gl.DEPTH_COMPONENT,type:this.gl.UNSIGNED_INT}),this.depthTexture.update(),this.gl.framebufferTexture2D(this.target,this.gl.DEPTH_ATTACHMENT,this.gl.TEXTURE_2D,this.depthTexture.texture,0)):(s&&!a&&(this.depthBuffer=this.gl.createRenderbuffer(),this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,this.depthBuffer),this.gl.renderbufferStorage(this.gl.RENDERBUFFER,this.gl.DEPTH_COMPONENT16,e,r),this.gl.framebufferRenderbuffer(this.target,this.gl.DEPTH_ATTACHMENT,this.gl.RENDERBUFFER,this.depthBuffer)),a&&!s&&(this.stencilBuffer=this.gl.createRenderbuffer(),this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,this.stencilBuffer),this.gl.renderbufferStorage(this.gl.RENDERBUFFER,this.gl.STENCIL_INDEX8,e,r),this.gl.framebufferRenderbuffer(this.target,this.gl.STENCIL_ATTACHMENT,this.gl.RENDERBUFFER,this.stencilBuffer)),s&&a&&(this.depthStencilBuffer=this.gl.createRenderbuffer(),this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,this.depthStencilBuffer),this.gl.renderbufferStorage(this.gl.RENDERBUFFER,this.gl.DEPTH_STENCIL,e,r),this.gl.framebufferRenderbuffer(this.target,this.gl.DEPTH_STENCIL_ATTACHMENT,this.gl.RENDERBUFFER,this.depthStencilBuffer))),this.gl.renderer.bindFramebuffer({target:this.target})}setSize(t,e){if(this.width!==t||this.height!==e){this.width=t,this.height=e,this.gl.renderer.bindFramebuffer(this);for(let r=0;r<this.textures.length;r++)this.textures[r].width=t,this.textures[r].height=e,this.textures[r].needsUpdate=!0,this.textures[r].update(),this.gl.framebufferTexture2D(this.target,this.gl.COLOR_ATTACHMENT0+r,this.gl.TEXTURE_2D,this.textures[r].texture,0);this.depthTexture?(this.depthTexture.width=t,this.depthTexture.height=e,this.depthTexture.needsUpdate=!0,this.depthTexture.update(),this.gl.framebufferTexture2D(this.target,this.gl.DEPTH_ATTACHMENT,this.gl.TEXTURE_2D,this.depthTexture.texture,0)):(this.depthBuffer&&(this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,this.depthBuffer),this.gl.renderbufferStorage(this.gl.RENDERBUFFER,this.gl.DEPTH_COMPONENT16,t,e)),this.stencilBuffer&&(this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,this.stencilBuffer),this.gl.renderbufferStorage(this.gl.RENDERBUFFER,this.gl.STENCIL_INDEX8,t,e)),this.depthStencilBuffer&&(this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,this.depthStencilBuffer),this.gl.renderbufferStorage(this.gl.RENDERBUFFER,this.gl.DEPTH_STENCIL,t,e))),this.gl.renderer.bindFramebuffer({target:this.target})}}}class be extends k{constructor(t,{attributes:e={}}={}){Object.assign(e,{position:{size:2,data:new Float32Array([-1,-1,3,-1,-1,3])},uv:{size:2,data:new Float32Array([0,0,2,0,0,2])}}),super(t,e)}}class we{constructor(t,{size:e=128,falloff:r=.3,alpha:i=1,dissipation:n=.98,type:s}={}){const a=this;this.gl=t,this.uniform={value:null},this.mask={read:null,write:null,swap:()=>{let t=a.mask.read;a.mask.read=a.mask.write,a.mask.write=t,a.uniform.value=a.mask.read.texture}},function(){s||(s=t.HALF_FLOAT||t.renderer.extensions.OES_texture_half_float.HALF_FLOAT_OES);let r=t.renderer.isWebgl2||t.renderer.extensions[`OES_texture_${s===t.FLOAT?"":"half_"}float_linear`]?t.LINEAR:t.NEAREST;const i={width:e,height:e,type:s,format:t.RGBA,internalFormat:t.renderer.isWebgl2?s===t.FLOAT?t.RGBA32F:t.RGBA16F:t.RGBA,minFilter:r,depth:!1};a.mask.read=new ye(t,i),a.mask.write=new ye(t,i),a.mask.swap()}(),this.aspect=1,this.mouse=new fe,this.velocity=new fe,this.mesh=new et(t,{geometry:new be(t),program:new H(t,{vertex:Ee,fragment:_e,uniforms:{tMap:a.uniform,uFalloff:{value:.5*r},uAlpha:{value:i},uDissipation:{value:n},uAspect:{value:1},uMouse:{value:a.mouse},uVelocity:{value:a.velocity}},depthTest:!1})})}update(){this.mesh.program.uniforms.uAspect.value=this.aspect,this.gl.renderer.render({scene:this.mesh,target:this.mask.write,clear:!1}),this.mask.swap()}}const Ee="\n    attribute vec2 uv;\n    attribute vec2 position;\n\n    varying vec2 vUv;\n\n    void main() {\n        vUv = uv;\n        gl_Position = vec4(position, 0, 1);\n    }\n",_e="\n    precision highp float;\n\n    uniform sampler2D tMap;\n\n    uniform float uFalloff;\n    uniform float uAlpha;\n    uniform float uDissipation;\n    \n    uniform float uAspect;\n    uniform vec2 uMouse;\n    uniform vec2 uVelocity;\n\n    varying vec2 vUv;\n\n    void main() {\n        vec4 color = texture2D(tMap, vUv) * uDissipation;\n\n        vec2 cursor = vUv - uMouse;\n        cursor.x *= uAspect;\n\n        vec3 stamp = vec3(uVelocity * vec2(1, -1), 1.0 - pow(1.0 - min(1.0, length(uVelocity)), 3.0));\n        float falloff = smoothstep(uFalloff, 0.0, length(cursor)) * uAlpha;\n\n        color.rgb = mix(color.rgb, stamp, vec3(falloff));\n\n        gl_FragColor = color;\n    }\n";class Me{constructor({element:t,geometry:e,gl:r,index:i,scene:n,sizes:s}){this.element=t,this.gl=r,this.geometry=e,this.scene=n,this.index=i,this.sizes=s,this.extra={x:0,y:0},this.aspect=1,this.mouse=new fe(-1),this.velocity=new fe,this.createFlowmap(),this.createTexture(),this.createProgram(),this.createMesh(),this.createBounds({sizes:this.sizes})}createFlowmap(){this.flowmap=new we(this.gl)}createTexture(){const t=this.element.querySelector(".about__media__image");this.texture=window.TEXTURES[t.getAttribute("data-src")]}createProgram(){this.program=new H(this.gl,{fragment:"precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D tMap;\nuniform sampler2D tFlow;\nuniform float threshold;\n\nvarying vec2 vUv;\n\nvoid main() {\n    vec2 textureCenter = vec2(0.5, 0.5);\n    vec2 uv = (vUv - textureCenter) + 0.5;\n\n    vec3 flow = texture2D(tFlow, vUv).rgb;\n\n    uv += flow.xy * 0.0005;\n    vec4 tex = texture2D(tMap, uv);\n    float alpha = step(vUv.y, threshold);\n    \n    gl_FragColor = vec4(tex.rgb, alpha * tex.a);\n}",vertex:oe,uniforms:{threshold:{value:-.1},tMap:{value:this.texture},tFlow:this.flowmap.uniform}})}createMesh(){this.mesh=new et(this.gl,{geometry:this.geometry,program:this.program}),this.mesh.setParent(this.scene)}createBounds({sizes:t}){this.sizes=t,this.bounds=this.element.getBoundingClientRect(),this.updateScale(),this.updateX(),this.updateY()}show(){ae({targets:this.program.uniforms.threshold,value:1,duration:1100,easing:"easeOutQuint"})}hide(){ae({targets:this.program.uniforms.threshold,value:-.1,easing:"easeOutQuint",duration:800})}onResize(t){this.extra={x:0,y:0},this.aspect=window.innerWidth/window.innerHeight,this.createBounds(t),this.updateX(),this.updateY()}onPointerMove(t){this.lastTime,this.lastMouse=new fe,t.changedTouches&&t.changedTouches.length&&(t.x=t.changedTouches[0].pageX,t.y=t.changedTouches[0].pageY),void 0===t.x&&(t.x=t.pageX,t.y=t.pageY),this.mouse.set(t.x/window.innerWidth,1-t.y/window.innerHeight),this.lastTime||(this.lastTime=performance.now(),this.lastMouse.set(t.x,t.y));const e=t.x-this.lastMouse.x,r=t.y-this.lastMouse.y;this.lastMouse.set(t.x,t.y);let i=performance.now(),n=Math.max(14,i-this.lastTime);this.lastTime=i,this.velocity.x=e/n,this.velocity.y=r/n,this.velocity.needsUpdate=!0}updateMouse(){this.velocity.needsUpdate||(this.mouse.set(-1),this.velocity.set(0)),this.velocity.needsUpdate=!1,this.flowmap.aspect=this.aspect,this.flowmap.mouse.copy(this.mouse),this.flowmap.velocity.lerp(this.velocity,this.velocity.len()?.5:.1),this.flowmap.update()}updateScale(){this.height=this.bounds.height/window.innerHeight,this.width=this.bounds.width/window.innerWidth,this.mesh.scale.x=this.sizes.width*this.width,this.mesh.scale.y=this.sizes.height*this.height}updateX(t=0){this.x=(this.bounds.left-t)/window.innerWidth,this.mesh.position.x=-this.sizes.width/2+this.mesh.scale.x/2+this.x*this.sizes.width+this.extra.x}updateY(t=0){this.y=(this.bounds.top-t)/window.innerHeight,this.mesh.position.y=this.sizes.height/2-this.mesh.scale.y/2-this.y*this.sizes.height+this.extra.y}update(){this.updateScale(),this.updateX(),this.updateY(),this.updateMouse()}}class Ae{constructor({template:t}){this.template=t,this.y={start:0,end:0},this.positions={posX:0,posY:0},this.createRenderer(),this.createScene(),this.createCamera(),this.onResize()}createRenderer(){this.renderer=new y({alpha:!0,antialias:!0,dpr:1.5}),this.gl=this.renderer.gl,document.body.appendChild(this.gl.canvas)}createCamera(){this.camera=new B(this.gl),this.camera.position.z=5}createScene(){this.scene=new C}createDetail(){this.detail=new class{constructor({gl:t,scene:e,sizes:r}){this.gl=t,this.scene=e,this.sizes=r,this.group=new C,this.galleryWrapperElement=document.querySelector(".detail__gallery__wrapper"),this.scroll={current:0,start:0,target:0,lerp:.1},this.createGeometry(),this.createMedias(),this.onResize({sizes:this.sizes}),this.group.setParent(this.scene),this.createObserver(),this.event()}createGeometry(){this.geometry=new q(this.gl)}createMedias(){this.mediasElements=document.querySelectorAll(".detail__media"),this.medias=X()(this.mediasElements,((t,e)=>new he({element:t,geometry:this.geometry,index:e,gl:this.gl,scene:this.group,sizes:this.sizes})))}event(){n()(this.mediasElements,((t,e)=>{t.addEventListener("pointerenter",(t=>{this.medias[e].onPointerIn()})),t.addEventListener("pointerleave",(t=>{this.medias[e].onPointerOut()}))}))}createObserver(){n()(this.mediasElements,((t,e)=>{new window.IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting&&this.show(e)}))})).observe(t)}))}show(t){this.medias[t].show()}hide(){X()(this.medias,(t=>t.hide()))}onResize(t){this.sizes=t.sizes,this.bounds=this.galleryWrapperElement.getBoundingClientRect(),this.scroll.last=this.scroll.target=0,X()(this.medias,(e=>e.onResize(t,this.scroll))),this.scroll.limit=this.bounds.height-this.medias[0].element.clientHeight}onTouchDown(){this.scroll.last=this.scroll.current}onTouchMove({y:t}){const e=t.start-t.end;this.scroll.target=this.scroll.last+e}onTouchUp(){}onWheel({pixelY:t}){this.scroll.target+=t}update(){this.scroll.target=Math.min(Math.max(this.scroll.target,0),this.scroll.limit),this.scroll.current=this.scroll.current+.1*(this.scroll.target-this.scroll.current),this.scroll.current<.01&&(this.scroll.current=0),this.galleryWrapperElement.style.transform=`translate3d(0, -${this.scroll.current}px, 0)`,X()(this.medias,(t=>t.update(this.scroll.current)))}destroy(){this.scene.removeChild(this.group)}}({gl:this.gl,scene:this.scene,sizes:this.sizes})}destroyDetail(){this.detail&&(this.detail.destroy(),this.detail=null)}createAbout(){this.about=new class{constructor({gl:t,scene:e,sizes:r}){this.gl=t,this.scene=e,this.sizes=r,this.group=new C,this.createGeometry(),this.createMedias(),this.onResize({sizes:this.sizes}),this.group.setParent(this.scene),this.show(),this.event()}createGeometry(){this.geometry=new q(this.gl)}createMedias(){this.mediaElement=document.querySelector(".about__media"),this.media=new Me({element:this.mediaElement,geometry:this.geometry,gl:this.gl,scene:this.group,sizes:this.sizes})}event(){window.addEventListener("pointermove",(t=>{this.media.onPointerMove(t)}))}show(){this.media.show()}hide(){this.media.hide()}onResize(t){this.sizes=t.sizes,this.bounds=this.mediaElement.getBoundingClientRect(),this.media.onResize(t)}update(){this.media.update()}destroy(){this.scene.removeChild(this.group)}}({gl:this.gl,scene:this.scene,sizes:this.sizes})}destroyAbout(){this.about&&(this.about.destroy(),this.about=null)}onPreloaded(){this.onChangeEnd(this.template)}onChangeStart(){this.detail&&this.detail.hide(),this.about&&this.about.hide()}onChangeEnd(t){"detail"===t?this.createDetail():this.detail&&this.destroyDetail(),"about"===t?this.createAbout():this.about&&this.destroyAbout(),this.template=t}onResize(){this.renderer.setSize(window.innerWidth,window.innerHeight),this.camera.perspective({aspect:window.innerWidth/window.innerHeight});const t=this.camera.fov*(Math.PI/180),e=2*Math.tan(t/2)*this.camera.position.z,r=e*this.camera.aspect;this.sizes={height:e,width:r};const i={sizes:this.sizes};this.detail&&this.detail.onResize(i),this.about&&this.about.onResize(i)}onTouchDown(t){this.isDown=!0,this.y.start=t.touches?t.touches[0].clientY:t.clientY,this.detail&&this.detail.onTouchDown()}onTouchMove(t){if(!this.isDown)return;const e=t.touches?t.touches[0].clientY:t.clientY;this.y.end=e;const r={y:this.y};this.detail&&this.detail.onTouchMove(r)}onTouchUp(){this.isDown=!1}onWheel(t){this.detail&&this.detail.onWheel(t)}update(t){this.detail&&this.detail.update(t),this.about&&this.about.update(),this.renderer.render({camera:this.camera,scene:this.scene})}}function Te({element:t,expression:e=" ",append:r=!0}){const i=function(t,e){const r=t.split("<br>");let i=[];return n()(r,((t,r)=>{r>0&&i.push("<br>"),i=i.concat(t.split(e));let s=!1,a="";const o=[];n()(i,(t=>{s||!t.includes("<a")&&!t.includes("<strong")||(a="",s=!0),s&&(a+=` ${t}`),s&&(t.includes("/a>")||t.includes("/strong>"))&&(o.push(a),a=""),s||""!==a||o.push(t),s&&(t.includes("/a>")||t.includes("/strong>"))&&(s=!1)})),i=o})),i}(t.innerHTML.toString().trim(),e);let s="";n()(i,(t=>{if(t.indexOf("<br>")>-1){const e=t.split("<br>");n()(e,((t,e)=>{s+=e>0?"<br>"+Se(t):Se(t)}))}else s+=Se(t)})),t.innerHTML=s;const a=t.querySelectorAll("span");return r&&n()(a,(t=>{const e=1===t.textContent.length,r=""!==t.innerHTML.trim(),i="&"!==t.textContent,n="-"!==t.textContent;e&&r&&i&&n&&(t.innerHTML=`${t.textContent}&nbsp;`)})),a}function Se(t){return""===(t=t.trim())||" "===t?t:"<br>"===t?"<br>":`<span>${t}</span>`+(t.length>1?" ":"")}var Oe=r(1590),Fe=r.n(Oe);class Re extends(Fe()){constructor({element:t,elements:e}){super(),this.selector=t,this.selectorChildren={...e},this.create(),this.addEventListeners()}create(){this.selector instanceof window.HTMLElement?this.element=this.selector:this.element=document.querySelector(this.selector),this.elements={},n()(this.selectorChildren,((t,e)=>{t instanceof window.HTMLElement||t instanceof window.NodeList||Array.isArray(t)?this.elements[e]=t:(this.elements[e]=document.querySelectorAll(t),0===this.elements[e].length?this.elements[e]=null:1===this.elements[e].length&&(this.elements[e]=document.querySelector(t)))}))}addEventListeners(){}removeEventListeners(){}}class Le extends Re{constructor({canvas:t=null}){super({element:".preloader",elements:{title:".preloader__text",number:".preloader__number",numberText:".preloader__number__text"}}),this.canvas=t,window.TEXTURES={},this.page=document.querySelector(".preloader");const e=this.page.querySelector(".preloader__text");Te({element:e}),Te({element:e}),this.titleSpan=this.page.querySelector("span span"),this.length=0,this.createLoader()}createLoader(){this.canvas?n()(window.ASSETS,(t=>{const e=new xe(this.canvas.gl,{generateMipMaps:!1}),r=new window.Image;r.crossOrigin="anonymous",r.src=t,r.onload=t=>{e.image=r,this.onAssetLoaded()},window.TEXTURES[t]=e})):n()(window.ASSETS,(t=>{const e=new window.Image;e.crossOrigin="anonymous",e.src=t,e.onload=t=>{this.onAssetLoaded()}}))}onAssetLoaded(){this.length++;const t=this.length/window.ASSETS.length;this.elements.numberText.innerHTML=`${Math.round(100*t)}%`,1===t&&this.onLoaded()}onLoaded(){return new Promise((t=>{this.animationOut=ae.timeline({begin:()=>{this.emit("completed")},complete:()=>{this.destroy()}}),this.animationOut.add({targets:this.titleSpan,translateY:"100%",easing:"linear",duration:300},1e3),this.animationOut.add({targets:this.elements.numberText,translateY:"100%",easing:"linear",duration:180},1e3),this.animationOut.add({targets:this.element,translateY:"-100%",easing:"easeOutQuint",duration:1500},"+=300")}))}destroy(){this.element.parentNode.removeChild(this.element)}}class Ce extends Re{constructor({template:t}){super({element:".navigation",elements:{items:".navigation__list__item",links:".navigation__list__link"}}),this.onChange(t)}onChange(t){"home"===t?(ae({targets:this.elements.links[1],pointerEvents:"none",translateY:"-110%",easing:"easeOutQuint",duration:700}),ae.set(this.elements.links[0],{translateY:"110%",pointerEvents:"auto"}),ae({targets:this.elements.links[0],easing:"easeOutQuint",translateY:"0%",duration:700})):(ae({targets:this.elements.links[0],translateY:"-110%",pointerEvents:"none",easing:"easeOutQuint",duration:700}),ae.set(this.elements.links[1],{translateY:"110%",pointerEvents:"auto"}),ae({targets:this.elements.links[1],easing:"easeOutQuint",translateY:"0%",duration:700}))}}class Pe extends Re{constructor(){super({element:".grid"}),this.opacities=[0,.15,.3],this.index=1}onChange(){this.index>2&&(this.index=0),this.element.style.opacity=this.opacities[this.index],this.index+=1}}class De extends Re{constructor({element:t}){super({element:t}),this.createObserver()}createObserver(){this.observer=new window.IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting&&(this.element.src||(this.element.src=this.element.getAttribute("data-src"),this.element.onload=t=>{this.element.classList.add("loaded")}))}))})),this.observer.observe(this.element)}}class Ne{constructor({element:t,elements:e,id:r,device:i}){this.selector=t,this.selectorChildren={...e,preloaders:"[data-src]"},this.id=r,this.isMobile=i,this.alert=document.querySelector(".alert")}create(){this.element=document.querySelector(this.selector),this.elements={},this.isMobile&&(window.pageYOffset=0,document.documentElement.scrollTop=0,document.body.scrollTop=0),this.scroll={current:0,target:0,last:0,limit:0},this.y={start:0,end:0},n()(this.selectorChildren,((t,e)=>{t instanceof window.HTMLElement||t instanceof window.NodeList||Array.isArray(t)?this.elements[e]=t:(this.elements[e]=document.querySelectorAll(t),0===this.elements[e].length?this.elements[e]=null:1===this.elements[e].length&&(this.elements[e]=document.querySelector(t)))})),this.createPreloader()}createPreloader(){this.isMobile&&(this.preloaders=X()(this.elements.preloaders,(t=>new De({element:t}))))}onResize(){this.scroll.last=this.scroll.target=0,this.elements.wrapper&&(this.scroll.limit=this.elements.wrapper.clientHeight-window.innerHeight/1.5),this.isMobile&&(window.innerHeight<window.innerWidth?this.alert.style.opacity=1:this.alert.style.opacity=0)}onTouchDown(t){this.isDown=!0,this.y.start=t.touches?t.touches[0].clientY:t.clientY,this.scroll.last=this.scroll.current}onTouchMove(t){if(!this.isDown)return;const e=t.touches?t.touches[0].clientY:t.clientY;this.y.end=e;const r=this.y.start-this.y.end;this.scroll.target=this.scroll.last+r}onTouchUp(){this.isDown=!1}onWheel({pixelY:t}){this.scroll.target+=t}update(){if(this.scroll.target=Math.min(Math.max(this.scroll.target,0),this.scroll.limit),this.scroll.current=this.scroll.current+.1*(this.scroll.target-this.scroll.current),this.scroll.current<.01&&(this.scroll.current=0),this.elements.wrapper&&!this.isMobile){this.elements.wrapper.style.transform=`translate3d(0, -${this.scroll.current}px, 0)`;const t=this.element.querySelectorAll(".item"),e=window.innerHeight/2;n()(t,(t=>{const r=t.getBoundingClientRect();r.top<e&&r.bottom>e?t.classList.add("item_on_middle"):t.classList.remove("item_on_middle")}))}}addEventListeners(){}removeEventListeners(){}}class Be extends Ne{constructor(t){super({id:"home",device:t,element:".home",elements:{wrapper:".home__list"}}),this.mobile=t}textShow(){this.page=document.querySelector(".home"),this.texts=this.page.querySelectorAll(".item__wrapper"),this.mobile?ae({targets:this.page,opacity:["0","1"],easing:"easeOutQuint",duration:500}):ae({targets:this.texts,translateY:["105%","0%"],easing:"easeOutQuint",duration:700,delay:ae.stagger(50)})}textHide(){this.mobile?ae({targets:this.page,opacity:"0",easing:"easeOutCubic",duration:500,complete:()=>{this.page.remove()}}):ae({targets:this.texts,translateY:"-97%",easing:"easeOutCubic",duration:500,complete:()=>{this.page.remove()}})}show(){this.textShow()}hide(){this.textHide()}}class ze extends Ne{constructor(t){super({id:"detail",device:t,element:".detail"}),this.mobile=t}textShow(){this.page=document.querySelector(".detail"),this.texts=this.page.querySelectorAll("h1, h2, p"),n()(this.texts,(t=>{Te({element:t,expression:"<br>"}),Te({element:t,expression:"<br>"})})),this.spans=this.page.querySelectorAll("span span"),this.mobile?ae({targets:this.page,opacity:["0","1"],easing:"easeOutQuint",duration:500}):ae({targets:this.spans,translateY:["110%","0%"],easing:"easeOutQuint",duration:700,delay:ae.stagger(50)})}textHide(){this.mobile?ae({targets:this.page,opacity:"0",easing:"easeOutCubic",duration:500,complete:()=>{this.page.remove()}}):ae({targets:this.spans,translateY:"-110%",easing:"easeOutCubic",duration:500,complete:()=>{this.page.remove()}})}show(){this.textShow()}hide(){this.textHide()}}class je extends Ne{constructor(t){super({id:"about",device:t,element:".about"}),this.mobile=t}textShow(){this.page=document.querySelector(".about"),this.links=this.page.querySelectorAll("a"),this.texts=this.page.querySelectorAll("h1, h2, p"),n()(this.texts,(t=>{Te({element:t,expression:"<br>"}),Te({element:t,expression:"<br>"})})),this.spans=this.page.querySelectorAll("span span"),this.mobile?ae({targets:this.page,opacity:["0","1"],easing:"easeOutQuint",duration:500}):(ae({targets:this.spans,translateY:["105%","0%"],easing:"easeOutQuint",duration:700,delay:ae.stagger(50)}),ae({targets:this.links,opacity:[0,1],duration:700,easing:"linear",delay:1e3}))}textHide(){this.mobile?ae({targets:this.page,opacity:"0",easing:"easeOutCubic",duration:500,complete:()=>{this.page.remove()}}):(ae({targets:this.links,opacity:0,duration:400,easing:"easeOutCubic"}),ae({targets:this.spans,translateY:"-105%",easing:"easeOutCubic",duration:500,complete:()=>{this.page.remove()}}))}show(){this.textShow()}hide(){this.textHide()}}new class{constructor(){this.createContent(),this.DetectDevice(),this.createCanvas(),this.createPreloader(),this.createNavigation(),this.createGrid(),this.createPages(),this.addEventListeners(),this.addLinkListeners(),this.onResize(),this.update()}createContent(){this.content=document.querySelector(".content"),this.template=this.content.getAttribute("data-template")}DetectDevice(){this.isMobile=s.isMobile()}createCanvas(){this.isMobile||(this.canvas=new Ae({template:this.template}))}createPreloader(){this.preloader=new Le({canvas:this.canvas}),this.preloader.once("completed",this.onPreloaded.bind(this))}createNavigation(){this.navigation=new Ce({template:this.template})}createGrid(){this.grid=new Pe}createPages(){this.pages={home:new Be(this.isMobile),detail:new ze(this.isMobile),about:new je(this.isMobile)},this.page=this.pages[this.template],this.page.create()}onPreloaded(){this.onResize(),this.canvas&&this.canvas.onPreloaded(),this.page.show()}onPopState(){this.onChange({url:window.location.pathname,push:!1})}async onChange({url:t,push:e=!0}){this.page.hide(),this.canvas&&this.canvas.onChangeStart(this.template,t);const r=await window.fetch(t);if(200===r.status){const i=await r.text(),n=document.createElement("div");e&&window.history.pushState({},"",t),n.innerHTML=i;const s=n.querySelector(".content"),a=s.querySelector("div");this.template=s.getAttribute("data-template"),this.navigation.onChange(this.template),this.content.setAttribute("data-template",this.template),this.content.append(a),this.page=this.pages[this.template],this.page.create(),this.onResize(),setTimeout((()=>{this.canvas&&this.canvas.onChangeEnd(this.template)}),"700"),this.page.show(),this.addLinkListeners()}else console.error(`response status: ${r.status}`)}onResize(){this.page&&this.page.onResize&&this.page.onResize(),window.requestAnimationFrame((t=>{this.canvas&&this.canvas.onResize&&this.canvas.onResize()}))}onTouchDown(t){this.canvas&&this.canvas.onTouchDown&&this.canvas.onTouchDown(t),this.page&&this.page.onTouchDown&&this.page.onTouchDown(t)}onTouchMove(t){this.canvas&&this.canvas.onTouchMove&&this.canvas.onTouchMove(t),this.page&&this.page.onTouchDown&&this.page.onTouchMove(t)}onTouchUp(t){this.canvas&&this.canvas.onTouchUp&&this.canvas.onTouchUp(t),this.page&&this.page.onTouchDown&&this.page.onTouchUp(t)}onWheel(t){const r=e()(t);this.canvas&&this.canvas.onWheel&&this.canvas.onWheel(r),this.page&&this.page.onWheel&&this.page.onWheel(r)}onKeyDown(){this.grid.onChange()}update(){this.page&&this.page.update&&this.page.update(),this.canvas&&this.canvas.update&&this.canvas.update(this.page.scroll),window.requestAnimationFrame(this.update.bind(this))}addEventListeners(){window.addEventListener("mousewheel",this.onWheel.bind(this)),window.addEventListener("popstate",this.onPopState.bind(this)),window.addEventListener("mousedown",this.onTouchDown.bind(this)),window.addEventListener("mousemove",this.onTouchMove.bind(this)),window.addEventListener("mouseup",this.onTouchUp.bind(this)),window.addEventListener("touchstart",this.onTouchDown.bind(this)),window.addEventListener("touchmove",this.onTouchMove.bind(this)),window.addEventListener("touchend",this.onTouchUp.bind(this)),window.addEventListener("keydown",function(t){t.shiftKey&&"G"===t.key&&this.onKeyDown()}.bind(this)),window.addEventListener("resize",this.onResize.bind(this))}addLinkListeners(){const t=document.querySelectorAll("a");n()(t,(t=>{-1===t.href.indexOf(window.location.origin)||(t.onclick=e=>{e.preventDefault();const{href:r}=t;this.onChange({url:r})})}))}}})()})();
/*! For license information please see main.js.LICENSE.txt */
(()=>{var t={1590:t=>{"use strict";var e,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};e=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var i=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(t,e){return new Promise((function(r,n){function i(r){t.removeListener(e,s),n(r)}function s(){"function"==typeof t.removeListener&&t.removeListener("error",i),r([].slice.call(arguments))}g(t,e,s,{once:!0}),"error"!==e&&function(t,e,r){"function"==typeof t.on&&g(t,"error",e,r)}(t,i,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function o(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function h(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function u(t,e,r,n){var i,s,a,u;if(o(r),void 0===(s=t._events)?(s=t._events=Object.create(null),t._eventsCount=0):(void 0!==s.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),a=s[e]),void 0===a)a=s[e]=r,++t._eventsCount;else if("function"==typeof a?a=s[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(i=h(t))>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=a.length,u=l,console&&console.warn&&console.warn(u)}return t}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=l.bind(n);return i.listener=r,n.wrapFn=i,i}function d(t,e,r){var n=t._events;if(void 0===n)return[];var i=n[e];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):f(i,i.length)}function p(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function f(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function g(t,e,r,n){if("function"==typeof t.on)n.once?t.once(e,r):t.on(e,r);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(s){n.once&&t.removeEventListener(e,i),r(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");a=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return h(this)},s.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var i="error"===t,s=this._events;if(void 0!==s)i=i&&void 0===s.error;else if(!i)return!1;if(i){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var h=s[t];if(void 0===h)return!1;if("function"==typeof h)n(h,this,e);else{var u=h.length,l=f(h,u);for(r=0;r<u;++r)n(l[r],this,e)}return!0},s.prototype.addListener=function(t,e){return u(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return u(this,t,e,!0)},s.prototype.once=function(t,e){return o(e),this.on(t,c(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return o(e),this.prependListener(t,c(this,t,e)),this},s.prototype.removeListener=function(t,e){var r,n,i,s,a;if(o(e),void 0===(n=this._events))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(i=-1,s=r.length-1;s>=0;s--)if(r[s]===e||r[s].listener===e){a=r[s].listener,i=s;break}if(i<0)return this;0===i?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,i),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,a||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var i,s=Object.keys(r);for(n=0;n<s.length;++n)"removeListener"!==(i=s[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},s.prototype.listeners=function(t){return d(this,t,!0)},s.prototype.rawListeners=function(t){return d(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):p.call(t,e)},s.prototype.listenerCount=p,s.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},9940:(t,e,r)=>{var n=r(3203)(r(4362),"DataView");t.exports=n},1979:(t,e,r)=>{var n=r(9129),i=r(7644),s=r(3486),a=r(4786),o=r(6444);function h(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}h.prototype.clear=n,h.prototype.delete=i,h.prototype.get=s,h.prototype.has=a,h.prototype.set=o,t.exports=h},2768:(t,e,r)=>{var n=r(3708),i=r(6993),s=r(286),a=r(1678),o=r(9743);function h(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}h.prototype.clear=n,h.prototype.delete=i,h.prototype.get=s,h.prototype.has=a,h.prototype.set=o,t.exports=h},4804:(t,e,r)=>{var n=r(3203)(r(4362),"Map");t.exports=n},8423:(t,e,r)=>{var n=r(6977),i=r(7474),s=r(727),a=r(3653),o=r(6140);function h(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}h.prototype.clear=n,h.prototype.delete=i,h.prototype.get=s,h.prototype.has=a,h.prototype.set=o,t.exports=h},7114:(t,e,r)=>{var n=r(3203)(r(4362),"Promise");t.exports=n},689:(t,e,r)=>{var n=r(3203)(r(4362),"Set");t.exports=n},9832:(t,e,r)=>{var n=r(8423),i=r(9911),s=r(7447);function a(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new n;++e<r;)this.add(t[e])}a.prototype.add=a.prototype.push=i,a.prototype.has=s,t.exports=a},959:(t,e,r)=>{var n=r(2768),i=r(7553),s=r(6038),a=r(2397),o=r(2421),h=r(2936);function u(t){var e=this.__data__=new n(t);this.size=e.size}u.prototype.clear=i,u.prototype.delete=s,u.prototype.get=a,u.prototype.has=o,u.prototype.set=h,t.exports=u},2773:(t,e,r)=>{var n=r(4362).Symbol;t.exports=n},2496:(t,e,r)=>{var n=r(4362).Uint8Array;t.exports=n},5284:(t,e,r)=>{var n=r(3203)(r(4362),"WeakMap");t.exports=n},4111:t=>{t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}},6523:t=>{t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length,i=0,s=[];++r<n;){var a=t[r];e(a,r,t)&&(s[i++]=a)}return s}},8083:(t,e,r)=>{var n=r(5094),i=r(9246),s=r(3670),a=r(2343),o=r(4782),h=r(1589),u=Object.prototype.hasOwnProperty;t.exports=function(t,e){var r=s(t),l=!r&&i(t),c=!r&&!l&&a(t),d=!r&&!l&&!c&&h(t),p=r||l||c||d,f=p?n(t.length,String):[],g=f.length;for(var m in t)!e&&!u.call(t,m)||p&&("length"==m||c&&("offset"==m||"parent"==m)||d&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||o(m,g))||f.push(m);return f}},9258:t=>{t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}},8421:t=>{t.exports=function(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}},4481:t=>{t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}},6213:(t,e,r)=>{var n=r(7950);t.exports=function(t,e){for(var r=t.length;r--;)if(n(t[r][0],e))return r;return-1}},5806:(t,e,r)=>{var n=r(5645),i=r(3978)(n);t.exports=i},7079:(t,e,r)=>{var n=r(7924)();t.exports=n},5645:(t,e,r)=>{var n=r(7079),i=r(3225);t.exports=function(t,e){return t&&n(t,e,i)}},5974:(t,e,r)=>{var n=r(6883),i=r(7102);t.exports=function(t,e){for(var r=0,s=(e=n(e,t)).length;null!=t&&r<s;)t=t[i(e[r++])];return r&&r==s?t:void 0}},891:(t,e,r)=>{var n=r(8421),i=r(3670);t.exports=function(t,e,r){var s=e(t);return i(t)?s:n(s,r(t))}},1185:(t,e,r)=>{var n=r(2773),i=r(3888),s=r(2299),a=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?i(t):s(t)}},5529:t=>{t.exports=function(t,e){return null!=t&&e in Object(t)}},1075:(t,e,r)=>{var n=r(1185),i=r(4939);t.exports=function(t){return i(t)&&"[object Arguments]"==n(t)}},9856:(t,e,r)=>{var n=r(1829),i=r(4939);t.exports=function t(e,r,s,a,o){return e===r||(null==e||null==r||!i(e)&&!i(r)?e!=e&&r!=r:n(e,r,s,a,t,o))}},1829:(t,e,r)=>{var n=r(959),i=r(3426),s=r(1402),a=r(4572),o=r(2417),h=r(3670),u=r(2343),l=r(1589),c="[object Arguments]",d="[object Array]",p="[object Object]",f=Object.prototype.hasOwnProperty;t.exports=function(t,e,r,g,m,v){var y=h(t),x=h(e),w=y?d:o(t),b=x?d:o(e),_=(w=w==c?p:w)==p,M=(b=b==c?p:b)==p,E=w==b;if(E&&u(t)){if(!u(e))return!1;y=!0,_=!1}if(E&&!_)return v||(v=new n),y||l(t)?i(t,e,r,g,m,v):s(t,e,w,r,g,m,v);if(!(1&r)){var A=_&&f.call(t,"__wrapped__"),T=M&&f.call(e,"__wrapped__");if(A||T){var S=A?t.value():t,O=T?e.value():e;return v||(v=new n),m(S,O,r,g,v)}}return!!E&&(v||(v=new n),a(t,e,r,g,m,v))}},4656:(t,e,r)=>{var n=r(959),i=r(9856);t.exports=function(t,e,r,s){var a=r.length,o=a,h=!s;if(null==t)return!o;for(t=Object(t);a--;){var u=r[a];if(h&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++a<o;){var l=(u=r[a])[0],c=t[l],d=u[1];if(h&&u[2]){if(void 0===c&&!(l in t))return!1}else{var p=new n;if(s)var f=s(c,d,l,t,e,p);if(!(void 0===f?i(d,c,3,s,p):f))return!1}}return!0}},4106:(t,e,r)=>{var n=r(3626),i=r(9249),s=r(71),a=r(1214),o=/^\[object .+?Constructor\]$/,h=Function.prototype,u=Object.prototype,l=h.toString,c=u.hasOwnProperty,d=RegExp("^"+l.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!s(t)||i(t))&&(n(t)?d:o).test(a(t))}},3638:(t,e,r)=>{var n=r(1185),i=r(7100),s=r(4939),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return s(t)&&i(t.length)&&!!a[n(t)]}},9047:(t,e,r)=>{var n=r(8334),i=r(5941),s=r(1559),a=r(3670),o=r(8886);t.exports=function(t){return"function"==typeof t?t:null==t?s:"object"==typeof t?a(t)?i(t[0],t[1]):n(t):o(t)}},7521:(t,e,r)=>{var n=r(2803),i=r(3865),s=Object.prototype.hasOwnProperty;t.exports=function(t){if(!n(t))return i(t);var e=[];for(var r in Object(t))s.call(t,r)&&"constructor"!=r&&e.push(r);return e}},5901:(t,e,r)=>{var n=r(5806),i=r(6175);t.exports=function(t,e){var r=-1,s=i(t)?Array(t.length):[];return n(t,(function(t,n,i){s[++r]=e(t,n,i)})),s}},8334:(t,e,r)=>{var n=r(4656),i=r(2811),s=r(4248);t.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?s(e[0][0],e[0][1]):function(r){return r===t||n(r,t,e)}}},5941:(t,e,r)=>{var n=r(9856),i=r(643),s=r(9059),a=r(837),o=r(3631),h=r(4248),u=r(7102);t.exports=function(t,e){return a(t)&&o(e)?h(u(t),e):function(r){var a=i(r,t);return void 0===a&&a===e?s(r,t):n(e,a,3)}}},3184:t=>{t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},886:(t,e,r)=>{var n=r(5974);t.exports=function(t){return function(e){return n(e,t)}}},5094:t=>{t.exports=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}},8257:(t,e,r)=>{var n=r(2773),i=r(9258),s=r(3670),a=r(4655),o=n?n.prototype:void 0,h=o?o.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(s(e))return i(e,t)+"";if(a(e))return h?h.call(e):"";var r=e+"";return"0"==r&&1/e==-Infinity?"-0":r}},9081:t=>{t.exports=function(t){return function(e){return t(e)}}},3159:t=>{t.exports=function(t,e){return t.has(e)}},3183:(t,e,r)=>{var n=r(1559);t.exports=function(t){return"function"==typeof t?t:n}},6883:(t,e,r)=>{var n=r(3670),i=r(837),s=r(376),a=r(2049);t.exports=function(t,e){return n(t)?t:i(t,e)?[t]:s(a(t))}},1741:(t,e,r)=>{var n=r(4362)["__core-js_shared__"];t.exports=n},3978:(t,e,r)=>{var n=r(6175);t.exports=function(t,e){return function(r,i){if(null==r)return r;if(!n(r))return t(r,i);for(var s=r.length,a=e?s:-1,o=Object(r);(e?a--:++a<s)&&!1!==i(o[a],a,o););return r}}},7924:t=>{t.exports=function(t){return function(e,r,n){for(var i=-1,s=Object(e),a=n(e),o=a.length;o--;){var h=a[t?o:++i];if(!1===r(s[h],h,s))break}return e}}},3426:(t,e,r)=>{var n=r(9832),i=r(4481),s=r(3159);t.exports=function(t,e,r,a,o,h){var u=1&r,l=t.length,c=e.length;if(l!=c&&!(u&&c>l))return!1;var d=h.get(t),p=h.get(e);if(d&&p)return d==e&&p==t;var f=-1,g=!0,m=2&r?new n:void 0;for(h.set(t,e),h.set(e,t);++f<l;){var v=t[f],y=e[f];if(a)var x=u?a(y,v,f,e,t,h):a(v,y,f,t,e,h);if(void 0!==x){if(x)continue;g=!1;break}if(m){if(!i(e,(function(t,e){if(!s(m,e)&&(v===t||o(v,t,r,a,h)))return m.push(e)}))){g=!1;break}}else if(v!==y&&!o(v,y,r,a,h)){g=!1;break}}return h.delete(t),h.delete(e),g}},1402:(t,e,r)=>{var n=r(2773),i=r(2496),s=r(7950),a=r(3426),o=r(8961),h=r(6983),u=n?n.prototype:void 0,l=u?u.valueOf:void 0;t.exports=function(t,e,r,n,u,c,d){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!c(new i(t),new i(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return s(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var p=o;case"[object Set]":var f=1&n;if(p||(p=h),t.size!=e.size&&!f)return!1;var g=d.get(t);if(g)return g==e;n|=2,d.set(t,e);var m=a(p(t),p(e),n,u,c,d);return d.delete(t),m;case"[object Symbol]":if(l)return l.call(t)==l.call(e)}return!1}},4572:(t,e,r)=>{var n=r(5788),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,r,s,a,o){var h=1&r,u=n(t),l=u.length;if(l!=n(e).length&&!h)return!1;for(var c=l;c--;){var d=u[c];if(!(h?d in e:i.call(e,d)))return!1}var p=o.get(t),f=o.get(e);if(p&&f)return p==e&&f==t;var g=!0;o.set(t,e),o.set(e,t);for(var m=h;++c<l;){var v=t[d=u[c]],y=e[d];if(s)var x=h?s(y,v,d,e,t,o):s(v,y,d,t,e,o);if(!(void 0===x?v===y||a(v,y,r,s,o):x)){g=!1;break}m||(m="constructor"==d)}if(g&&!m){var w=t.constructor,b=e.constructor;w==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof w&&w instanceof w&&"function"==typeof b&&b instanceof b||(g=!1)}return o.delete(t),o.delete(e),g}},8556:(t,e,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;t.exports=n},5788:(t,e,r)=>{var n=r(891),i=r(6918),s=r(3225);t.exports=function(t){return n(t,s,i)}},404:(t,e,r)=>{var n=r(9008);t.exports=function(t,e){var r=t.__data__;return n(e)?r["string"==typeof e?"string":"hash"]:r.map}},2811:(t,e,r)=>{var n=r(3631),i=r(3225);t.exports=function(t){for(var e=i(t),r=e.length;r--;){var s=e[r],a=t[s];e[r]=[s,a,n(a)]}return e}},3203:(t,e,r)=>{var n=r(4106),i=r(7338);t.exports=function(t,e){var r=i(t,e);return n(r)?r:void 0}},3888:(t,e,r)=>{var n=r(2773),i=Object.prototype,s=i.hasOwnProperty,a=i.toString,o=n?n.toStringTag:void 0;t.exports=function(t){var e=s.call(t,o),r=t[o];try{t[o]=void 0;var n=!0}catch(t){}var i=a.call(t);return n&&(e?t[o]=r:delete t[o]),i}},6918:(t,e,r)=>{var n=r(6523),i=r(4043),s=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,o=a?function(t){return null==t?[]:(t=Object(t),n(a(t),(function(e){return s.call(t,e)})))}:i;t.exports=o},2417:(t,e,r)=>{var n=r(9940),i=r(4804),s=r(7114),a=r(689),o=r(5284),h=r(1185),u=r(1214),l="[object Map]",c="[object Promise]",d="[object Set]",p="[object WeakMap]",f="[object DataView]",g=u(n),m=u(i),v=u(s),y=u(a),x=u(o),w=h;(n&&w(new n(new ArrayBuffer(1)))!=f||i&&w(new i)!=l||s&&w(s.resolve())!=c||a&&w(new a)!=d||o&&w(new o)!=p)&&(w=function(t){var e=h(t),r="[object Object]"==e?t.constructor:void 0,n=r?u(r):"";if(n)switch(n){case g:return f;case m:return l;case v:return c;case y:return d;case x:return p}return e}),t.exports=w},7338:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},4727:(t,e,r)=>{var n=r(6883),i=r(9246),s=r(3670),a=r(4782),o=r(7100),h=r(7102);t.exports=function(t,e,r){for(var u=-1,l=(e=n(e,t)).length,c=!1;++u<l;){var d=h(e[u]);if(!(c=null!=t&&r(t,d)))break;t=t[d]}return c||++u!=l?c:!!(l=null==t?0:t.length)&&o(l)&&a(d,l)&&(s(t)||i(t))}},9129:(t,e,r)=>{var n=r(6326);t.exports=function(){this.__data__=n?n(null):{},this.size=0}},7644:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},3486:(t,e,r)=>{var n=r(6326),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(n){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return i.call(e,t)?e[t]:void 0}},4786:(t,e,r)=>{var n=r(6326),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return n?void 0!==e[t]:i.call(e,t)}},6444:(t,e,r)=>{var n=r(6326);t.exports=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=n&&void 0===e?"__lodash_hash_undefined__":e,this}},4782:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,r){var n=typeof t;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&e.test(t))&&t>-1&&t%1==0&&t<r}},837:(t,e,r)=>{var n=r(3670),i=r(4655),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(n(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!i(t))||(a.test(t)||!s.test(t)||null!=e&&t in Object(e))}},9008:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},9249:(t,e,r)=>{var n,i=r(1741),s=(n=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";t.exports=function(t){return!!s&&s in t}},2803:t=>{var e=Object.prototype;t.exports=function(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||e)}},3631:(t,e,r)=>{var n=r(71);t.exports=function(t){return t==t&&!n(t)}},3708:t=>{t.exports=function(){this.__data__=[],this.size=0}},6993:(t,e,r)=>{var n=r(6213),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,r=n(e,t);return!(r<0)&&(r==e.length-1?e.pop():i.call(e,r,1),--this.size,!0)}},286:(t,e,r)=>{var n=r(6213);t.exports=function(t){var e=this.__data__,r=n(e,t);return r<0?void 0:e[r][1]}},1678:(t,e,r)=>{var n=r(6213);t.exports=function(t){return n(this.__data__,t)>-1}},9743:(t,e,r)=>{var n=r(6213);t.exports=function(t,e){var r=this.__data__,i=n(r,t);return i<0?(++this.size,r.push([t,e])):r[i][1]=e,this}},6977:(t,e,r)=>{var n=r(1979),i=r(2768),s=r(4804);t.exports=function(){this.size=0,this.__data__={hash:new n,map:new(s||i),string:new n}}},7474:(t,e,r)=>{var n=r(404);t.exports=function(t){var e=n(this,t).delete(t);return this.size-=e?1:0,e}},727:(t,e,r)=>{var n=r(404);t.exports=function(t){return n(this,t).get(t)}},3653:(t,e,r)=>{var n=r(404);t.exports=function(t){return n(this,t).has(t)}},6140:(t,e,r)=>{var n=r(404);t.exports=function(t,e){var r=n(this,t),i=r.size;return r.set(t,e),this.size+=r.size==i?0:1,this}},8961:t=>{t.exports=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}},4248:t=>{t.exports=function(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}}},5933:(t,e,r)=>{var n=r(104);t.exports=function(t){var e=n(t,(function(t){return 500===r.size&&r.clear(),t})),r=e.cache;return e}},6326:(t,e,r)=>{var n=r(3203)(Object,"create");t.exports=n},3865:(t,e,r)=>{var n=r(5290)(Object.keys,Object);t.exports=n},1985:(t,e,r)=>{t=r.nmd(t);var n=r(8556),i=e&&!e.nodeType&&e,s=i&&t&&!t.nodeType&&t,a=s&&s.exports===i&&n.process,o=function(){try{var t=s&&s.require&&s.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=o},2299:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},5290:t=>{t.exports=function(t,e){return function(r){return t(e(r))}}},4362:(t,e,r)=>{var n=r(8556),i="object"==typeof self&&self&&self.Object===Object&&self,s=n||i||Function("return this")();t.exports=s},9911:t=>{t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},7447:t=>{t.exports=function(t){return this.__data__.has(t)}},6983:t=>{t.exports=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}},7553:(t,e,r)=>{var n=r(2768);t.exports=function(){this.__data__=new n,this.size=0}},6038:t=>{t.exports=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}},2397:t=>{t.exports=function(t){return this.__data__.get(t)}},2421:t=>{t.exports=function(t){return this.__data__.has(t)}},2936:(t,e,r)=>{var n=r(2768),i=r(4804),s=r(8423);t.exports=function(t,e){var r=this.__data__;if(r instanceof n){var a=r.__data__;if(!i||a.length<199)return a.push([t,e]),this.size=++r.size,this;r=this.__data__=new s(a)}return r.set(t,e),this.size=r.size,this}},376:(t,e,r)=>{var n=r(5933),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,a=n((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,(function(t,r,n,i){e.push(n?i.replace(s,"$1"):r||t)})),e}));t.exports=a},7102:(t,e,r)=>{var n=r(4655);t.exports=function(t){if("string"==typeof t||n(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}},1214:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},6270:(t,e,r)=>{t.exports=r(9982)},7950:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},9982:(t,e,r)=>{var n=r(4111),i=r(5806),s=r(3183),a=r(3670);t.exports=function(t,e){return(a(t)?n:i)(t,s(e))}},643:(t,e,r)=>{var n=r(5974);t.exports=function(t,e,r){var i=null==t?void 0:n(t,e);return void 0===i?r:i}},9059:(t,e,r)=>{var n=r(5529),i=r(4727);t.exports=function(t,e){return null!=t&&i(t,e,n)}},1559:t=>{t.exports=function(t){return t}},9246:(t,e,r)=>{var n=r(1075),i=r(4939),s=Object.prototype,a=s.hasOwnProperty,o=s.propertyIsEnumerable,h=n(function(){return arguments}())?n:function(t){return i(t)&&a.call(t,"callee")&&!o.call(t,"callee")};t.exports=h},3670:t=>{var e=Array.isArray;t.exports=e},6175:(t,e,r)=>{var n=r(3626),i=r(7100);t.exports=function(t){return null!=t&&i(t.length)&&!n(t)}},2343:(t,e,r)=>{t=r.nmd(t);var n=r(4362),i=r(3444),s=e&&!e.nodeType&&e,a=s&&t&&!t.nodeType&&t,o=a&&a.exports===s?n.Buffer:void 0,h=(o?o.isBuffer:void 0)||i;t.exports=h},3626:(t,e,r)=>{var n=r(1185),i=r(71);t.exports=function(t){if(!i(t))return!1;var e=n(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},7100:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},71:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},4939:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},4655:(t,e,r)=>{var n=r(1185),i=r(4939);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==n(t)}},1589:(t,e,r)=>{var n=r(3638),i=r(9081),s=r(1985),a=s&&s.isTypedArray,o=a?i(a):n;t.exports=o},3225:(t,e,r)=>{var n=r(8083),i=r(7521),s=r(6175);t.exports=function(t){return s(t)?n(t):i(t)}},7976:(t,e,r)=>{var n=r(9258),i=r(9047),s=r(5901),a=r(3670);t.exports=function(t,e){return(a(t)?n:s)(t,i(e,3))}},104:(t,e,r)=>{var n=r(8423);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var a=t.apply(this,n);return r.cache=s.set(i,a)||s,a};return r.cache=new(i.Cache||n),r}i.Cache=n,t.exports=i},8886:(t,e,r)=>{var n=r(3184),i=r(886),s=r(837),a=r(7102);t.exports=function(t){return s(t)?n(a(t)):i(t)}},4043:t=>{t.exports=function(){return[]}},3444:t=>{t.exports=function(){return!1}},2049:(t,e,r)=>{var n=r(8257);t.exports=function(t){return null==t?"":n(t)}},7320:(t,e,r)=>{t.exports=r(1045)},7230:t=>{"use strict";var e=!("undefined"==typeof window||!window.document||!window.document.createElement),r={canUseDOM:e,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:e&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:e&&!!window.screen,isInWorker:!e};t.exports=r},2907:t=>{var e,r,n,i,s,a,o,h,u,l,c,d,p,f,g,m=!1;function v(){if(!m){m=!0;var t=navigator.userAgent,v=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),y=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(d=/\b(iPhone|iP[ao]d)/.exec(t),p=/\b(iP[ao]d)/.exec(t),l=/Android/i.exec(t),f=/FBAN\/\w+;/i.exec(t),g=/Mobile/i.exec(t),c=!!/Win64/.exec(t),v){(e=v[1]?parseFloat(v[1]):v[5]?parseFloat(v[5]):NaN)&&document&&document.documentMode&&(e=document.documentMode);var x=/(?:Trident\/(\d+.\d+))/.exec(t);a=x?parseFloat(x[1])+4:e,r=v[2]?parseFloat(v[2]):NaN,n=v[3]?parseFloat(v[3]):NaN,(i=v[4]?parseFloat(v[4]):NaN)?(v=/(?:Chrome\/(\d+\.\d+))/.exec(t),s=v&&v[1]?parseFloat(v[1]):NaN):s=NaN}else e=r=n=s=i=NaN;if(y){if(y[1]){var w=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);o=!w||parseFloat(w[1].replace("_","."))}else o=!1;h=!!y[2],u=!!y[3]}else o=h=u=!1}}var y={ie:function(){return v()||e},ieCompatibilityMode:function(){return v()||a>e},ie64:function(){return y.ie()&&c},firefox:function(){return v()||r},opera:function(){return v()||n},webkit:function(){return v()||i},safari:function(){return y.webkit()},chrome:function(){return v()||s},windows:function(){return v()||h},osx:function(){return v()||o},linux:function(){return v()||u},iphone:function(){return v()||d},mobile:function(){return v()||d||p||l||g},nativeApp:function(){return v()||f},android:function(){return v()||l},ipad:function(){return v()||p}};t.exports=y},4480:(t,e,r)=>{"use strict";var n,i=r(7230);i.canUseDOM&&(n=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),t.exports=function(t,e){if(!i.canUseDOM||e&&!("addEventListener"in document))return!1;var r="on"+t,s=r in document;if(!s){var a=document.createElement("div");a.setAttribute(r,"return;"),s="function"==typeof a[r]}return!s&&n&&"wheel"===t&&(s=document.implementation.hasFeature("Events.wheel","3.0")),s}},1045:(t,e,r)=>{"use strict";var n=r(2907),i=r(4480);function s(t){var e=0,r=0,n=0,i=0;return"detail"in t&&(r=t.detail),"wheelDelta"in t&&(r=-t.wheelDelta/120),"wheelDeltaY"in t&&(r=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=r,r=0),n=10*e,i=10*r,"deltaY"in t&&(i=t.deltaY),"deltaX"in t&&(n=t.deltaX),(n||i)&&t.deltaMode&&(1==t.deltaMode?(n*=40,i*=40):(n*=800,i*=800)),n&&!e&&(e=n<1?-1:1),i&&!r&&(r=i<1?-1:1),{spinX:e,spinY:r,pixelX:n,pixelY:i}}s.getEventType=function(){return n.firefox()?"DOMMouseScroll":i("wheel")?"wheel":"mousewheel"},t.exports=s}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var s=e[n]={id:n,loaded:!1,exports:{}};return t[n](s,s.exports,r),s.loaded=!0,s.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";var t=r(7320),e=r.n(t),n=r(6270),i=r.n(n);const s=new class{isDesktop(){return/(Windows NT|Macintosh)/i.test(navigator.userAgent)}};function a(t){let e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function h(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function u(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function l(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function c(t){let e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function d(t,e){let r=e[0],n=e[1],i=e[2],s=r*r+n*n+i*i;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function p(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function f(t,e,r){let n=e[0],i=e[1],s=e[2],a=r[0],o=r[1],h=r[2];return t[0]=i*h-s*o,t[1]=s*a-n*h,t[2]=n*o-i*a,t}const g=function(){const t=[0,0,0],e=[0,0,0];return function(r,n){o(t,r),o(e,n),d(t,t),d(e,e);let i=p(t,e);return i>1?0:i<-1?Math.PI:Math.acos(i)}}();class m extends Array{constructor(t=0,e=t,r=t){return super(t,e,r),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(t){this[0]=t}set y(t){this[1]=t}set z(t){this[2]=t}set(t,e=t,r=t){return t.length?this.copy(t):(function(t,e,r,n){t[0]=e,t[1]=r,t[2]=n}(this,t,e,r),this)}copy(t){return o(this,t),this}add(t,e){return e?h(this,t,e):h(this,this,t),this}sub(t,e){return e?u(this,t,e):u(this,this,t),this}multiply(t){var e,r,n;return t.length?(r=this,n=t,(e=this)[0]=r[0]*n[0],e[1]=r[1]*n[1],e[2]=r[2]*n[2]):l(this,this,t),this}divide(t){var e,r,n;return t.length?(r=this,n=t,(e=this)[0]=r[0]/n[0],e[1]=r[1]/n[1],e[2]=r[2]/n[2]):l(this,this,1/t),this}inverse(t=this){var e,r;return r=t,(e=this)[0]=1/r[0],e[1]=1/r[1],e[2]=1/r[2],this}len(){return a(this)}distance(t){return t?function(t,e){let r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(r*r+n*n+i*i)}(this,t):a(this)}squaredLen(){return c(this)}squaredDistance(t){return t?function(t,e){let r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i}(this,t):c(this)}negate(t=this){var e,r;return r=t,(e=this)[0]=-r[0],e[1]=-r[1],e[2]=-r[2],this}cross(t,e){return e?f(this,t,e):f(this,this,t),this}scale(t){return l(this,this,t),this}normalize(){return d(this,this),this}dot(t){return p(this,t)}equals(t){return r=t,(e=this)[0]===r[0]&&e[1]===r[1]&&e[2]===r[2];var e,r}applyMatrix3(t){return function(t,e,r){let n=e[0],i=e[1],s=e[2];t[0]=n*r[0]+i*r[3]+s*r[6],t[1]=n*r[1]+i*r[4]+s*r[7],t[2]=n*r[2]+i*r[5]+s*r[8]}(this,this,t),this}applyMatrix4(t){return function(t,e,r){let n=e[0],i=e[1],s=e[2],a=r[3]*n+r[7]*i+r[11]*s+r[15];a=a||1,t[0]=(r[0]*n+r[4]*i+r[8]*s+r[12])/a,t[1]=(r[1]*n+r[5]*i+r[9]*s+r[13])/a,t[2]=(r[2]*n+r[6]*i+r[10]*s+r[14])/a}(this,this,t),this}scaleRotateMatrix4(t){return function(t,e,r){let n=e[0],i=e[1],s=e[2],a=r[3]*n+r[7]*i+r[11]*s+r[15];a=a||1,t[0]=(r[0]*n+r[4]*i+r[8]*s)/a,t[1]=(r[1]*n+r[5]*i+r[9]*s)/a,t[2]=(r[2]*n+r[6]*i+r[10]*s)/a}(this,this,t),this}applyQuaternion(t){return function(t,e,r){let n=e[0],i=e[1],s=e[2],a=r[0],o=r[1],h=r[2],u=o*s-h*i,l=h*n-a*s,c=a*i-o*n,d=o*c-h*l,p=h*u-a*c,f=a*l-o*u,g=2*r[3];u*=g,l*=g,c*=g,d*=2,p*=2,f*=2,t[0]=n+u+d,t[1]=i+l+p,t[2]=s+c+f}(this,this,t),this}angle(t){return g(this,t)}lerp(t,e){return function(t,e,r,n){let i=e[0],s=e[1],a=e[2];t[0]=i+n*(r[0]-i),t[1]=s+n*(r[1]-s),t[2]=a+n*(r[2]-a)}(this,this,t,e),this}clone(){return new m(this[0],this[1],this[2])}fromArray(t,e=0){return this[0]=t[e],this[1]=t[e+1],this[2]=t[e+2],this}toArray(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t}transformDirection(t){const e=this[0],r=this[1],n=this[2];return this[0]=t[0]*e+t[4]*r+t[8]*n,this[1]=t[1]*e+t[5]*r+t[9]*n,this[2]=t[2]*e+t[6]*r+t[10]*n,this.normalize()}}const v=new m;let y=1;class x{constructor({canvas:t=document.createElement("canvas"),width:e=300,height:r=150,dpr:n=1,alpha:i=!1,depth:s=!0,stencil:a=!1,antialias:o=!1,premultipliedAlpha:h=!1,preserveDrawingBuffer:u=!1,powerPreference:l="default",autoClear:c=!0,webgl:d=2}={}){const p={alpha:i,depth:s,stencil:a,antialias:o,premultipliedAlpha:h,preserveDrawingBuffer:u,powerPreference:l};this.dpr=n,this.alpha=i,this.color=!0,this.depth=s,this.stencil=a,this.premultipliedAlpha=h,this.autoClear=c,this.id=y++,2===d&&(this.gl=t.getContext("webgl2",p)),this.isWebgl2=!!this.gl,this.gl||(this.gl=t.getContext("webgl",p)),this.gl||console.error("unable to create webgl context"),this.gl.renderer=this,this.setSize(e,r),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=null,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LESS,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={x:0,y:0,width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.state.currentProgram=null,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.getExtension("WEBGL_compressed_texture_astc"),this.getExtension("EXT_texture_compression_bptc"),this.getExtension("WEBGL_compressed_texture_s3tc"),this.getExtension("WEBGL_compressed_texture_etc1"),this.getExtension("WEBGL_compressed_texture_pvrtc"),this.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}setSize(t,e){this.width=t,this.height=e,this.gl.canvas.width=t*this.dpr,this.gl.canvas.height=e*this.dpr,Object.assign(this.gl.canvas.style,{width:t+"px",height:e+"px"})}setViewport(t,e,r=0,n=0){this.state.viewport.width===t&&this.state.viewport.height===e||(this.state.viewport.width=t,this.state.viewport.height=e,this.state.viewport.x=r,this.state.viewport.y=n,this.gl.viewport(r,n,t,e))}setScissor(t,e,r=0,n=0){this.gl.scissor(r,n,t,e)}enable(t){!0!==this.state[t]&&(this.gl.enable(t),this.state[t]=!0)}disable(t){!1!==this.state[t]&&(this.gl.disable(t),this.state[t]=!1)}setBlendFunc(t,e,r,n){this.state.blendFunc.src===t&&this.state.blendFunc.dst===e&&this.state.blendFunc.srcAlpha===r&&this.state.blendFunc.dstAlpha===n||(this.state.blendFunc.src=t,this.state.blendFunc.dst=e,this.state.blendFunc.srcAlpha=r,this.state.blendFunc.dstAlpha=n,void 0!==r?this.gl.blendFuncSeparate(t,e,r,n):this.gl.blendFunc(t,e))}setBlendEquation(t,e){t=t||this.gl.FUNC_ADD,this.state.blendEquation.modeRGB===t&&this.state.blendEquation.modeAlpha===e||(this.state.blendEquation.modeRGB=t,this.state.blendEquation.modeAlpha=e,void 0!==e?this.gl.blendEquationSeparate(t,e):this.gl.blendEquation(t))}setCullFace(t){this.state.cullFace!==t&&(this.state.cullFace=t,this.gl.cullFace(t))}setFrontFace(t){this.state.frontFace!==t&&(this.state.frontFace=t,this.gl.frontFace(t))}setDepthMask(t){this.state.depthMask!==t&&(this.state.depthMask=t,this.gl.depthMask(t))}setDepthFunc(t){this.state.depthFunc!==t&&(this.state.depthFunc=t,this.gl.depthFunc(t))}activeTexture(t){this.state.activeTextureUnit!==t&&(this.state.activeTextureUnit=t,this.gl.activeTexture(this.gl.TEXTURE0+t))}bindFramebuffer({target:t=this.gl.FRAMEBUFFER,buffer:e=null}={}){this.state.framebuffer!==e&&(this.state.framebuffer=e,this.gl.bindFramebuffer(t,e))}getExtension(t,e,r){return e&&this.gl[e]?this.gl[e].bind(this.gl):(this.extensions[t]||(this.extensions[t]=this.gl.getExtension(t)),e?this.extensions[t]?this.extensions[t][r].bind(this.extensions[t]):null:this.extensions[t])}sortOpaque(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program.id!==e.program.id?t.program.id-e.program.id:t.zDepth!==e.zDepth?t.zDepth-e.zDepth:e.id-t.id}sortTransparent(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.zDepth!==e.zDepth?e.zDepth-t.zDepth:e.id-t.id}sortUI(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program.id!==e.program.id?t.program.id-e.program.id:e.id-t.id}getRenderList({scene:t,camera:e,frustumCull:r,sort:n}){let i=[];if(e&&r&&e.updateFrustum(),t.traverse((t=>{if(!t.visible)return!0;t.draw&&(r&&t.frustumCulled&&e&&!e.frustumIntersectsMesh(t)||i.push(t))})),n){const t=[],r=[],n=[];i.forEach((i=>{i.program.transparent?i.program.depthTest?r.push(i):n.push(i):t.push(i),i.zDepth=0,0===i.renderOrder&&i.program.depthTest&&e&&(i.worldMatrix.getTranslation(v),v.applyMatrix4(e.projectionViewMatrix),i.zDepth=v.z)})),t.sort(this.sortOpaque),r.sort(this.sortTransparent),n.sort(this.sortUI),i=t.concat(r,n)}return i}render({scene:t,camera:e,target:r=null,update:n=!0,sort:i=!0,frustumCull:s=!0,clear:a}){null===r?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(r),this.setViewport(r.width,r.height)),(a||this.autoClear&&!1!==a)&&(!this.depth||r&&!r.depth||(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),n&&t.updateMatrixWorld(),e&&e.updateMatrixWorld();this.getRenderList({scene:t,camera:e,frustumCull:s,sort:i}).forEach((t=>{t.draw({camera:e})}))}}function w(t,e,r){let n=e[0],i=e[1],s=e[2],a=e[3],o=r[0],h=r[1],u=r[2],l=r[3];return t[0]=n*l+a*o+i*u-s*h,t[1]=i*l+a*h+s*o-n*u,t[2]=s*l+a*u+n*h-i*o,t[3]=a*l-n*o-i*h-s*u,t}const b=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},_=function(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t},M=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},E=function(t,e){let r=e[0],n=e[1],i=e[2],s=e[3],a=r*r+n*n+i*i+s*s;return a>0&&(a=1/Math.sqrt(a)),t[0]=r*a,t[1]=n*a,t[2]=i*a,t[3]=s*a,t};class A extends Array{constructor(t=0,e=0,r=0,n=1){return super(t,e,r,n),this.onChange=()=>{},this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(t){this[0]=t,this.onChange()}set y(t){this[1]=t,this.onChange()}set z(t){this[2]=t,this.onChange()}set w(t){this[3]=t,this.onChange()}identity(){var t;return(t=this)[0]=0,t[1]=0,t[2]=0,t[3]=1,this.onChange(),this}set(t,e,r,n){return t.length?this.copy(t):(_(this,t,e,r,n),this.onChange(),this)}rotateX(t){return function(t,e,r){r*=.5;let n=e[0],i=e[1],s=e[2],a=e[3],o=Math.sin(r),h=Math.cos(r);t[0]=n*h+a*o,t[1]=i*h+s*o,t[2]=s*h-i*o,t[3]=a*h-n*o}(this,this,t),this.onChange(),this}rotateY(t){return function(t,e,r){r*=.5;let n=e[0],i=e[1],s=e[2],a=e[3],o=Math.sin(r),h=Math.cos(r);t[0]=n*h-s*o,t[1]=i*h+a*o,t[2]=s*h+n*o,t[3]=a*h-i*o}(this,this,t),this.onChange(),this}rotateZ(t){return function(t,e,r){r*=.5;let n=e[0],i=e[1],s=e[2],a=e[3],o=Math.sin(r),h=Math.cos(r);t[0]=n*h+i*o,t[1]=i*h-n*o,t[2]=s*h+a*o,t[3]=a*h-s*o}(this,this,t),this.onChange(),this}inverse(t=this){return function(t,e){let r=e[0],n=e[1],i=e[2],s=e[3],a=r*r+n*n+i*i+s*s,o=a?1/a:0;t[0]=-r*o,t[1]=-n*o,t[2]=-i*o,t[3]=s*o}(this,t),this.onChange(),this}conjugate(t=this){var e,r;return r=t,(e=this)[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e[3]=r[3],this.onChange(),this}copy(t){return b(this,t),this.onChange(),this}normalize(t=this){return E(this,t),this.onChange(),this}multiply(t,e){return e?w(this,t,e):w(this,this,t),this.onChange(),this}dot(t){return M(this,t)}fromMatrix3(t){return function(t,e){let r,n=e[0]+e[4]+e[8];if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{let n=0;e[4]>e[0]&&(n=1),e[8]>e[3*n+n]&&(n=2);let i=(n+1)%3,s=(n+2)%3;r=Math.sqrt(e[3*n+n]-e[3*i+i]-e[3*s+s]+1),t[n]=.5*r,r=.5/r,t[3]=(e[3*i+s]-e[3*s+i])*r,t[i]=(e[3*i+n]+e[3*n+i])*r,t[s]=(e[3*s+n]+e[3*n+s])*r}}(this,t),this.onChange(),this}fromEuler(t){return function(t,e,r="YXZ"){let n=Math.sin(.5*e[0]),i=Math.cos(.5*e[0]),s=Math.sin(.5*e[1]),a=Math.cos(.5*e[1]),o=Math.sin(.5*e[2]),h=Math.cos(.5*e[2]);"XYZ"===r?(t[0]=n*a*h+i*s*o,t[1]=i*s*h-n*a*o,t[2]=i*a*o+n*s*h,t[3]=i*a*h-n*s*o):"YXZ"===r?(t[0]=n*a*h+i*s*o,t[1]=i*s*h-n*a*o,t[2]=i*a*o-n*s*h,t[3]=i*a*h+n*s*o):"ZXY"===r?(t[0]=n*a*h-i*s*o,t[1]=i*s*h+n*a*o,t[2]=i*a*o+n*s*h,t[3]=i*a*h-n*s*o):"ZYX"===r?(t[0]=n*a*h-i*s*o,t[1]=i*s*h+n*a*o,t[2]=i*a*o-n*s*h,t[3]=i*a*h+n*s*o):"YZX"===r?(t[0]=n*a*h+i*s*o,t[1]=i*s*h+n*a*o,t[2]=i*a*o-n*s*h,t[3]=i*a*h-n*s*o):"XZY"===r&&(t[0]=n*a*h-i*s*o,t[1]=i*s*h-n*a*o,t[2]=i*a*o+n*s*h,t[3]=i*a*h+n*s*o)}(this,t,t.order),this}fromAxisAngle(t,e){return function(t,e,r){r*=.5;let n=Math.sin(r);t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r)}(this,t,e),this.onChange(),this}slerp(t,e){return function(t,e,r,n){let i,s,a,o,h,u=e[0],l=e[1],c=e[2],d=e[3],p=r[0],f=r[1],g=r[2],m=r[3];s=u*p+l*f+c*g+d*m,s<0&&(s=-s,p=-p,f=-f,g=-g,m=-m),1-s>1e-6?(i=Math.acos(s),a=Math.sin(i),o=Math.sin((1-n)*i)/a,h=Math.sin(n*i)/a):(o=1-n,h=n),t[0]=o*u+h*p,t[1]=o*l+h*f,t[2]=o*c+h*g,t[3]=o*d+h*m}(this,this,t,e),this.onChange(),this}fromArray(t,e=0){return this[0]=t[e],this[1]=t[e+1],this[2]=t[e+2],this[3]=t[e+3],this.onChange(),this}toArray(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t[e+3]=this[3],t}}function T(t,e,r){let n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],h=e[5],u=e[6],l=e[7],c=e[8],d=e[9],p=e[10],f=e[11],g=e[12],m=e[13],v=e[14],y=e[15],x=r[0],w=r[1],b=r[2],_=r[3];return t[0]=x*n+w*o+b*c+_*g,t[1]=x*i+w*h+b*d+_*m,t[2]=x*s+w*u+b*p+_*v,t[3]=x*a+w*l+b*f+_*y,x=r[4],w=r[5],b=r[6],_=r[7],t[4]=x*n+w*o+b*c+_*g,t[5]=x*i+w*h+b*d+_*m,t[6]=x*s+w*u+b*p+_*v,t[7]=x*a+w*l+b*f+_*y,x=r[8],w=r[9],b=r[10],_=r[11],t[8]=x*n+w*o+b*c+_*g,t[9]=x*i+w*h+b*d+_*m,t[10]=x*s+w*u+b*p+_*v,t[11]=x*a+w*l+b*f+_*y,x=r[12],w=r[13],b=r[14],_=r[15],t[12]=x*n+w*o+b*c+_*g,t[13]=x*i+w*h+b*d+_*m,t[14]=x*s+w*u+b*p+_*v,t[15]=x*a+w*l+b*f+_*y,t}function S(t,e){let r=e[0],n=e[1],i=e[2],s=e[4],a=e[5],o=e[6],h=e[8],u=e[9],l=e[10];return t[0]=Math.hypot(r,n,i),t[1]=Math.hypot(s,a,o),t[2]=Math.hypot(h,u,l),t}const O=function(){const t=[0,0,0];return function(e,r){let n=t;S(n,r);let i=1/n[0],s=1/n[1],a=1/n[2],o=r[0]*i,h=r[1]*s,u=r[2]*a,l=r[4]*i,c=r[5]*s,d=r[6]*a,p=r[8]*i,f=r[9]*s,g=r[10]*a,m=o+c+g,v=0;return m>0?(v=2*Math.sqrt(m+1),e[3]=.25*v,e[0]=(d-f)/v,e[1]=(p-u)/v,e[2]=(h-l)/v):o>c&&o>g?(v=2*Math.sqrt(1+o-c-g),e[3]=(d-f)/v,e[0]=.25*v,e[1]=(h+l)/v,e[2]=(p+u)/v):c>g?(v=2*Math.sqrt(1+c-o-g),e[3]=(p-u)/v,e[0]=(h+l)/v,e[1]=.25*v,e[2]=(d+f)/v):(v=2*Math.sqrt(1+g-o-c),e[3]=(h-l)/v,e[0]=(p+u)/v,e[1]=(d+f)/v,e[2]=.25*v),e}}();class L extends Array{constructor(t=1,e=0,r=0,n=0,i=0,s=1,a=0,o=0,h=0,u=0,l=1,c=0,d=0,p=0,f=0,g=1){return super(t,e,r,n,i,s,a,o,h,u,l,c,d,p,f,g),this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(t){this[12]=t}set y(t){this[13]=t}set z(t){this[14]=t}set w(t){this[15]=t}set(t,e,r,n,i,s,a,o,h,u,l,c,d,p,f,g){return t.length?this.copy(t):(function(t,e,r,n,i,s,a,o,h,u,l,c,d,p,f,g,m){t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=s,t[5]=a,t[6]=o,t[7]=h,t[8]=u,t[9]=l,t[10]=c,t[11]=d,t[12]=p,t[13]=f,t[14]=g,t[15]=m}(this,t,e,r,n,i,s,a,o,h,u,l,c,d,p,f,g),this)}translate(t,e=this){return function(t,e,r){let n,i,s,a,o,h,u,l,c,d,p,f,g=r[0],m=r[1],v=r[2];e===t?(t[12]=e[0]*g+e[4]*m+e[8]*v+e[12],t[13]=e[1]*g+e[5]*m+e[9]*v+e[13],t[14]=e[2]*g+e[6]*m+e[10]*v+e[14],t[15]=e[3]*g+e[7]*m+e[11]*v+e[15]):(n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],h=e[5],u=e[6],l=e[7],c=e[8],d=e[9],p=e[10],f=e[11],t[0]=n,t[1]=i,t[2]=s,t[3]=a,t[4]=o,t[5]=h,t[6]=u,t[7]=l,t[8]=c,t[9]=d,t[10]=p,t[11]=f,t[12]=n*g+o*m+c*v+e[12],t[13]=i*g+h*m+d*v+e[13],t[14]=s*g+u*m+p*v+e[14],t[15]=a*g+l*m+f*v+e[15])}(this,e,t),this}rotate(t,e,r=this){return function(t,e,r,n){let i,s,a,o,h,u,l,c,d,p,f,g,m,v,y,x,w,b,_,M,E,A,T,S,O=n[0],L=n[1],F=n[2],C=Math.hypot(O,L,F);Math.abs(C)<1e-6||(C=1/C,O*=C,L*=C,F*=C,i=Math.sin(r),s=Math.cos(r),a=1-s,o=e[0],h=e[1],u=e[2],l=e[3],c=e[4],d=e[5],p=e[6],f=e[7],g=e[8],m=e[9],v=e[10],y=e[11],x=O*O*a+s,w=L*O*a+F*i,b=F*O*a-L*i,_=O*L*a-F*i,M=L*L*a+s,E=F*L*a+O*i,A=O*F*a+L*i,T=L*F*a-O*i,S=F*F*a+s,t[0]=o*x+c*w+g*b,t[1]=h*x+d*w+m*b,t[2]=u*x+p*w+v*b,t[3]=l*x+f*w+y*b,t[4]=o*_+c*M+g*E,t[5]=h*_+d*M+m*E,t[6]=u*_+p*M+v*E,t[7]=l*_+f*M+y*E,t[8]=o*A+c*T+g*S,t[9]=h*A+d*T+m*S,t[10]=u*A+p*T+v*S,t[11]=l*A+f*T+y*S,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(this,r,t,e),this}scale(t,e=this){return function(t,e,r){let n=r[0],i=r[1],s=r[2];t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]}(this,e,"number"==typeof t?[t,t,t]:t),this}multiply(t,e){return e?T(this,t,e):T(this,this,t),this}identity(){var t;return(t=this)[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}copy(t){var e,r;return r=t,(e=this)[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],this}fromPerspective({fov:t,aspect:e,near:r,far:n}={}){return function(t,e,r,n,i){let s=1/Math.tan(e/2),a=1/(n-i);t[0]=s/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+n)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*n*a,t[15]=0}(this,t,e,r,n),this}fromOrthogonal({left:t,right:e,bottom:r,top:n,near:i,far:s}){return function(t,e,r,n,i,s,a){let o=1/(e-r),h=1/(n-i),u=1/(s-a);t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+r)*o,t[13]=(i+n)*h,t[14]=(a+s)*u,t[15]=1}(this,t,e,r,n,i,s),this}fromQuaternion(t){return function(t,e){let r=e[0],n=e[1],i=e[2],s=e[3],a=r+r,o=n+n,h=i+i,u=r*a,l=n*a,c=n*o,d=i*a,p=i*o,f=i*h,g=s*a,m=s*o,v=s*h;t[0]=1-c-f,t[1]=l+v,t[2]=d-m,t[3]=0,t[4]=l-v,t[5]=1-u-f,t[6]=p+g,t[7]=0,t[8]=d+m,t[9]=p-g,t[10]=1-u-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(this,t),this}setPosition(t){return this.x=t[0],this.y=t[1],this.z=t[2],this}inverse(t=this){return function(t,e){let r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],h=e[6],u=e[7],l=e[8],c=e[9],d=e[10],p=e[11],f=e[12],g=e[13],m=e[14],v=e[15],y=r*o-n*a,x=r*h-i*a,w=r*u-s*a,b=n*h-i*o,_=n*u-s*o,M=i*u-s*h,E=l*g-c*f,A=l*m-d*f,T=l*v-p*f,S=c*m-d*g,O=c*v-p*g,L=d*v-p*m,F=y*L-x*O+w*S+b*T-_*A+M*E;F&&(F=1/F,t[0]=(o*L-h*O+u*S)*F,t[1]=(i*O-n*L-s*S)*F,t[2]=(g*M-m*_+v*b)*F,t[3]=(d*_-c*M-p*b)*F,t[4]=(h*T-a*L-u*A)*F,t[5]=(r*L-i*T+s*A)*F,t[6]=(m*w-f*M-v*x)*F,t[7]=(l*M-d*w+p*x)*F,t[8]=(a*O-o*T+u*E)*F,t[9]=(n*T-r*O-s*E)*F,t[10]=(f*_-g*w+v*y)*F,t[11]=(c*w-l*_-p*y)*F,t[12]=(o*A-a*S-h*E)*F,t[13]=(r*S-n*A+i*E)*F,t[14]=(g*x-f*b-m*y)*F,t[15]=(l*b-c*x+d*y)*F)}(this,t),this}compose(t,e,r){return function(t,e,r,n){let i=e[0],s=e[1],a=e[2],o=e[3],h=i+i,u=s+s,l=a+a,c=i*h,d=i*u,p=i*l,f=s*u,g=s*l,m=a*l,v=o*h,y=o*u,x=o*l,w=n[0],b=n[1],_=n[2];t[0]=(1-(f+m))*w,t[1]=(d+x)*w,t[2]=(p-y)*w,t[3]=0,t[4]=(d-x)*b,t[5]=(1-(c+m))*b,t[6]=(g+v)*b,t[7]=0,t[8]=(p+y)*_,t[9]=(g-v)*_,t[10]=(1-(c+f))*_,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1}(this,t,e,r),this}getRotation(t){return O(t,this),this}getTranslation(t){var e,r;return r=this,(e=t)[0]=r[12],e[1]=r[13],e[2]=r[14],this}getScaling(t){return S(t,this),this}getMaxScaleOnAxis(){return function(t){let e=t[0],r=t[1],n=t[2],i=t[4],s=t[5],a=t[6],o=t[8],h=t[9],u=t[10];const l=e*e+r*r+n*n,c=i*i+s*s+a*a,d=o*o+h*h+u*u;return Math.sqrt(Math.max(l,c,d))}(this)}lookAt(t,e,r){return function(t,e,r,n){let i=e[0],s=e[1],a=e[2],o=n[0],h=n[1],u=n[2],l=i-r[0],c=s-r[1],d=a-r[2],p=l*l+c*c+d*d;0===p?d=1:(p=1/Math.sqrt(p),l*=p,c*=p,d*=p);let f=h*d-u*c,g=u*l-o*d,m=o*c-h*l;p=f*f+g*g+m*m,0===p&&(u?o+=1e-6:h?u+=1e-6:h+=1e-6,f=h*d-u*c,g=u*l-o*d,m=o*c-h*l,p=f*f+g*g+m*m),p=1/Math.sqrt(p),f*=p,g*=p,m*=p,t[0]=f,t[1]=g,t[2]=m,t[3]=0,t[4]=c*m-d*g,t[5]=d*f-l*m,t[6]=l*g-c*f,t[7]=0,t[8]=l,t[9]=c,t[10]=d,t[11]=0,t[12]=i,t[13]=s,t[14]=a,t[15]=1}(this,t,e,r),this}determinant(){return function(t){let e=t[0],r=t[1],n=t[2],i=t[3],s=t[4],a=t[5],o=t[6],h=t[7],u=t[8],l=t[9],c=t[10],d=t[11],p=t[12],f=t[13],g=t[14],m=t[15];return(e*a-r*s)*(c*m-d*g)-(e*o-n*s)*(l*m-d*f)+(e*h-i*s)*(l*g-c*f)+(r*o-n*a)*(u*m-d*p)-(r*h-i*a)*(u*g-c*p)+(n*h-i*o)*(u*f-l*p)}(this)}fromArray(t,e=0){return this[0]=t[e],this[1]=t[e+1],this[2]=t[e+2],this[3]=t[e+3],this[4]=t[e+4],this[5]=t[e+5],this[6]=t[e+6],this[7]=t[e+7],this[8]=t[e+8],this[9]=t[e+9],this[10]=t[e+10],this[11]=t[e+11],this[12]=t[e+12],this[13]=t[e+13],this[14]=t[e+14],this[15]=t[e+15],this}toArray(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t[e+3]=this[3],t[e+4]=this[4],t[e+5]=this[5],t[e+6]=this[6],t[e+7]=this[7],t[e+8]=this[8],t[e+9]=this[9],t[e+10]=this[10],t[e+11]=this[11],t[e+12]=this[12],t[e+13]=this[13],t[e+14]=this[14],t[e+15]=this[15],t}}const F=new L;class C extends Array{constructor(t=0,e=t,r=t,n="YXZ"){return super(t,e,r),this.order=n,this.onChange=()=>{},this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(t){this[0]=t,this.onChange()}set y(t){this[1]=t,this.onChange()}set z(t){this[2]=t,this.onChange()}set(t,e=t,r=t){return t.length?this.copy(t):(this[0]=t,this[1]=e,this[2]=r,this.onChange(),this)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.onChange(),this}reorder(t){return this.order=t,this.onChange(),this}fromRotationMatrix(t,e=this.order){return function(t,e,r="YXZ"){"XYZ"===r?(t[1]=Math.asin(Math.min(Math.max(e[8],-1),1)),Math.abs(e[8])<.99999?(t[0]=Math.atan2(-e[9],e[10]),t[2]=Math.atan2(-e[4],e[0])):(t[0]=Math.atan2(e[6],e[5]),t[2]=0)):"YXZ"===r?(t[0]=Math.asin(-Math.min(Math.max(e[9],-1),1)),Math.abs(e[9])<.99999?(t[1]=Math.atan2(e[8],e[10]),t[2]=Math.atan2(e[1],e[5])):(t[1]=Math.atan2(-e[2],e[0]),t[2]=0)):"ZXY"===r?(t[0]=Math.asin(Math.min(Math.max(e[6],-1),1)),Math.abs(e[6])<.99999?(t[1]=Math.atan2(-e[2],e[10]),t[2]=Math.atan2(-e[4],e[5])):(t[1]=0,t[2]=Math.atan2(e[1],e[0]))):"ZYX"===r?(t[1]=Math.asin(-Math.min(Math.max(e[2],-1),1)),Math.abs(e[2])<.99999?(t[0]=Math.atan2(e[6],e[10]),t[2]=Math.atan2(e[1],e[0])):(t[0]=0,t[2]=Math.atan2(-e[4],e[5]))):"YZX"===r?(t[2]=Math.asin(Math.min(Math.max(e[1],-1),1)),Math.abs(e[1])<.99999?(t[0]=Math.atan2(-e[9],e[5]),t[1]=Math.atan2(-e[2],e[0])):(t[0]=0,t[1]=Math.atan2(e[8],e[10]))):"XZY"===r&&(t[2]=Math.asin(-Math.min(Math.max(e[4],-1),1)),Math.abs(e[4])<.99999?(t[0]=Math.atan2(e[6],e[5]),t[1]=Math.atan2(e[8],e[0])):(t[0]=Math.atan2(-e[9],e[10]),t[1]=0))}(this,t,e),this.onChange(),this}fromQuaternion(t,e=this.order){return F.fromQuaternion(t),this.fromRotationMatrix(F,e)}toArray(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t}}class P{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new L,this.worldMatrix=new L,this.matrixAutoUpdate=!0,this.position=new m,this.quaternion=new A,this.scale=new m(1),this.rotation=new C,this.up=new m(0,1,0),this.rotation.onChange=()=>this.quaternion.fromEuler(this.rotation),this.quaternion.onChange=()=>this.rotation.fromQuaternion(this.quaternion)}setParent(t,e=!0){this.parent&&t!==this.parent&&this.parent.removeChild(this,!1),this.parent=t,e&&t&&t.addChild(this,!1)}addChild(t,e=!0){~this.children.indexOf(t)||this.children.push(t),e&&t.setParent(this,!1)}removeChild(t,e=!0){~this.children.indexOf(t)&&this.children.splice(this.children.indexOf(t),1),e&&t.setParent(null,!1)}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||t)&&(null===this.parent?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,t=!0);for(let e=0,r=this.children.length;e<r;e++)this.children[e].updateMatrixWorld(t)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(t){if(!t(this))for(let e=0,r=this.children.length;e<r;e++)this.children[e].traverse(t)}decompose(){this.matrix.getTranslation(this.position),this.matrix.getRotation(this.quaternion),this.matrix.getScaling(this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(t,e=!1){e?this.matrix.lookAt(this.position,t,this.up):this.matrix.lookAt(t,this.position,this.up),this.matrix.getRotation(this.quaternion),this.rotation.fromQuaternion(this.quaternion)}}const j=new L,R=new m,D=new m;class I extends P{constructor(t,{near:e=.1,far:r=100,fov:n=45,aspect:i=1,left:s,right:a,bottom:o,top:h,zoom:u=1}={}){super(),Object.assign(this,{near:e,far:r,fov:n,aspect:i,left:s,right:a,bottom:o,top:h,zoom:u}),this.projectionMatrix=new L,this.viewMatrix=new L,this.projectionViewMatrix=new L,this.worldPosition=new m,this.type=s||a?"orthographic":"perspective","orthographic"===this.type?this.orthographic():this.perspective()}perspective({near:t=this.near,far:e=this.far,fov:r=this.fov,aspect:n=this.aspect}={}){return Object.assign(this,{near:t,far:e,fov:r,aspect:n}),this.projectionMatrix.fromPerspective({fov:r*(Math.PI/180),aspect:n,near:t,far:e}),this.type="perspective",this}orthographic({near:t=this.near,far:e=this.far,left:r=this.left,right:n=this.right,bottom:i=this.bottom,top:s=this.top,zoom:a=this.zoom}={}){return Object.assign(this,{near:t,far:e,left:r,right:n,bottom:i,top:s,zoom:a}),r/=a,n/=a,i/=a,s/=a,this.projectionMatrix.fromOrthogonal({left:r,right:n,bottom:i,top:s,near:t,far:e}),this.type="orthographic",this}updateMatrixWorld(){return super.updateMatrixWorld(),this.viewMatrix.inverse(this.worldMatrix),this.worldMatrix.getTranslation(this.worldPosition),this.projectionViewMatrix.multiply(this.projectionMatrix,this.viewMatrix),this}lookAt(t){return super.lookAt(t,!0),this}project(t){return t.applyMatrix4(this.viewMatrix),t.applyMatrix4(this.projectionMatrix),this}unproject(t){return t.applyMatrix4(j.inverse(this.projectionMatrix)),t.applyMatrix4(this.worldMatrix),this}updateFrustum(){this.frustum||(this.frustum=[new m,new m,new m,new m,new m,new m]);const t=this.projectionViewMatrix;this.frustum[0].set(t[3]-t[0],t[7]-t[4],t[11]-t[8]).constant=t[15]-t[12],this.frustum[1].set(t[3]+t[0],t[7]+t[4],t[11]+t[8]).constant=t[15]+t[12],this.frustum[2].set(t[3]+t[1],t[7]+t[5],t[11]+t[9]).constant=t[15]+t[13],this.frustum[3].set(t[3]-t[1],t[7]-t[5],t[11]-t[9]).constant=t[15]-t[13],this.frustum[4].set(t[3]-t[2],t[7]-t[6],t[11]-t[10]).constant=t[15]-t[14],this.frustum[5].set(t[3]+t[2],t[7]+t[6],t[11]+t[10]).constant=t[15]+t[14];for(let t=0;t<6;t++){const e=1/this.frustum[t].distance();this.frustum[t].multiply(e),this.frustum[t].constant*=e}}frustumIntersectsMesh(t,e=t.worldMatrix){if(!t.geometry.attributes.position)return!0;if(t.geometry.bounds&&t.geometry.bounds.radius!==1/0||t.geometry.computeBoundingSphere(),!t.geometry.bounds)return!0;const r=R;r.copy(t.geometry.bounds.center),r.applyMatrix4(e);const n=t.geometry.bounds.radius*e.getMaxScaleOnAxis();return this.frustumIntersectsSphere(r,n)}frustumIntersectsSphere(t,e){const r=D;for(let n=0;n<6;n++){const i=this.frustum[n];if(r.copy(i).dot(t)+i.constant<-e)return!1}return!0}}const z=new m;let B=1,N=1,U=!1;class k{constructor(t,e={}){t.canvas||console.error("gl not passed as first argument to Geometry"),this.gl=t,this.attributes=e,this.id=B++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let t in e)this.addAttribute(t,e[t])}addAttribute(t,e){if(this.attributes[t]=e,e.id=N++,e.size=e.size||1,e.type=e.type||(e.data.constructor===Float32Array?this.gl.FLOAT:e.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),e.target="index"===t?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,e.normalized=e.normalized||!1,e.stride=e.stride||0,e.offset=e.offset||0,e.count=e.count||(e.stride?e.data.byteLength/e.stride:e.data.length/e.size),e.divisor=e.instanced||0,e.needsUpdate=!1,e.usage=e.usage||this.gl.STATIC_DRAW,e.buffer||this.updateAttribute(e),e.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==e.count*e.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,e.count*e.divisor);this.instancedCount=e.count*e.divisor}else"index"===t?this.drawRange.count=e.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,e.count))}updateAttribute(t){const e=!t.buffer;e&&(t.buffer=this.gl.createBuffer()),this.glState.boundBuffer!==t.buffer&&(this.gl.bindBuffer(t.target,t.buffer),this.glState.boundBuffer=t.buffer),e?this.gl.bufferData(t.target,t.data,t.usage):this.gl.bufferSubData(t.target,0,t.data),t.needsUpdate=!1}setIndex(t){this.addAttribute("index",t)}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}setInstancedCount(t){this.instancedCount=t}createVAO(t){this.VAOs[t.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[t.attributeOrder]),this.bindAttributes(t)}bindAttributes(t){t.attributeLocations.forEach(((t,{name:e,type:r})=>{if(!this.attributes[e])return void console.warn(`active attribute ${e} not being supplied`);const n=this.attributes[e];this.gl.bindBuffer(n.target,n.buffer),this.glState.boundBuffer=n.buffer;let i=1;35674===r&&(i=2),35675===r&&(i=3),35676===r&&(i=4);const s=n.size/i,a=1===i?0:i*i*i,o=1===i?0:i*i;for(let e=0;e<i;e++)this.gl.vertexAttribPointer(t+e,s,n.type,n.normalized,n.stride+a,n.offset+e*o),this.gl.enableVertexAttribArray(t+e),this.gl.renderer.vertexAttribDivisor(t+e,n.divisor)})),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:t,mode:e=this.gl.TRIANGLES}){this.gl.renderer.currentGeometry!==`${this.id}_${t.attributeOrder}`&&(this.VAOs[t.attributeOrder]||this.createVAO(t),this.gl.renderer.bindVertexArray(this.VAOs[t.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${t.attributeOrder}`),t.attributeLocations.forEach(((t,{name:e})=>{const r=this.attributes[e];r.needsUpdate&&this.updateAttribute(r)})),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(e,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+2*this.drawRange.start,this.instancedCount):this.gl.renderer.drawArraysInstanced(e,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(e,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+2*this.drawRange.start):this.gl.drawArrays(e,this.drawRange.start,this.drawRange.count)}getPosition(){const t=this.attributes.position;return t.data?t:U?void 0:(console.warn("No position buffer data found to compute bounds"),U=!0)}computeBoundingBox(t){t||(t=this.getPosition());const e=t.data,r=t.stride?t.stride/e.BYTES_PER_ELEMENT:t.size;this.bounds||(this.bounds={min:new m,max:new m,center:new m,scale:new m,radius:1/0});const n=this.bounds.min,i=this.bounds.max,s=this.bounds.center,a=this.bounds.scale;n.set(1/0),i.set(-1/0);for(let t=0,s=e.length;t<s;t+=r){const r=e[t],s=e[t+1],a=e[t+2];n.x=Math.min(r,n.x),n.y=Math.min(s,n.y),n.z=Math.min(a,n.z),i.x=Math.max(r,i.x),i.y=Math.max(s,i.y),i.z=Math.max(a,i.z)}a.sub(i,n),s.add(n,i).divide(2)}computeBoundingSphere(t){t||(t=this.getPosition());const e=t.data,r=t.stride?t.stride/e.BYTES_PER_ELEMENT:t.size;this.bounds||this.computeBoundingBox(t);let n=0;for(let t=0,i=e.length;t<i;t+=r)z.fromArray(e,t),n=Math.max(n,this.bounds.center.squaredDistance(z));this.bounds.radius=Math.sqrt(n)}remove(){for(let t in this.VAOs)this.gl.renderer.deleteVertexArray(this.VAOs[t]),delete this.VAOs[t];for(let t in this.attributes)this.gl.deleteBuffer(this.attributes[t].buffer),delete this.attributes[t]}}class q extends k{constructor(t,{width:e=1,height:r=1,widthSegments:n=1,heightSegments:i=1,attributes:s={}}={}){const a=n,o=i,h=(a+1)*(o+1),u=a*o*6,l=new Float32Array(3*h),c=new Float32Array(3*h),d=new Float32Array(2*h),p=u>65536?new Uint32Array(u):new Uint16Array(u);q.buildPlane(l,c,d,p,e,r,0,a,o),Object.assign(s,{position:{size:3,data:l},normal:{size:3,data:c},uv:{size:2,data:d},index:{data:p}}),super(t,s)}static buildPlane(t,e,r,n,i,s,a,o,h,u=0,l=1,c=2,d=1,p=-1,f=0,g=0){const m=f,v=i/o,y=s/h;for(let x=0;x<=h;x++){let w=x*y-s/2;for(let s=0;s<=o;s++,f++){let y=s*v-i/2;if(t[3*f+u]=y*d,t[3*f+l]=w*p,t[3*f+c]=a/2,e[3*f+u]=0,e[3*f+l]=0,e[3*f+c]=a>=0?1:-1,r[2*f]=s/o,r[2*f+1]=1-x/h,x===h||s===o)continue;let b=m+s+x*(o+1),_=m+s+(x+1)*(o+1),M=m+s+(x+1)*(o+1)+1,E=m+s+x*(o+1)+1;n[6*g]=b,n[6*g+1]=_,n[6*g+2]=E,n[6*g+3]=_,n[6*g+4]=M,n[6*g+5]=E,g++}}}}var Y=r(7976),W=r.n(Y);let X=1;const V={};class G{constructor(t,{vertex:e,fragment:r,uniforms:n={},transparent:i=!1,cullFace:s=t.BACK,frontFace:a=t.CCW,depthTest:o=!0,depthWrite:h=!0,depthFunc:u=t.LESS}={}){t.canvas||console.error("gl not passed as first argument to Program"),this.gl=t,this.uniforms=n,this.id=X++,e||console.warn("vertex shader not supplied"),r||console.warn("fragment shader not supplied"),this.transparent=i,this.cullFace=s,this.frontFace=a,this.depthTest=o,this.depthWrite=h,this.depthFunc=u,this.blendFunc={},this.blendEquation={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA));const l=t.createShader(t.VERTEX_SHADER);t.shaderSource(l,e),t.compileShader(l),""!==t.getShaderInfoLog(l)&&console.warn(`${t.getShaderInfoLog(l)}\nVertex Shader\n${$(e)}`);const c=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(c,r),t.compileShader(c),""!==t.getShaderInfoLog(c)&&console.warn(`${t.getShaderInfoLog(c)}\nFragment Shader\n${$(r)}`),this.program=t.createProgram(),t.attachShader(this.program,l),t.attachShader(this.program,c),t.linkProgram(this.program),!t.getProgramParameter(this.program,t.LINK_STATUS))return console.warn(t.getProgramInfoLog(this.program));t.deleteShader(l),t.deleteShader(c),this.uniformLocations=new Map;let d=t.getProgramParameter(this.program,t.ACTIVE_UNIFORMS);for(let e=0;e<d;e++){let r=t.getActiveUniform(this.program,e);this.uniformLocations.set(r,t.getUniformLocation(this.program,r.name));const n=r.name.match(/(\w+)/g);r.uniformName=n[0],3===n.length?(r.isStructArray=!0,r.structIndex=Number(n[1]),r.structProperty=n[2]):2===n.length&&isNaN(Number(n[1]))&&(r.isStruct=!0,r.structProperty=n[1])}this.attributeLocations=new Map;const p=[],f=t.getProgramParameter(this.program,t.ACTIVE_ATTRIBUTES);for(let e=0;e<f;e++){const r=t.getActiveAttrib(this.program,e),n=t.getAttribLocation(this.program,r.name);-1!==n&&(p[n]=r.name,this.attributeLocations.set(r,n))}this.attributeOrder=p.join("")}setBlendFunc(t,e,r,n){this.blendFunc.src=t,this.blendFunc.dst=e,this.blendFunc.srcAlpha=r,this.blendFunc.dstAlpha=n,t&&(this.transparent=!0)}setBlendEquation(t,e){this.blendEquation.modeRGB=t,this.blendEquation.modeAlpha=e}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha)}use({flipFaces:t=!1}={}){let e=-1;this.gl.renderer.state.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.state.currentProgram=this.id),this.uniformLocations.forEach(((t,r)=>{let n=r.uniformName,i=this.uniforms[n];if(r.isStruct&&(i=i[r.structProperty],n+=`.${r.structProperty}`),r.isStructArray&&(i=i[r.structIndex][r.structProperty],n+=`[${r.structIndex}].${r.structProperty}`),!i)return Z(`Active uniform ${n} has not been supplied`);if(i&&void 0===i.value)return Z(`${n} uniform is missing a value parameter`);if(i.value.texture)return e+=1,i.value.update(e),H(this.gl,r.type,t,e);if(i.value.length&&i.value[0].texture){const n=[];return i.value.forEach((t=>{e+=1,t.update(e),n.push(e)})),H(this.gl,r.type,t,n)}H(this.gl,r.type,t,i.value)})),this.applyState(),t&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function H(t,e,r,n){n=n.length?function(t){const e=t.length,r=t[0].length;if(void 0===r)return t;const n=e*r;let i=V[n];i||(V[n]=i=new Float32Array(n));for(let n=0;n<e;n++)i.set(t[n],n*r);return i}(n):n;const i=t.renderer.state.uniformLocations.get(r);if(n.length)if(void 0===i||i.length!==n.length)t.renderer.state.uniformLocations.set(r,n.slice(0));else{if(function(t,e){if(t.length!==e.length)return!1;for(let r=0,n=t.length;r<n;r++)if(t[r]!==e[r])return!1;return!0}(i,n))return;i.set?i.set(n):function(t,e){for(let r=0,n=t.length;r<n;r++)t[r]=e[r]}(i,n),t.renderer.state.uniformLocations.set(r,i)}else{if(i===n)return;t.renderer.state.uniformLocations.set(r,n)}switch(e){case 5126:return n.length?t.uniform1fv(r,n):t.uniform1f(r,n);case 35664:return t.uniform2fv(r,n);case 35665:return t.uniform3fv(r,n);case 35666:return t.uniform4fv(r,n);case 35670:case 5124:case 35678:case 35680:return n.length?t.uniform1iv(r,n):t.uniform1i(r,n);case 35671:case 35667:return t.uniform2iv(r,n);case 35672:case 35668:return t.uniform3iv(r,n);case 35673:case 35669:return t.uniform4iv(r,n);case 35674:return t.uniformMatrix2fv(r,!1,n);case 35675:return t.uniformMatrix3fv(r,!1,n);case 35676:return t.uniformMatrix4fv(r,!1,n)}}function $(t){let e=t.split("\n");for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")}let Q=0;function Z(t){Q>100||(console.warn(t),Q++,Q>100&&console.warn("More than 100 program warnings - stopping logs."))}function K(t,e,r){let n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],h=e[5],u=e[6],l=e[7],c=e[8],d=r[0],p=r[1],f=r[2],g=r[3],m=r[4],v=r[5],y=r[6],x=r[7],w=r[8];return t[0]=d*n+p*a+f*u,t[1]=d*i+p*o+f*l,t[2]=d*s+p*h+f*c,t[3]=g*n+m*a+v*u,t[4]=g*i+m*o+v*l,t[5]=g*s+m*h+v*c,t[6]=y*n+x*a+w*u,t[7]=y*i+x*o+w*l,t[8]=y*s+x*h+w*c,t}class J extends Array{constructor(t=1,e=0,r=0,n=0,i=1,s=0,a=0,o=0,h=1){return super(t,e,r,n,i,s,a,o,h),this}set(t,e,r,n,i,s,a,o,h){return t.length?this.copy(t):(function(t,e,r,n,i,s,a,o,h,u){t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=s,t[5]=a,t[6]=o,t[7]=h,t[8]=u}(this,t,e,r,n,i,s,a,o,h),this)}translate(t,e=this){return function(t,e,r){let n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],h=e[5],u=e[6],l=e[7],c=e[8],d=r[0],p=r[1];t[0]=n,t[1]=i,t[2]=s,t[3]=a,t[4]=o,t[5]=h,t[6]=d*n+p*a+u,t[7]=d*i+p*o+l,t[8]=d*s+p*h+c}(this,e,t),this}rotate(t,e=this){return function(t,e,r){let n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],h=e[5],u=e[6],l=e[7],c=e[8],d=Math.sin(r),p=Math.cos(r);t[0]=p*n+d*a,t[1]=p*i+d*o,t[2]=p*s+d*h,t[3]=p*a-d*n,t[4]=p*o-d*i,t[5]=p*h-d*s,t[6]=u,t[7]=l,t[8]=c}(this,e,t),this}scale(t,e=this){return function(t,e,r){let n=r[0],i=r[1];t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8]}(this,e,t),this}multiply(t,e){return e?K(this,t,e):K(this,this,t),this}identity(){var t;return(t=this)[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this}copy(t){var e,r;return r=t,(e=this)[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],this}fromMatrix4(t){var e,r;return r=t,(e=this)[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[4],e[4]=r[5],e[5]=r[6],e[6]=r[8],e[7]=r[9],e[8]=r[10],this}fromQuaternion(t){return function(t,e){let r=e[0],n=e[1],i=e[2],s=e[3],a=r+r,o=n+n,h=i+i,u=r*a,l=n*a,c=n*o,d=i*a,p=i*o,f=i*h,g=s*a,m=s*o,v=s*h;t[0]=1-c-f,t[3]=l-v,t[6]=d+m,t[1]=l+v,t[4]=1-u-f,t[7]=p-g,t[2]=d-m,t[5]=p+g,t[8]=1-u-c}(this,t),this}fromBasis(t,e,r){return this.set(t[0],t[1],t[2],e[0],e[1],e[2],r[0],r[1],r[2]),this}inverse(t=this){return function(t,e){let r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],h=e[6],u=e[7],l=e[8],c=l*a-o*u,d=-l*s+o*h,p=u*s-a*h,f=r*c+n*d+i*p;f&&(f=1/f,t[0]=c*f,t[1]=(-l*n+i*u)*f,t[2]=(o*n-i*a)*f,t[3]=d*f,t[4]=(l*r-i*h)*f,t[5]=(-o*r+i*s)*f,t[6]=p*f,t[7]=(-u*r+n*h)*f,t[8]=(a*r-n*s)*f)}(this,t),this}getNormalMatrix(t){return function(t,e){let r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],h=e[6],u=e[7],l=e[8],c=e[9],d=e[10],p=e[11],f=e[12],g=e[13],m=e[14],v=e[15],y=r*o-n*a,x=r*h-i*a,w=r*u-s*a,b=n*h-i*o,_=n*u-s*o,M=i*u-s*h,E=l*g-c*f,A=l*m-d*f,T=l*v-p*f,S=c*m-d*g,O=c*v-p*g,L=d*v-p*m,F=y*L-x*O+w*S+b*T-_*A+M*E;F&&(F=1/F,t[0]=(o*L-h*O+u*S)*F,t[1]=(h*T-a*L-u*A)*F,t[2]=(a*O-o*T+u*E)*F,t[3]=(i*O-n*L-s*S)*F,t[4]=(r*L-i*T+s*A)*F,t[5]=(n*T-r*O-s*E)*F,t[6]=(g*M-m*_+v*b)*F,t[7]=(m*w-f*M-v*x)*F,t[8]=(f*_-g*w+v*y)*F)}(this,t),this}}let tt=0;class et extends P{constructor(t,{geometry:e,program:r,mode:n=t.TRIANGLES,frustumCulled:i=!0,renderOrder:s=0}={}){super(),t.canvas||console.error("gl not passed as first argument to Mesh"),this.gl=t,this.id=tt++,this.geometry=e,this.program=r,this.mode=n,this.frustumCulled=i,this.renderOrder=s,this.modelViewMatrix=new L,this.normalMatrix=new J,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(t){return this.beforeRenderCallbacks.push(t),this}onAfterRender(t){return this.afterRenderCallbacks.push(t),this}draw({camera:t}={}){this.beforeRenderCallbacks.forEach((e=>e&&e({mesh:this,camera:t}))),t&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=t.projectionMatrix,this.program.uniforms.cameraPosition.value=t.worldPosition,this.program.uniforms.viewMatrix.value=t.viewMatrix,this.modelViewMatrix.multiply(t.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix);let e=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:e}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach((e=>e&&e({mesh:this,camera:t})))}}var rt={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},nt={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},it=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],st={CSS:{},springs:{}};function at(t,e,r){return Math.min(Math.max(t,e),r)}function ot(t,e){return t.indexOf(e)>-1}function ht(t,e){return t.apply(null,e)}var ut={arr:function(t){return Array.isArray(t)},obj:function(t){return ot(Object.prototype.toString.call(t),"Object")},pth:function(t){return ut.obj(t)&&t.hasOwnProperty("totalLength")},svg:function(t){return t instanceof SVGElement},inp:function(t){return t instanceof HTMLInputElement},dom:function(t){return t.nodeType||ut.svg(t)},str:function(t){return"string"==typeof t},fnc:function(t){return"function"==typeof t},und:function(t){return void 0===t},nil:function(t){return ut.und(t)||null===t},hex:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)},rgb:function(t){return/^rgb/.test(t)},hsl:function(t){return/^hsl/.test(t)},col:function(t){return ut.hex(t)||ut.rgb(t)||ut.hsl(t)},key:function(t){return!rt.hasOwnProperty(t)&&!nt.hasOwnProperty(t)&&"targets"!==t&&"keyframes"!==t}};function lt(t){var e=/\(([^)]+)\)/.exec(t);return e?e[1].split(",").map((function(t){return parseFloat(t)})):[]}function ct(t,e){var r=lt(t),n=at(ut.und(r[0])?1:r[0],.1,100),i=at(ut.und(r[1])?100:r[1],.1,100),s=at(ut.und(r[2])?10:r[2],.1,100),a=at(ut.und(r[3])?0:r[3],.1,100),o=Math.sqrt(i/n),h=s/(2*Math.sqrt(i*n)),u=h<1?o*Math.sqrt(1-h*h):0,l=1,c=h<1?(h*o-a)/u:-a+o;function d(t){var r=e?e*t/1e3:t;return r=h<1?Math.exp(-r*h*o)*(l*Math.cos(u*r)+c*Math.sin(u*r)):(l+c*r)*Math.exp(-r*o),0===t||1===t?t:1-r}return e?d:function(){var e=st.springs[t];if(e)return e;for(var r=1/6,n=0,i=0;;)if(1===d(n+=r)){if(++i>=16)break}else i=0;var s=n*r*1e3;return st.springs[t]=s,s}}function dt(t){return void 0===t&&(t=10),function(e){return Math.ceil(at(e,1e-6,1)*t)*(1/t)}}var pt,ft,gt=function(){var t=.1;function e(t,e){return 1-3*e+3*t}function r(t,e){return 3*e-6*t}function n(t){return 3*t}function i(t,i,s){return((e(i,s)*t+r(i,s))*t+n(i))*t}function s(t,i,s){return 3*e(i,s)*t*t+2*r(i,s)*t+n(i)}return function(e,r,n,a){if(0<=e&&e<=1&&0<=n&&n<=1){var o=new Float32Array(11);if(e!==r||n!==a)for(var h=0;h<11;++h)o[h]=i(h*t,e,n);return function(t){return e===r&&n===a||0===t||1===t?t:i(u(t),r,a)}}function u(r){for(var a=0,h=1;10!==h&&o[h]<=r;++h)a+=t;--h;var u=a+(r-o[h])/(o[h+1]-o[h])*t,l=s(u,e,n);return l>=.001?function(t,e,r,n){for(var a=0;a<4;++a){var o=s(e,r,n);if(0===o)return e;e-=(i(e,r,n)-t)/o}return e}(r,u,e,n):0===l?u:function(t,e,r,n,s){var a,o,h=0;do{(a=i(o=e+(r-e)/2,n,s)-t)>0?r=o:e=o}while(Math.abs(a)>1e-7&&++h<10);return o}(r,a,a+t,e,n)}}}(),mt=(pt={linear:function(){return function(t){return t}}},ft={Sine:function(){return function(t){return 1-Math.cos(t*Math.PI/2)}},Circ:function(){return function(t){return 1-Math.sqrt(1-t*t)}},Back:function(){return function(t){return t*t*(3*t-2)}},Bounce:function(){return function(t){for(var e,r=4;t<((e=Math.pow(2,--r))-1)/11;);return 1/Math.pow(4,3-r)-7.5625*Math.pow((3*e-2)/22-t,2)}},Elastic:function(t,e){void 0===t&&(t=1),void 0===e&&(e=.5);var r=at(t,1,10),n=at(e,.1,2);return function(t){return 0===t||1===t?t:-r*Math.pow(2,10*(t-1))*Math.sin((t-1-n/(2*Math.PI)*Math.asin(1/r))*(2*Math.PI)/n)}}},["Quad","Cubic","Quart","Quint","Expo"].forEach((function(t,e){ft[t]=function(){return function(t){return Math.pow(t,e+2)}}})),Object.keys(ft).forEach((function(t){var e=ft[t];pt["easeIn"+t]=e,pt["easeOut"+t]=function(t,r){return function(n){return 1-e(t,r)(1-n)}},pt["easeInOut"+t]=function(t,r){return function(n){return n<.5?e(t,r)(2*n)/2:1-e(t,r)(-2*n+2)/2}},pt["easeOutIn"+t]=function(t,r){return function(n){return n<.5?(1-e(t,r)(1-2*n))/2:(e(t,r)(2*n-1)+1)/2}}})),pt);function vt(t,e){if(ut.fnc(t))return t;var r=t.split("(")[0],n=mt[r],i=lt(t);switch(r){case"spring":return ct(t,e);case"cubicBezier":return ht(gt,i);case"steps":return ht(dt,i);default:return ht(n,i)}}function yt(t){try{return document.querySelectorAll(t)}catch(t){return}}function xt(t,e){for(var r=t.length,n=arguments.length>=2?arguments[1]:void 0,i=[],s=0;s<r;s++)if(s in t){var a=t[s];e.call(n,a,s,t)&&i.push(a)}return i}function wt(t){return t.reduce((function(t,e){return t.concat(ut.arr(e)?wt(e):e)}),[])}function bt(t){return ut.arr(t)?t:(ut.str(t)&&(t=yt(t)||t),t instanceof NodeList||t instanceof HTMLCollection?[].slice.call(t):[t])}function _t(t,e){return t.some((function(t){return t===e}))}function Mt(t){var e={};for(var r in t)e[r]=t[r];return e}function Et(t,e){var r=Mt(t);for(var n in t)r[n]=e.hasOwnProperty(n)?e[n]:t[n];return r}function At(t,e){var r=Mt(t);for(var n in e)r[n]=ut.und(t[n])?e[n]:t[n];return r}function Tt(t){return ut.rgb(t)?(r=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e=t))?"rgba("+r[1]+",1)":e:ut.hex(t)?function(t){var e=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,r,n){return e+e+r+r+n+n})),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return"rgba("+parseInt(r[1],16)+","+parseInt(r[2],16)+","+parseInt(r[3],16)+",1)"}(t):ut.hsl(t)?function(t){var e,r,n,i=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(t),s=parseInt(i[1],10)/360,a=parseInt(i[2],10)/100,o=parseInt(i[3],10)/100,h=i[4]||1;function u(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}if(0==a)e=r=n=o;else{var l=o<.5?o*(1+a):o+a-o*a,c=2*o-l;e=u(c,l,s+1/3),r=u(c,l,s),n=u(c,l,s-1/3)}return"rgba("+255*e+","+255*r+","+255*n+","+h+")"}(t):void 0;var e,r}function St(t){var e=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(t);if(e)return e[1]}function Ot(t,e){return ut.fnc(t)?t(e.target,e.id,e.total):t}function Lt(t,e){return t.getAttribute(e)}function Ft(t,e,r){if(_t([r,"deg","rad","turn"],St(e)))return e;var n=st.CSS[e+r];if(!ut.und(n))return n;var i=document.createElement(t.tagName),s=t.parentNode&&t.parentNode!==document?t.parentNode:document.body;s.appendChild(i),i.style.position="absolute",i.style.width=100+r;var a=100/i.offsetWidth;s.removeChild(i);var o=a*parseFloat(e);return st.CSS[e+r]=o,o}function Ct(t,e,r){if(e in t.style){var n=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=t.style[e]||getComputedStyle(t).getPropertyValue(n)||"0";return r?Ft(t,i,r):i}}function Pt(t,e){return ut.dom(t)&&!ut.inp(t)&&(!ut.nil(Lt(t,e))||ut.svg(t)&&t[e])?"attribute":ut.dom(t)&&_t(it,e)?"transform":ut.dom(t)&&"transform"!==e&&Ct(t,e)?"css":null!=t[e]?"object":void 0}function jt(t){if(ut.dom(t)){for(var e,r=t.style.transform||"",n=/(\w+)\(([^)]*)\)/g,i=new Map;e=n.exec(r);)i.set(e[1],e[2]);return i}}function Rt(t,e,r,n){var i=ot(e,"scale")?1:0+function(t){return ot(t,"translate")||"perspective"===t?"px":ot(t,"rotate")||ot(t,"skew")?"deg":void 0}(e),s=jt(t).get(e)||i;return r&&(r.transforms.list.set(e,s),r.transforms.last=e),n?Ft(t,s,n):s}function Dt(t,e,r,n){switch(Pt(t,e)){case"transform":return Rt(t,e,n,r);case"css":return Ct(t,e,r);case"attribute":return Lt(t,e);default:return t[e]||0}}function It(t,e){var r=/^(\*=|\+=|-=)/.exec(t);if(!r)return t;var n=St(t)||0,i=parseFloat(e),s=parseFloat(t.replace(r[0],""));switch(r[0][0]){case"+":return i+s+n;case"-":return i-s+n;case"*":return i*s+n}}function zt(t,e){if(ut.col(t))return Tt(t);if(/\s/g.test(t))return t;var r=St(t),n=r?t.substr(0,t.length-r.length):t;return e?n+e:n}function Bt(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Nt(t){for(var e,r=t.points,n=0,i=0;i<r.numberOfItems;i++){var s=r.getItem(i);i>0&&(n+=Bt(e,s)),e=s}return n}function Ut(t){if(t.getTotalLength)return t.getTotalLength();switch(t.tagName.toLowerCase()){case"circle":return function(t){return 2*Math.PI*Lt(t,"r")}(t);case"rect":return function(t){return 2*Lt(t,"width")+2*Lt(t,"height")}(t);case"line":return function(t){return Bt({x:Lt(t,"x1"),y:Lt(t,"y1")},{x:Lt(t,"x2"),y:Lt(t,"y2")})}(t);case"polyline":return Nt(t);case"polygon":return function(t){var e=t.points;return Nt(t)+Bt(e.getItem(e.numberOfItems-1),e.getItem(0))}(t)}}function kt(t,e){var r=e||{},n=r.el||function(t){for(var e=t.parentNode;ut.svg(e)&&ut.svg(e.parentNode);)e=e.parentNode;return e}(t),i=n.getBoundingClientRect(),s=Lt(n,"viewBox"),a=i.width,o=i.height,h=r.viewBox||(s?s.split(" "):[0,0,a,o]);return{el:n,viewBox:h,x:h[0]/1,y:h[1]/1,w:a,h:o,vW:h[2],vH:h[3]}}function qt(t,e,r){function n(r){void 0===r&&(r=0);var n=e+r>=1?e+r:0;return t.el.getPointAtLength(n)}var i=kt(t.el,t.svg),s=n(),a=n(-1),o=n(1),h=r?1:i.w/i.vW,u=r?1:i.h/i.vH;switch(t.property){case"x":return(s.x-i.x)*h;case"y":return(s.y-i.y)*u;case"angle":return 180*Math.atan2(o.y-a.y,o.x-a.x)/Math.PI}}function Yt(t,e){var r=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,n=zt(ut.pth(t)?t.totalLength:t,e)+"";return{original:n,numbers:n.match(r)?n.match(r).map(Number):[0],strings:ut.str(t)||e?n.split(r):[]}}function Wt(t){return xt(t?wt(ut.arr(t)?t.map(bt):bt(t)):[],(function(t,e,r){return r.indexOf(t)===e}))}function Xt(t){var e=Wt(t);return e.map((function(t,r){return{target:t,id:r,total:e.length,transforms:{list:jt(t)}}}))}function Vt(t,e){var r=Mt(e);if(/^spring/.test(r.easing)&&(r.duration=ct(r.easing)),ut.arr(t)){var n=t.length;2===n&&!ut.obj(t[0])?t={value:t}:ut.fnc(e.duration)||(r.duration=e.duration/n)}var i=ut.arr(t)?t:[t];return i.map((function(t,r){var n=ut.obj(t)&&!ut.pth(t)?t:{value:t};return ut.und(n.delay)&&(n.delay=r?0:e.delay),ut.und(n.endDelay)&&(n.endDelay=r===i.length-1?e.endDelay:0),n})).map((function(t){return At(t,r)}))}function Gt(t,e){var r=[],n=e.keyframes;for(var i in n&&(e=At(function(t){for(var e=xt(wt(t.map((function(t){return Object.keys(t)}))),(function(t){return ut.key(t)})).reduce((function(t,e){return t.indexOf(e)<0&&t.push(e),t}),[]),r={},n=function(n){var i=e[n];r[i]=t.map((function(t){var e={};for(var r in t)ut.key(r)?r==i&&(e.value=t[r]):e[r]=t[r];return e}))},i=0;i<e.length;i++)n(i);return r}(n),e)),e)ut.key(i)&&r.push({name:i,tweens:Vt(e[i],t)});return r}function Ht(t,e){var r;return t.tweens.map((function(n){var i=function(t,e){var r={};for(var n in t){var i=Ot(t[n],e);ut.arr(i)&&1===(i=i.map((function(t){return Ot(t,e)}))).length&&(i=i[0]),r[n]=i}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}(n,e),s=i.value,a=ut.arr(s)?s[1]:s,o=St(a),h=Dt(e.target,t.name,o,e),u=r?r.to.original:h,l=ut.arr(s)?s[0]:u,c=St(l)||St(h),d=o||c;return ut.und(a)&&(a=u),i.from=Yt(l,d),i.to=Yt(It(a,l),d),i.start=r?r.end:0,i.end=i.start+i.delay+i.duration+i.endDelay,i.easing=vt(i.easing,i.duration),i.isPath=ut.pth(s),i.isPathTargetInsideSVG=i.isPath&&ut.svg(e.target),i.isColor=ut.col(i.from.original),i.isColor&&(i.round=1),r=i,i}))}var $t={css:function(t,e,r){return t.style[e]=r},attribute:function(t,e,r){return t.setAttribute(e,r)},object:function(t,e,r){return t[e]=r},transform:function(t,e,r,n,i){if(n.list.set(e,r),e===n.last||i){var s="";n.list.forEach((function(t,e){s+=e+"("+t+") "})),t.style.transform=s}}};function Qt(t,e){Xt(t).forEach((function(t){for(var r in e){var n=Ot(e[r],t),i=t.target,s=St(n),a=Dt(i,r,s,t),o=It(zt(n,s||St(a)),a),h=Pt(i,r);$t[h](i,r,o,t.transforms,!0)}}))}function Zt(t,e){return xt(wt(t.map((function(t){return e.map((function(e){return function(t,e){var r=Pt(t.target,e.name);if(r){var n=Ht(e,t),i=n[n.length-1];return{type:r,property:e.name,animatable:t,tweens:n,duration:i.end,delay:n[0].delay,endDelay:i.endDelay}}}(t,e)}))}))),(function(t){return!ut.und(t)}))}function Kt(t,e){var r=t.length,n=function(t){return t.timelineOffset?t.timelineOffset:0},i={};return i.duration=r?Math.max.apply(Math,t.map((function(t){return n(t)+t.duration}))):e.duration,i.delay=r?Math.min.apply(Math,t.map((function(t){return n(t)+t.delay}))):e.delay,i.endDelay=r?i.duration-Math.max.apply(Math,t.map((function(t){return n(t)+t.duration-t.endDelay}))):e.endDelay,i}var Jt=0;var te=[],ee=function(){var t;function e(r){for(var n=te.length,i=0;i<n;){var s=te[i];s.paused?(te.splice(i,1),n--):(s.tick(r),i++)}t=i>0?requestAnimationFrame(e):void 0}return"undefined"!=typeof document&&document.addEventListener("visibilitychange",(function(){ne.suspendWhenDocumentHidden&&(re()?t=cancelAnimationFrame(t):(te.forEach((function(t){return t._onDocumentVisibility()})),ee()))})),function(){t||re()&&ne.suspendWhenDocumentHidden||!(te.length>0)||(t=requestAnimationFrame(e))}}();function re(){return!!document&&document.hidden}function ne(t){void 0===t&&(t={});var e,r=0,n=0,i=0,s=0,a=null;function o(t){var e=window.Promise&&new Promise((function(t){return a=t}));return t.finished=e,e}var h=function(t){var e=Et(rt,t),r=Et(nt,t),n=Gt(r,t),i=Xt(t.targets),s=Zt(i,n),a=Kt(s,r),o=Jt;return Jt++,At(e,{id:o,children:[],animatables:i,animations:s,duration:a.duration,delay:a.delay,endDelay:a.endDelay})}(t);o(h);function u(){var t=h.direction;"alternate"!==t&&(h.direction="normal"!==t?"normal":"reverse"),h.reversed=!h.reversed,e.forEach((function(t){return t.reversed=h.reversed}))}function l(t){return h.reversed?h.duration-t:t}function c(){r=0,n=l(h.currentTime)*(1/ne.speed)}function d(t,e){e&&e.seek(t-e.timelineOffset)}function p(t){for(var e=0,r=h.animations,n=r.length;e<n;){var i=r[e],s=i.animatable,a=i.tweens,o=a.length-1,u=a[o];o&&(u=xt(a,(function(e){return t<e.end}))[0]||u);for(var l=at(t-u.start-u.delay,0,u.duration)/u.duration,c=isNaN(l)?1:u.easing(l),d=u.to.strings,p=u.round,f=[],g=u.to.numbers.length,m=void 0,v=0;v<g;v++){var y=void 0,x=u.to.numbers[v],w=u.from.numbers[v]||0;y=u.isPath?qt(u.value,c*x,u.isPathTargetInsideSVG):w+c*(x-w),p&&(u.isColor&&v>2||(y=Math.round(y*p)/p)),f.push(y)}var b=d.length;if(b){m=d[0];for(var _=0;_<b;_++){d[_];var M=d[_+1],E=f[_];isNaN(E)||(m+=M?E+M:E+" ")}}else m=f[0];$t[i.type](s.target,i.property,m,s.transforms),i.currentValue=m,e++}}function f(t){h[t]&&!h.passThrough&&h[t](h)}function g(t){var c=h.duration,g=h.delay,m=c-h.endDelay,v=l(t);h.progress=at(v/c*100,0,100),h.reversePlayback=v<h.currentTime,e&&function(t){if(h.reversePlayback)for(var r=s;r--;)d(t,e[r]);else for(var n=0;n<s;n++)d(t,e[n])}(v),!h.began&&h.currentTime>0&&(h.began=!0,f("begin")),!h.loopBegan&&h.currentTime>0&&(h.loopBegan=!0,f("loopBegin")),v<=g&&0!==h.currentTime&&p(0),(v>=m&&h.currentTime!==c||!c)&&p(c),v>g&&v<m?(h.changeBegan||(h.changeBegan=!0,h.changeCompleted=!1,f("changeBegin")),f("change"),p(v)):h.changeBegan&&(h.changeCompleted=!0,h.changeBegan=!1,f("changeComplete")),h.currentTime=at(v,0,c),h.began&&f("update"),t>=c&&(n=0,h.remaining&&!0!==h.remaining&&h.remaining--,h.remaining?(r=i,f("loopComplete"),h.loopBegan=!1,"alternate"===h.direction&&u()):(h.paused=!0,h.completed||(h.completed=!0,f("loopComplete"),f("complete"),!h.passThrough&&"Promise"in window&&(a(),o(h)))))}return h.reset=function(){var t=h.direction;h.passThrough=!1,h.currentTime=0,h.progress=0,h.paused=!0,h.began=!1,h.loopBegan=!1,h.changeBegan=!1,h.completed=!1,h.changeCompleted=!1,h.reversePlayback=!1,h.reversed="reverse"===t,h.remaining=h.loop,e=h.children;for(var r=s=e.length;r--;)h.children[r].reset();(h.reversed&&!0!==h.loop||"alternate"===t&&1===h.loop)&&h.remaining++,p(h.reversed?h.duration:0)},h._onDocumentVisibility=c,h.set=function(t,e){return Qt(t,e),h},h.tick=function(t){i=t,r||(r=i),g((i+(n-r))*ne.speed)},h.seek=function(t){g(l(t))},h.pause=function(){h.paused=!0,c()},h.play=function(){h.paused&&(h.completed&&h.reset(),h.paused=!1,te.push(h),c(),ee())},h.reverse=function(){u(),h.completed=!h.reversed,c()},h.restart=function(){h.reset(),h.play()},h.remove=function(t){se(Wt(t),h)},h.reset(),h.autoplay&&h.play(),h}function ie(t,e){for(var r=e.length;r--;)_t(t,e[r].animatable.target)&&e.splice(r,1)}function se(t,e){var r=e.animations,n=e.children;ie(t,r);for(var i=n.length;i--;){var s=n[i],a=s.animations;ie(t,a),a.length||s.children.length||n.splice(i,1)}r.length||n.length||e.pause()}ne.version="3.2.1",ne.speed=1,ne.suspendWhenDocumentHidden=!0,ne.running=te,ne.remove=function(t){for(var e=Wt(t),r=te.length;r--;){se(e,te[r])}},ne.get=Dt,ne.set=Qt,ne.convertPx=Ft,ne.path=function(t,e){var r=ut.str(t)?yt(t)[0]:t,n=e||100;return function(t){return{property:t,el:r,svg:kt(r),totalLength:Ut(r)*(n/100)}}},ne.setDashoffset=function(t){var e=Ut(t);return t.setAttribute("stroke-dasharray",e),e},ne.stagger=function(t,e){void 0===e&&(e={});var r=e.direction||"normal",n=e.easing?vt(e.easing):null,i=e.grid,s=e.axis,a=e.from||0,o="first"===a,h="center"===a,u="last"===a,l=ut.arr(t),c=l?parseFloat(t[0]):parseFloat(t),d=l?parseFloat(t[1]):0,p=St(l?t[1]:t)||0,f=e.start||0+(l?c:0),g=[],m=0;return function(t,e,v){if(o&&(a=0),h&&(a=(v-1)/2),u&&(a=v-1),!g.length){for(var y=0;y<v;y++){if(i){var x=h?(i[0]-1)/2:a%i[0],w=h?(i[1]-1)/2:Math.floor(a/i[0]),b=x-y%i[0],_=w-Math.floor(y/i[0]),M=Math.sqrt(b*b+_*_);"x"===s&&(M=-b),"y"===s&&(M=-_),g.push(M)}else g.push(Math.abs(a-y));m=Math.max.apply(Math,g)}n&&(g=g.map((function(t){return n(t/m)*m}))),"reverse"===r&&(g=g.map((function(t){return s?t<0?-1*t:-t:Math.abs(m-t)})))}return f+(l?(d-c)/m:c)*(Math.round(100*g[e])/100)+p}},ne.timeline=function(t){void 0===t&&(t={});var e=ne(t);return e.duration=0,e.add=function(r,n){var i=te.indexOf(e),s=e.children;function a(t){t.passThrough=!0}i>-1&&te.splice(i,1);for(var o=0;o<s.length;o++)a(s[o]);var h=At(r,Et(nt,t));h.targets=h.targets||t.targets;var u=e.duration;h.autoplay=!1,h.direction=e.direction,h.timelineOffset=ut.und(n)?u:It(n,u),a(e),e.seek(h.timelineOffset);var l=ne(h);a(l),s.push(l);var c=Kt(s,t);return e.delay=c.delay,e.endDelay=c.endDelay,e.duration=c.duration,e.seek(0),e.reset(),e.autoplay&&e.play(),e},e},ne.easing=vt,ne.penner=mt,ne.random=function(t,e){return Math.floor(Math.random()*(e-t+1))+t};const ae=ne;class oe{constructor({element:t,geometry:e,gl:r,index:n,scene:i,sizes:s}){this.element=t,this.gl=r,this.geometry=e,this.scene=i,this.index=n,this.sizes=s,this.extra={x:0,y:0},this.createTexture(),this.createProgram(),this.createMesh(),this.createBounds({sizes:this.sizes})}createTexture(){const t=this.element.querySelector(".detail__media__image");this.texture=window.TEXTURES[t.getAttribute("data-src")]}createProgram(){this.program=new G(this.gl,{fragment:"precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D tMap;\nuniform float threshold;\n\nvarying vec2 vUv;\n\nvoid main() {\n    vec4 texture = texture2D(tMap, vUv);\n    float alpha = step(vUv.x, threshold);\n    gl_FragColor = vec4(texture.rgb, alpha * texture.a);\n}",vertex:"#define GLSLIFY 1\nattribute vec3 position;\nattribute vec2 uv;\n\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n}",uniforms:{threshold:{value:-.1},tMap:{value:this.texture}}})}createMesh(){this.mesh=new et(this.gl,{geometry:this.geometry,program:this.program}),this.mesh.setParent(this.scene)}createBounds({sizes:t}){this.sizes=t,this.bounds=this.element.getBoundingClientRect(),this.updateScale(),this.updateX(),this.updateY()}Animations;show(){ae({targets:this.program.uniforms.threshold,value:1,duration:1100,easing:"easeOutQuint"})}hide(){ae({targets:this.program.uniforms.threshold,value:-.1,easing:"easeOutQuint",duration:800})}onResize(t,e){this.extra={x:0,y:0},this.createBounds(t),this.updateX(e&&e.x),this.updateY(e&&e.y)}onPointerIn(){}onPointerOut(){}updateScale(){this.height=this.bounds.height/window.innerHeight,this.width=this.bounds.width/window.innerWidth,this.mesh.scale.x=this.sizes.width*this.width,this.mesh.scale.y=this.sizes.height*this.height}updateX(t=0){this.x=(this.bounds.left-t)/window.innerWidth,this.mesh.position.x=-this.sizes.width/2+this.mesh.scale.x/2+this.x*this.sizes.width+this.extra.x}updateY(t=0){this.y=(this.bounds.top-t)/window.innerHeight,this.mesh.position.y=this.sizes.height/2-this.mesh.scale.y/2-this.y*this.sizes.height+this.extra.y}flagEffect(){this.mesh.program.uniforms.uTime.value+=.001}update(t){this.updateScale(),this.updateX(),this.updateY(t)}}class he{constructor({template:t}){this.template=t,this.y={start:0,end:0},this.positions={posX:0,posY:0},this.createRenderer(),this.createScene(),this.createCamera(),this.onResize()}createRenderer(){this.renderer=new x({alpha:!0,antialias:!0,dpr:1.5}),this.gl=this.renderer.gl,document.body.appendChild(this.gl.canvas)}createCamera(){this.camera=new I(this.gl),this.camera.position.z=5}createScene(){this.scene=new P}createDetail(){this.detail=new class{constructor({gl:t,scene:e,sizes:r}){this.gl=t,this.scene=e,this.sizes=r,this.group=new P,this.galleryWrapperElement=document.querySelector(".detail__gallery__wrapper"),this.scroll={current:0,start:0,target:0,lerp:.1},this.createGeometry(),this.createMedias(),this.onResize({sizes:this.sizes}),this.group.setParent(this.scene),this.createObserver(),this.event()}createGeometry(){this.geometry=new q(this.gl)}createMedias(){this.mediasElements=document.querySelectorAll(".detail__media"),this.medias=W()(this.mediasElements,((t,e)=>new oe({element:t,geometry:this.geometry,index:e,gl:this.gl,scene:this.group,sizes:this.sizes})))}event(){i()(this.mediasElements,((t,e)=>{t.addEventListener("pointerenter",(t=>{this.medias[e].onPointerIn()})),t.addEventListener("pointerleave",(t=>{this.medias[e].onPointerOut()}))}))}createObserver(){i()(this.mediasElements,((t,e)=>{new window.IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting&&this.show(e)}))})).observe(t)}))}show(t){this.medias[t].show()}hide(){W()(this.medias,(t=>t.hide()))}onResize(t){this.sizes=t.sizes,this.bounds=this.galleryWrapperElement.getBoundingClientRect(),this.scroll.last=this.scroll.target=0,W()(this.medias,(e=>e.onResize(t,this.scroll))),this.scroll.limit=this.bounds.height-this.medias[0].element.clientHeight}onTouchDown(){this.scroll.last=this.scroll.current}onTouchMove({y:t}){const e=t.start-t.end;this.scroll.target=this.scroll.last+e}onTouchUp(){}onWheel({pixelY:t}){this.scroll.target+=t}update(){this.scroll.target=Math.min(Math.max(this.scroll.target,0),this.scroll.limit),this.scroll.current=this.scroll.current+.1*(this.scroll.target-this.scroll.current),this.scroll.current<.01&&(this.scroll.current=0),this.galleryWrapperElement.style.transform=`translate3d(0, -${this.scroll.current}px, 0)`,W()(this.medias,(t=>t.update(this.scroll.current)))}destroy(){this.scene.removeChild(this.group)}}({gl:this.gl,scene:this.scene,sizes:this.sizes})}destroyDetail(){this.detail&&(this.detail.destroy(),this.detail=null)}onPreloaded(){this.onChangeEnd(this.template)}onChangeStart(t){this.detail&&this.detail.hide()}onChangeEnd(t){"detail"===t?this.createDetail():this.detail&&this.destroyDetail(),this.template=t}onResize(){this.renderer.setSize(window.innerWidth,window.innerHeight),this.camera.perspective({aspect:window.innerWidth/window.innerHeight});const t=this.camera.fov*(Math.PI/180),e=2*Math.tan(t/2)*this.camera.position.z,r=e*this.camera.aspect;this.sizes={height:e,width:r};const n={sizes:this.sizes};this.detail&&this.detail.onResize(n)}onTouchDown(t){this.isDown=!0,this.y.start=t.touches?t.touches[0].clientY:t.clientY,this.detail&&this.detail.onTouchDown()}onTouchMove(t){if(!this.isDown)return;const e=t.touches?t.touches[0].clientY:t.clientY;this.y.end=e;const r={y:this.y};this.detail&&this.detail.onTouchMove(r)}onTouchUp(t){this.isDown=!1}onWheel(t){this.detail&&this.detail.onWheel(t)}update(t){this.detail&&this.detail.update(t),this.renderer.render({camera:this.camera,scene:this.scene})}}function ue({element:t,expression:e=" ",append:r=!0}){const n=function(t,e){const r=t.split("<br>");let n=[];return i()(r,((t,r)=>{r>0&&n.push("<br>"),n=n.concat(t.split(e));let s=!1,a="";const o=[];i()(n,(t=>{s||!t.includes("<a")&&!t.includes("<strong")||(a="",s=!0),s&&(a+=` ${t}`),s&&(t.includes("/a>")||t.includes("/strong>"))&&(o.push(a),a=""),s||""!==a||o.push(t),s&&(t.includes("/a>")||t.includes("/strong>"))&&(s=!1)})),n=o})),n}(t.innerHTML.toString().trim(),e);let s="";i()(n,(t=>{if(t.indexOf("<br>")>-1){const e=t.split("<br>");i()(e,((t,e)=>{s+=e>0?"<br>"+le(t):le(t)}))}else s+=le(t)})),t.innerHTML=s;const a=t.querySelectorAll("span");return r&&i()(a,(t=>{const e=1===t.textContent.length,r=""!==t.innerHTML.trim(),n="&"!==t.textContent,i="-"!==t.textContent;e&&r&&n&&i&&(t.innerHTML=`${t.textContent}&nbsp;`)})),a}function le(t){return""===(t=t.trim())||" "===t?t:"<br>"===t?"<br>":`<span>${t}</span>`+(t.length>1?" ":"")}const ce=new Uint8Array(4);function de(t){return 0==(t&t-1)}let pe=1;class fe{constructor(t,{image:e,target:r=t.TEXTURE_2D,type:n=t.UNSIGNED_BYTE,format:i=t.RGBA,internalFormat:s=i,wrapS:a=t.CLAMP_TO_EDGE,wrapT:o=t.CLAMP_TO_EDGE,generateMipmaps:h=!0,minFilter:u=(h?t.NEAREST_MIPMAP_LINEAR:t.LINEAR),magFilter:l=t.LINEAR,premultiplyAlpha:c=!1,unpackAlignment:d=4,flipY:p=r==t.TEXTURE_2D,anisotropy:f=0,level:g=0,width:m,height:v=m}={}){this.gl=t,this.id=pe++,this.image=e,this.target=r,this.type=n,this.format=i,this.internalFormat=s,this.minFilter=u,this.magFilter=l,this.wrapS=a,this.wrapT=o,this.generateMipmaps=h,this.premultiplyAlpha=c,this.unpackAlignment=d,this.flipY=p,this.anisotropy=Math.min(f,this.gl.renderer.parameters.maxAnisotropy),this.level=g,this.width=m,this.height=v,this.texture=this.gl.createTexture(),this.store={image:null},this.glState=this.gl.renderer.state,this.state={},this.state.minFilter=this.gl.NEAREST_MIPMAP_LINEAR,this.state.magFilter=this.gl.LINEAR,this.state.wrapS=this.gl.REPEAT,this.state.wrapT=this.gl.REPEAT,this.state.anisotropy=0}bind(){this.glState.textureUnits[this.glState.activeTextureUnit]!==this.id&&(this.gl.bindTexture(this.target,this.texture),this.glState.textureUnits[this.glState.activeTextureUnit]=this.id)}update(t=0){const e=!(this.image===this.store.image&&!this.needsUpdate);if((e||this.glState.textureUnits[t]!==this.id)&&(this.gl.renderer.activeTexture(t),this.bind()),e){if(this.needsUpdate=!1,this.flipY!==this.glState.flipY&&(this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,this.flipY),this.glState.flipY=this.flipY),this.premultiplyAlpha!==this.glState.premultiplyAlpha&&(this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),this.glState.premultiplyAlpha=this.premultiplyAlpha),this.unpackAlignment!==this.glState.unpackAlignment&&(this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,this.unpackAlignment),this.glState.unpackAlignment=this.unpackAlignment),this.minFilter!==this.state.minFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MIN_FILTER,this.minFilter),this.state.minFilter=this.minFilter),this.magFilter!==this.state.magFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MAG_FILTER,this.magFilter),this.state.magFilter=this.magFilter),this.wrapS!==this.state.wrapS&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_S,this.wrapS),this.state.wrapS=this.wrapS),this.wrapT!==this.state.wrapT&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_T,this.wrapT),this.state.wrapT=this.wrapT),this.anisotropy&&this.anisotropy!==this.state.anisotropy&&(this.gl.texParameterf(this.target,this.gl.renderer.getExtension("EXT_texture_filter_anisotropic").TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropy),this.state.anisotropy=this.anisotropy),this.image){if(this.image.width&&(this.width=this.image.width,this.height=this.image.height),this.target===this.gl.TEXTURE_CUBE_MAP)for(let t=0;t<6;t++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+t,this.level,this.internalFormat,this.format,this.type,this.image[t]);else if(ArrayBuffer.isView(this.image))this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,this.image);else if(this.image.isCompressedTexture)for(let t=0;t<this.image.length;t++)this.gl.compressedTexImage2D(this.target,t,this.internalFormat,this.image[t].width,this.image[t].height,0,this.image[t].data);else this.gl.texImage2D(this.target,this.level,this.internalFormat,this.format,this.type,this.image);this.generateMipmaps&&(this.gl.renderer.isWebgl2||de(this.image.width)&&de(this.image.height)?this.gl.generateMipmap(this.target):(this.generateMipmaps=!1,this.wrapS=this.wrapT=this.gl.CLAMP_TO_EDGE,this.minFilter=this.gl.LINEAR)),this.onUpdate&&this.onUpdate()}else if(this.target===this.gl.TEXTURE_CUBE_MAP)for(let t=0;t<6;t++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,ce);else this.width?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,null):this.gl.texImage2D(this.target,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,ce);this.store.image=this.image}}}var ge=r(1590),me=r.n(ge);class ve extends(me()){constructor({element:t,elements:e}){super(),this.selector=t,this.selectorChildren={...e},this.create(),this.addEventListeners()}create(){this.selector instanceof window.HTMLElement?this.element=this.selector:this.element=document.querySelector(this.selector),this.elements={},i()(this.selectorChildren,((t,e)=>{t instanceof window.HTMLElement||t instanceof window.NodeList||Array.isArray(t)?this.elements[e]=t:(this.elements[e]=document.querySelectorAll(t),0===this.elements[e].length?this.elements[e]=null:1===this.elements[e].length&&(this.elements[e]=document.querySelector(t)))}))}addEventListeners(){}removeEventListeners(){}}class ye extends ve{constructor({canvas:t=null}){super({element:".preloader",elements:{title:".preloader__text",number:".preloader__number",numberText:".preloader__number__text"}}),this.canvas=t,window.TEXTURES={},this.page=document.querySelector(".preloader");const e=this.page.querySelector(".preloader__text");ue({element:e}),ue({element:e}),this.titleSpan=this.page.querySelector("span span"),this.length=0,this.createLoader()}createLoader(){this.canvas?i()(window.ASSETS,(t=>{const e=new fe(this.canvas.gl,{generateMipMaps:!1}),r=new window.Image;r.crossOrigin="anonymous",r.src=t,r.onload=t=>{e.image=r,this.onAssetLoaded()},window.TEXTURES[t]=e})):i()(window.ASSETS,(t=>{const e=new window.Image;e.crossOrigin="anonymous",e.src=t,e.onload=t=>{this.onAssetLoaded()}}))}onAssetLoaded(){this.length++;const t=this.length/window.ASSETS.length;this.elements.numberText.innerHTML=`${Math.round(100*t)}%`,1===t&&this.onLoaded()}onLoaded(){return new Promise((t=>{this.animationOut=ae.timeline({begin:()=>{this.emit("completed")},complete:()=>{this.destroy()}}),this.animationOut.add({targets:this.titleSpan,translateY:"110%",easing:"linear",duration:300},1e3),this.animationOut.add({targets:this.elements.numberText,translateY:"110%",easing:"linear",duration:300},1e3),this.animationOut.add({targets:this.element,translateY:"-100%",easing:"easeOutQuint",duration:1500},"+=300")}))}destroy(){this.element.parentNode.removeChild(this.element)}}class xe extends ve{constructor({template:t}){super({element:".navigation",elements:{items:".navigation__list__item",links:".navigation__list__link"}}),this.onChange(t)}onChange(t){"home"===t?(ae({targets:this.elements.links[1],pointerEvents:"none",translateY:"-110%",easing:"easeOutQuint",duration:700}),ae.set(this.elements.links[0],{translateY:"110%",pointerEvents:"auto"}),ae({targets:this.elements.links[0],easing:"easeOutQuint",translateY:"0%",duration:700})):(ae({targets:this.elements.links[0],translateY:"-110%",pointerEvents:"none",easing:"easeOutQuint",duration:700}),ae.set(this.elements.links[1],{translateY:"110%",pointerEvents:"auto"}),ae({targets:this.elements.links[1],easing:"easeOutQuint",translateY:"0%",duration:700}))}}class we extends ve{constructor({element:t}){super({element:t}),this.createObserver()}createObserver(){this.observer=new window.IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting&&(this.element.src||(this.element.src=this.element.getAttribute("data-src"),this.element.onload=t=>{this.element.classList.add("loaded")}))}))})),this.observer.observe(this.element)}}class be{constructor({element:t,elements:e,id:r}){this.selector=t,this.selectorChildren={...e,preloaders:"[data-src]"},this.id=r,this.alert=document.querySelector(".alert")}create(){this.element=document.querySelector(this.selector),this.elements={},s.isDesktop()||(window.pageYOffset=0,document.documentElement.scrollTop=0,document.body.scrollTop=0),this.scroll={current:0,target:0,last:0,limit:0},this.y={start:0,end:0},i()(this.selectorChildren,((t,e)=>{t instanceof window.HTMLElement||t instanceof window.NodeList||Array.isArray(t)?this.elements[e]=t:(this.elements[e]=document.querySelectorAll(t),0===this.elements[e].length?this.elements[e]=null:1===this.elements[e].length&&(this.elements[e]=document.querySelector(t)))})),!s.isDesktop()&&this.createPreloader()}createPreloader(){this.preloaders=W()(this.elements.preloaders,(t=>new we({element:t})))}show(){return new Promise((t=>{ae({targets:this.element,opacity:[0,1],easing:"linear",duration:400,complete:()=>{this.addEventListeners(),t()}})}))}hide(){return new Promise((t=>{ae({targets:this.element,opacity:0,easing:"linear",duration:100,delay:1e3,complete:()=>{t()}})}))}onResize(){this.scroll.last=this.scroll.target=0,this.elements.wrapper&&(this.scroll.limit=this.elements.wrapper.clientHeight-window.innerHeight/1.5),s.isDesktop()||(window.innerHeight<window.innerWidth?this.alert.style.opacity=1:this.alert.style.opacity=0)}onTouchDown(t){this.isDown=!0,this.y.start=t.touches?t.touches[0].clientY:t.clientY,this.scroll.last=this.scroll.current}onTouchMove(t){if(!this.isDown)return;const e=t.touches?t.touches[0].clientY:t.clientY;this.y.end=e;const r=this.y.start-this.y.end;this.scroll.target=this.scroll.last+r}onTouchUp(t){this.isDown=!1}onWheel({pixelY:t}){this.scroll.target+=t}update(){if(this.scroll.target=Math.min(Math.max(this.scroll.target,0),this.scroll.limit),this.scroll.current=this.scroll.current+.1*(this.scroll.target-this.scroll.current),this.scroll.current<.01&&(this.scroll.current=0),this.elements.wrapper&&s.isDesktop()){this.elements.wrapper.style.transform=`translate3d(0, -${this.scroll.current}px, 0)`;const t=this.element.querySelectorAll(".item"),e=window.innerHeight/2;i()(t,(t=>{const r=t.getBoundingClientRect();r.top<e&&r.bottom>e?t.classList.add("item_on_middle"):t.classList.remove("item_on_middle")}))}}addEventListeners(){}removeEventListeners(){}}class _e extends be{constructor(){super({id:"home",element:".home",elements:{wrapper:".home__list"}})}textShow(){this.page=document.querySelector(".home"),this.texts=this.page.querySelectorAll(".item__wrapper"),ae({targets:this.texts,translateY:["105%","0%"],easing:"easeOutQuint",duration:700,delay:ae.stagger(50)})}textHide(){ae({targets:this.texts,translateY:"-105%",easing:"easeOutQuint",duration:700})}async show(){super.show(),this.textShow()}async hide(){super.hide(),this.textHide()}}class Me extends be{constructor(){super({id:"detail",element:".detail"})}textShow(){this.page=document.querySelector(".detail"),this.texts=this.page.querySelectorAll("h1, h2, p"),i()(this.texts,(t=>{ue({element:t,expression:"<br>"}),ue({element:t,expression:"<br>"})})),this.spans=this.page.querySelectorAll("span span"),ae({targets:this.spans,translateY:["110%","0%"],easing:"easeOutQuint",duration:700,delay:ae.stagger(50)})}textHide(){ae({targets:this.spans,translateY:"-110%",easing:"easeOutQuint",duration:700})}async show(){super.show(),this.textShow()}async hide(){super.hide(),this.textHide()}}class Ee extends be{constructor(){super({id:"about",element:".about"})}textShow(){this.page=document.querySelector(".about"),this.links=this.page.querySelectorAll("a"),this.texts=this.page.querySelectorAll("h1, h2, p"),i()(this.texts,(t=>{ue({element:t,expression:"<br>"}),ue({element:t,expression:"<br>"})})),this.spans=this.page.querySelectorAll("span span"),ae({targets:this.spans,translateY:["105%","0%"],easing:"easeOutQuint",duration:700,delay:ae.stagger(50)}),ae({targets:this.links,opacity:[0,1],duration:700,easing:"linear",delay:1e3})}textHide(){ae({targets:this.spans,translateY:"-105%",easing:"easeOutQuint",duration:700}),ae({targets:this.links,opacity:0,duration:400,easing:"linear"})}async show(){super.show(),this.textShow()}async hide(){super.hide(),this.textHide()}}new class{constructor(){this.createContent(),s.isDesktop()&&this.createCanvas(),this.createPreloader(),this.createNavigation(),this.createPages(),this.addEventListeners(),this.addLinkListeners(),this.onResize(),this.update()}createContent(){this.content=document.querySelector(".content"),this.template=this.content.getAttribute("data-template")}createCanvas(){this.canvas=new he({template:this.template})}createPreloader(){this.preloader=new ye({canvas:this.canvas}),this.preloader.once("completed",this.onPreloaded.bind(this))}createNavigation(){this.navigation=new xe({template:this.template})}createPages(){this.pages={home:new _e,detail:new Me,about:new Ee},this.page=this.pages[this.template],this.page.create()}onPreloaded(){this.onResize(),this.canvas&&this.canvas.onPreloaded(),this.page.show()}onPopState(){this.onChange({url:window.location.pathname,push:!1})}async onChange({url:t,push:e=!0}){this.canvas&&this.canvas.onChangeStart(this.template,t),await this.page.hide();const r=await window.fetch(t);if(200===r.status){const n=await r.text(),i=document.createElement("div");e&&window.history.pushState({},"",t),i.innerHTML=n;const s=i.querySelector(".content");this.template=s.getAttribute("data-template"),this.navigation.onChange(this.template),this.content.setAttribute("data-template",this.template),this.content.innerHTML=s.innerHTML,this.canvas&&this.canvas.onChangeEnd(this.template),this.page=this.pages[this.template],this.page.create(),this.onResize(),await this.page.show(),this.addLinkListeners()}else console.error(`response status: ${r.status}`)}onResize(){this.page&&this.page.onResize&&this.page.onResize(),window.requestAnimationFrame((t=>{this.canvas&&this.canvas.onResize&&this.canvas.onResize()}))}onTouchDown(t){this.canvas&&this.canvas.onTouchDown&&this.canvas.onTouchDown(t),this.page&&this.page.onTouchDown&&this.page.onTouchDown(t)}onTouchMove(t){this.canvas&&this.canvas.onTouchMove&&this.canvas.onTouchMove(t),this.page&&this.page.onTouchDown&&this.page.onTouchMove(t)}onTouchUp(t){this.canvas&&this.canvas.onTouchUp&&this.canvas.onTouchUp(t),this.page&&this.page.onTouchDown&&this.page.onTouchUp(t)}onWheel(t){const r=e()(t);this.canvas&&this.canvas.onWheel&&this.canvas.onWheel(r),this.page&&this.page.onWheel&&this.page.onWheel(r)}update(){this.page&&this.page.update&&this.page.update(),this.canvas&&this.canvas.update&&this.canvas.update(this.page.scroll),window.requestAnimationFrame(this.update.bind(this))}addEventListeners(){window.addEventListener("mousewheel",this.onWheel.bind(this)),window.addEventListener("popstate",this.onPopState.bind(this)),window.addEventListener("mousedown",this.onTouchDown.bind(this)),window.addEventListener("mousemove",this.onTouchMove.bind(this)),window.addEventListener("mouseup",this.onTouchUp.bind(this)),window.addEventListener("touchstart",this.onTouchDown.bind(this)),window.addEventListener("touchmove",this.onTouchMove.bind(this)),window.addEventListener("touchend",this.onTouchUp.bind(this)),window.addEventListener("resize",this.onResize.bind(this))}addLinkListeners(){const t=document.querySelectorAll("a");i()(t,(t=>{-1===t.href.indexOf(window.location.origin)||(t.onclick=e=>{e.preventDefault();const{href:r}=t;this.onChange({url:r})})}))}}})()})();